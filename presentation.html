<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡∏ö‡∏≤‡∏•‡∏µ (Interactive Text)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Niramit:wght@400;500;600&family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CSS ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô --- */
        body { margin: 0; padding: 0; background-color: #eceff1; font-family: 'Sarabun', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #37474f; }
        
        .card {
            width: 95%; max-width: 1000px; height: 85vh; max-height: 800px;
            background-color: #ffffff; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            display: flex; flex-direction: column; overflow: hidden; position: relative;
        }
        
        .header-bar { height: 6px; background: linear-gradient(90deg, #263238, #546e7a, #78909c); width: 100%; flex-shrink: 0; }
        
        .content-area {
            flex: 1;
            padding: 40px 100px 20px 100px;
            display: flex; flex-direction: column;
            justify-content: flex-start; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏ö‡∏ô */
            align-items: stretch;
            text-align: left;
            overflow-y: auto;
        }
        .content-area::-webkit-scrollbar { width: 6px; }
        .content-area::-webkit-scrollbar-thumb { background-color: #cfd8dc; border-radius: 4px; }

        /* --- CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ (‡∏û‡∏£‡∏∞‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤) --- */
        .word-span {
            cursor: pointer;
            padding: 0 2px;
            border-radius: 3px;
            transition: all 0.1s;
            display: inline-block; /* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ border ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° */
        }
        
        /* ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏≤‡πÄ‡∏°‡∏≤‡∏™‡πå‡∏ä‡∏µ‡πâ */
        .word-span:hover {
            background-color: #f5f5f5;
        }

        /* ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å (‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡πâ‡∏ß) */
        .word-span.translated {
            color: #d35400; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏≠‡∏¥‡∏ê */
            font-weight: 600; /* ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô */
            border-bottom: 3px solid #d35400; /* ‡∏Ç‡∏µ‡∏î‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ï‡πâ */
            background-color: rgba(211, 84, 0, 0.05); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏á‡πÜ */
        }

        /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏≤‡∏•‡∏µ */
        .pali-text {
            font-family: 'Niramit', serif;
            font-size: 1.8rem; /* ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏ß‡πâ */
            color: #263238;
            font-weight: 500;
            line-height: 2;
            margin-bottom: 25px;

            /* *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ *** */
            text-align: left;  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å justify ‡πÄ‡∏õ‡πá‡∏ô left */
            text-indent: 50px; /* ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° */
            
            /* ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ */
            word-break: normal;
            overflow-wrap: break-word;
        }

        /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏ó‡∏¢ */
        .thai-text {
            font-family: 'Sarabun', sans-serif;
            font-size: 1.3rem; /* ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏ß‡πâ */
            color: #546e7a;
            line-height: 2;
            font-weight: 300;

            /* *** ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ *** */
            text-align: left;  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å justify ‡πÄ‡∏õ‡πá‡∏ô left */
            text-indent: 50px; /* ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏¢‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° */

            /* ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥ */
            word-break: normal;
            overflow-wrap: break-word;
        }

        .divider { width: 50px; height: 4px; background-color: #cfd8dc; border-radius: 2px; margin: 0 auto 25px auto; flex-shrink: 0; }
        .footer-box { background-color: #f7f9f9; border-top: 1px solid #eceff1; height: 150px; display: flex; padding: 0; flex-shrink: 0; }
        .footer-section { flex: 1; padding: 15px 25px; border-right: 1px solid #eceff1; display: flex; flex-direction: column; text-align: left; overflow-y: auto; }
        .footer-section:last-child { border-right: none; }
        .sec-title { font-size: 0.8rem; font-weight: 700; color: #90a4ae; text-transform: uppercase; margin-bottom: 8px; border-bottom: 1px solid #cfd8dc; padding-bottom: 3px; }
        .sec-content { font-size: 0.95rem; color: #37474f; line-height: 1.5; }
        .pali-word { font-family: 'Niramit', serif; color: #0277bd; font-weight: 500; }
        
        .page-badge { position: absolute; top: 20px; right: 20px; background-color: rgba(236, 239, 241, 0.9); padding: 6px 12px; border-radius: 8px; font-size: 0.9rem; color: #78909c; font-weight: bold; z-index: 10; }
        
        .controls { position: fixed; bottom: 25px; display: flex; gap: 20px; z-index: 100; }
        button { padding: 12px 30px; background-color: #455a64; border: none; border-radius: 50px; font-family: 'Sarabun', sans-serif; font-size: 1rem; font-weight: 600; color: #ffffff; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: all 0.3s ease; }
        button:hover { background-color: #607d8b; transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,0,0,0.25); }

        @keyframes slideIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .animate-content { animation: slideIn 0.4s ease-out forwards; }

        @media screen and (max-width: 768px) {
            .card { height: 90vh; margin-top: -40px; }
            .content-area { padding: 60px 20px 40px 20px; }
            .pali-text { font-size: 1.4rem; margin-bottom: 15px; }
            .thai-text { font-size: 1.2rem; }
            .footer-box { height: auto; flex-direction: column; overflow-y: auto; min-height: 120px; max-height: 30%; }
            .footer-section { border-right: none; border-bottom: 1px solid #eceff1; padding: 10px 20px; }
            .controls { bottom: 10px; gap: 10px; }
            button { padding: 10px 20px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <div class="card" id="cardContainer">
        <div class="header-bar"></div>
        <div class="page-badge" id="pageNumber">1</div>

        <div class="content-area animate-content" id="mainContent">
            <!-- ID ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢ JavaScript ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏£‡∏Å‡∏Ñ‡∏≥ -->
            <div class="pali-text" id="paliContent">...</div>
            <div class="divider"></div>
            <div class="thai-text" id="thaiContent">...</div>
        </div>

        <div class="footer-box">
            <div class="footer-section" style="flex: 1.2;">
                <div class="sec-title">üìù ‡∏ö‡∏£‡∏¥‡∏ö‡∏ó / ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</div>
                <div class="sec-content" id="contextContent">...</div>
            </div>
            <div class="footer-section" style="flex: 0.8;">
                <div class="sec-title">üîπ ‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡∏≠‡∏≤‡∏Ç‡∏¢‡∏≤‡∏ï (‡∏Ñ‡∏∏‡∏°‡∏û‡∏≤‡∏Å‡∏¢‡πå)</div>
                <div class="sec-content pali-word" id="akhyataContent">...</div>
            </div>
            <div class="footer-section" style="flex: 1;">
                <div class="sec-title">üî∏ ‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡∏Å‡∏¥‡∏ï‡∏Å‡πå / ‡∏ï ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢</div>
                <div class="sec-content pali-word" id="kitakaContent">...</div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button onclick="prevSlide()">‚ùÆ ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        <button onclick="resetHighlights()" style="background-color: #e57373;">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        <button onclick="nextSlide()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ùØ</button>
    </div>

    <script src="slides-data.js"></script>

    <script>
        const params = new URLSearchParams(window.location.search);
        const slideId = params.get('id');

        let slides = [];
        if (slideId && typeof slidesDatabase !== 'undefined' && slidesDatabase[slideId]) {
            slides = slidesDatabase[slideId];
        } else {
            slides = [{ pali: "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô", thai: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏´‡∏±‡∏™ (ID)", context: "-", akhyata: "-", kitaka: "-" }];
        }

        let currentIndex = 0;
        const mainContent = document.getElementById('mainContent');
        const contentArea = document.querySelector('.content-area');
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÜ (‡πÅ‡∏¢‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á)
        function wrapWords(text) {
            if (!text) return "";
            // ‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ <span>
            return text.split(' ').map(word => {
                if (word.trim() === "") return ""; // ‡∏Ç‡πâ‡∏≤‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤
                return `<span class="word-span" onclick="toggleHighlight(this)">${word}</span>`;
            }).join(' '); // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
        }

        function updateSlide() {
            mainContent.classList.remove('animate-content');
            void mainContent.offsetWidth; 
            mainContent.classList.add('animate-content');
            contentArea.scrollTop = 0;

            const s = slides[currentIndex];

            // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô wrapWords ‡∏Å‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ö‡∏≤‡∏•‡∏µ‡πÅ‡∏•‡∏∞‡πÑ‡∏ó‡∏¢
            document.getElementById('paliContent').innerHTML = wrapWords(s.pali);
            document.getElementById('thaiContent').innerHTML = wrapWords(s.thai);
            
            document.getElementById('contextContent').innerText = s.context;
            document.getElementById('akhyataContent').innerText = s.akhyata;
            document.getElementById('kitakaContent').innerText = s.kitaka;
            
            document.getElementById('pageNumber').innerText = `${currentIndex + 1} / ${slides.length}`;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥)
        window.toggleHighlight = function(element) {
            element.classList.toggle('translated');
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ (‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï)
        window.resetHighlights = function() {
            document.querySelectorAll('.word-span').forEach(el => el.classList.remove('translated'));
        }

        function nextSlide() {
            if (currentIndex < slides.length - 1) {
                currentIndex++;
                updateSlide();
            }
        }

        function prevSlide() {
            if (currentIndex > 0) {
                currentIndex--;
                updateSlide();
            }
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === "ArrowRight") nextSlide();
            if (event.key === "ArrowLeft") prevSlide();
        });

        updateSlide();
    </script>
</body>
</html>