[
    {
        "label": "json",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "json",
        "description": "json",
        "detail": "json",
        "documentation": {}
    },
    {
        "label": "re",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "re",
        "description": "re",
        "detail": "re",
        "documentation": {}
    },
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "sqlite3",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sqlite3",
        "description": "sqlite3",
        "detail": "sqlite3",
        "documentation": {}
    },
    {
        "label": "difflib",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "difflib",
        "description": "difflib",
        "detail": "difflib",
        "documentation": {}
    },
    {
        "label": "{",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "{",
        "description": "{",
        "detail": "{",
        "documentation": {}
    },
    {
        "label": "LoadingSpinner",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "LoadingSpinner",
        "description": "LoadingSpinner",
        "detail": "LoadingSpinner",
        "documentation": {}
    },
    {
        "label": "tananuntoRootKeys",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "tananuntoRootKeys",
        "description": "tananuntoRootKeys",
        "detail": "tananuntoRootKeys",
        "documentation": {}
    },
    {
        "label": "React,",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "React.",
        "description": "React.",
        "detail": "React.",
        "documentation": {}
    },
    {
        "label": "KathaRenderer",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "KathaRenderer",
        "description": "KathaRenderer",
        "detail": "KathaRenderer",
        "documentation": {}
    },
    {
        "label": "'./App.css';",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "'..App.css';",
        "description": "'..App.css';",
        "detail": "'..App.css';",
        "documentation": {}
    },
    {
        "label": "Header",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "Header",
        "description": "Header",
        "detail": "Header",
        "documentation": {}
    },
    {
        "label": "Footer",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "Footer",
        "description": "Footer",
        "detail": "Footer",
        "documentation": {}
    },
    {
        "label": "Login",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "Login",
        "description": "Login",
        "detail": "Login",
        "documentation": {}
    },
    {
        "label": "DhatuDetail",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "DhatuDetail",
        "description": "DhatuDetail",
        "detail": "DhatuDetail",
        "documentation": {}
    },
    {
        "label": "SearchPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "SearchPage",
        "description": "SearchPage",
        "detail": "SearchPage",
        "documentation": {}
    },
    {
        "label": "KathaListPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "KathaListPage",
        "description": "KathaListPage",
        "detail": "KathaListPage",
        "documentation": {}
    },
    {
        "label": "'react-toastify/dist/ReactToastify.css';",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "'react-toastify.dist.ReactToastify.css';",
        "description": "'react-toastify.dist.ReactToastify.css';",
        "detail": "'react-toastify.dist.ReactToastify.css';",
        "documentation": {}
    },
    {
        "label": "AdminLayout",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminLayout",
        "description": "AdminLayout",
        "detail": "AdminLayout",
        "documentation": {}
    },
    {
        "label": "AdminSubmissions",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminSubmissions",
        "description": "AdminSubmissions",
        "detail": "AdminSubmissions",
        "documentation": {}
    },
    {
        "label": "AdminDhatuManagement",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminDhatuManagement",
        "description": "AdminDhatuManagement",
        "detail": "AdminDhatuManagement",
        "documentation": {}
    },
    {
        "label": "AdminUserManagement",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminUserManagement",
        "description": "AdminUserManagement",
        "detail": "AdminUserManagement",
        "documentation": {}
    },
    {
        "label": "AdminAddDhatu",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminAddDhatu",
        "description": "AdminAddDhatu",
        "detail": "AdminAddDhatu",
        "documentation": {}
    },
    {
        "label": "AboutPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AboutPage",
        "description": "AboutPage",
        "detail": "AboutPage",
        "documentation": {}
    },
    {
        "label": "ContactPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "ContactPage",
        "description": "ContactPage",
        "detail": "ContactPage",
        "documentation": {}
    },
    {
        "label": "PrinciplesPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "PrinciplesPage",
        "description": "PrinciplesPage",
        "detail": "PrinciplesPage",
        "documentation": {}
    },
    {
        "label": "FlashcardsPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "FlashcardsPage",
        "description": "FlashcardsPage",
        "detail": "FlashcardsPage",
        "documentation": {}
    },
    {
        "label": "VerseDetailPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "VerseDetailPage",
        "description": "VerseDetailPage",
        "detail": "VerseDetailPage",
        "documentation": {}
    },
    {
        "label": "AllDhatusPage",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AllDhatusPage",
        "description": "AllDhatusPage",
        "detail": "AllDhatusPage",
        "documentation": {}
    },
    {
        "label": "AdminKathaManagement",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminKathaManagement",
        "description": "AdminKathaManagement",
        "detail": "AdminKathaManagement",
        "documentation": {}
    },
    {
        "label": "AdminAddKatha",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "AdminAddKatha",
        "description": "AdminAddKatha",
        "detail": "AdminAddKatha",
        "documentation": {}
    },
    {
        "label": "React",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "React",
        "description": "React",
        "detail": "React",
        "documentation": {}
    },
    {
        "label": "vocabRootsDPDDerived",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "vocabRootsDPDDerived",
        "description": "vocabRootsDPDDerived",
        "detail": "vocabRootsDPDDerived",
        "documentation": {}
    },
    {
        "label": "vocabDerivedMeanings",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "vocabDerivedMeanings",
        "description": "vocabDerivedMeanings",
        "detail": "vocabDerivedMeanings",
        "documentation": {}
    },
    {
        "label": "PaliScript",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "PaliScript",
        "description": "PaliScript",
        "detail": "PaliScript",
        "documentation": {}
    },
    {
        "label": "sys",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sys",
        "description": "sys",
        "detail": "sys",
        "documentation": {}
    },
    {
        "label": "roman_to_thai",
        "importPath": "extract_derived_meanings",
        "description": "extract_derived_meanings",
        "isExtraImport": true,
        "detail": "extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "requests",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "requests",
        "description": "requests",
        "detail": "requests",
        "documentation": {}
    },
    {
        "label": "shutil",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "shutil",
        "description": "shutil",
        "detail": "shutil",
        "documentation": {}
    },
    {
        "label": "time",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "time",
        "description": "time",
        "detail": "time",
        "documentation": {}
    },
    {
        "label": "BeautifulSoup",
        "importPath": "bs4",
        "description": "bs4",
        "isExtraImport": true,
        "detail": "bs4",
        "documentation": {}
    },
    {
        "label": "BeautifulSoup",
        "importPath": "bs4",
        "description": "bs4",
        "isExtraImport": true,
        "detail": "bs4",
        "documentation": {}
    },
    {
        "label": "BeautifulSoup",
        "importPath": "bs4",
        "description": "bs4",
        "isExtraImport": true,
        "detail": "bs4",
        "documentation": {}
    },
    {
        "label": "BeautifulSoup",
        "importPath": "bs4",
        "description": "bs4",
        "isExtraImport": true,
        "detail": "bs4",
        "documentation": {}
    },
    {
        "label": "BeautifulSoup",
        "importPath": "bs4",
        "description": "bs4",
        "isExtraImport": true,
        "detail": "bs4",
        "documentation": {}
    },
    {
        "label": "random",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "random",
        "description": "random",
        "detail": "random",
        "documentation": {}
    },
    {
        "label": "Image",
        "importPath": "PIL",
        "description": "PIL",
        "isExtraImport": true,
        "detail": "PIL",
        "documentation": {}
    },
    {
        "label": "ImageDraw",
        "importPath": "PIL",
        "description": "PIL",
        "isExtraImport": true,
        "detail": "PIL",
        "documentation": {}
    },
    {
        "label": "ImageFont",
        "importPath": "PIL",
        "description": "PIL",
        "isExtraImport": true,
        "detail": "PIL",
        "documentation": {}
    },
    {
        "label": "firebase_admin",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "firebase_admin",
        "description": "firebase_admin",
        "detail": "firebase_admin",
        "documentation": {}
    },
    {
        "label": "credentials",
        "importPath": "firebase_admin",
        "description": "firebase_admin",
        "isExtraImport": true,
        "detail": "firebase_admin",
        "documentation": {}
    },
    {
        "label": "firestore",
        "importPath": "firebase_admin",
        "description": "firebase_admin",
        "isExtraImport": true,
        "detail": "firebase_admin",
        "documentation": {}
    },
    {
        "label": "tananuntoVocabMap",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "tananuntoVocabMap",
        "description": "tananuntoVocabMap",
        "detail": "tananuntoVocabMap",
        "documentation": {}
    },
    {
        "label": "vocabRootsDpdDerivedEnriched",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "vocabRootsDpdDerivedEnriched",
        "description": "vocabRootsDpdDerivedEnriched",
        "detail": "vocabRootsDpdDerivedEnriched",
        "documentation": {}
    },
    {
        "label": "create_engine",
        "importPath": "sqlalchemy",
        "description": "sqlalchemy",
        "isExtraImport": true,
        "detail": "sqlalchemy",
        "documentation": {}
    },
    {
        "label": "sessionmaker",
        "importPath": "sqlalchemy.orm",
        "description": "sqlalchemy.orm",
        "isExtraImport": true,
        "detail": "sqlalchemy.orm",
        "documentation": {}
    },
    {
        "label": "DpdRoot",
        "importPath": "db.models",
        "description": "db.models",
        "isExtraImport": true,
        "detail": "db.models",
        "documentation": {}
    },
    {
        "label": "urllib.request",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "urllib.request",
        "description": "urllib.request",
        "detail": "urllib.request",
        "documentation": {}
    },
    {
        "label": "urllib.error",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "urllib.error",
        "description": "urllib.error",
        "detail": "urllib.error",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.analyze_dpd_structure",
        "description": "scripts.analyze_dpd_structure",
        "peekOfCode": "def load_js_object(path, var_name):\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n            # Basic stripping of JS syntax\n            content = content.replace(f\"const {var_name} = \", \"\")\n            content = re.sub(r'export default .*', '', content)\n            content = content.strip().rstrip(\";\")\n            # Remove trailing commas (simple regex approach)\n            content = re.sub(r',(\\s*[}\\]])', r'\\1', content)",
        "detail": "scripts.analyze_dpd_structure",
        "documentation": {}
    },
    {
        "label": "extract_construction",
        "kind": 2,
        "importPath": "scripts.analyze_dpd_structure",
        "description": "scripts.analyze_dpd_structure",
        "peekOfCode": "def extract_construction(defn):\n    match = re.search(r'\\[(.*?)\\]', defn)\n    if match:\n        return match.group(0)\n    return None\ndef extract_stem_from_construction(const):\n    # e.g. [karo + ti] -> karo\n    # e.g. [aggha + ti] -> aggha\n    if not const: return None\n    clean = const.strip(\"[]\")",
        "detail": "scripts.analyze_dpd_structure",
        "documentation": {}
    },
    {
        "label": "extract_stem_from_construction",
        "kind": 2,
        "importPath": "scripts.analyze_dpd_structure",
        "description": "scripts.analyze_dpd_structure",
        "peekOfCode": "def extract_stem_from_construction(const):\n    # e.g. [karo + ti] -> karo\n    # e.g. [aggha + ti] -> aggha\n    if not const: return None\n    clean = const.strip(\"[]\")\n    parts = clean.split(\"+\")\n    # Heuristic: The part before the final 'ti' (or similar ending) is the base/stem\n    # Or, if it's \"root + affix + ending\", we want \"root + affix\"\n    # Common endings to ignore for stem extraction\n    endings = [\"ti\", \"nti\", \"si\", \"tha\", \"mi\", \"ma\", \"te\", \"ante\", \"se\", \"vhe\", \"e\", \"mhase\"]",
        "detail": "scripts.analyze_dpd_structure",
        "documentation": {}
    },
    {
        "label": "analyze",
        "kind": 2,
        "importPath": "scripts.analyze_dpd_structure",
        "description": "scripts.analyze_dpd_structure",
        "peekOfCode": "def analyze():\n    print(\"Loading data...\")\n    vocab_dpd = load_js_object(r\"d:\\pali-theonlyone\\data\\vocab-dpd.js\", \"vocabDPD\")\n    roots_dpd = load_js_object(r\"d:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js\", \"vocabRootsDpdDerived\")\n    print(\"Inverting root map...\")\n    word_to_root = {}\n    for root, words in roots_dpd.items():\n        for word in words:\n            # Handle potential duplicates (one word multiple roots?) - Just overwrite for now\n            word_to_root[word] = root",
        "detail": "scripts.analyze_dpd_structure",
        "documentation": {}
    },
    {
        "label": "search_page_path",
        "kind": 5,
        "importPath": "scripts.apply_fixes_v3",
        "description": "scripts.apply_fixes_v3",
        "peekOfCode": "search_page_path = \"D:/pali-dhatu-app/src/pages/SearchPage.js\"\napp_css_path = \"D:/pali-dhatu-app/src/App.css\"\nverse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\n# 1. Update SearchPage.js\ntry:\n    with open(search_page_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Remove (Affix Group)\n    content = content.replace(\"หมวดธาตุ (Affix Group)\", \"หมวดธาตุ\")\n    # Move search-results-info",
        "detail": "scripts.apply_fixes_v3",
        "documentation": {}
    },
    {
        "label": "app_css_path",
        "kind": 5,
        "importPath": "scripts.apply_fixes_v3",
        "description": "scripts.apply_fixes_v3",
        "peekOfCode": "app_css_path = \"D:/pali-dhatu-app/src/App.css\"\nverse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\n# 1. Update SearchPage.js\ntry:\n    with open(search_page_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Remove (Affix Group)\n    content = content.replace(\"หมวดธาตุ (Affix Group)\", \"หมวดธาตุ\")\n    # Move search-results-info\n    # We look for the closing of search-hero and the info block following it",
        "detail": "scripts.apply_fixes_v3",
        "documentation": {}
    },
    {
        "label": "verse_detail_path",
        "kind": 5,
        "importPath": "scripts.apply_fixes_v3",
        "description": "scripts.apply_fixes_v3",
        "peekOfCode": "verse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\n# 1. Update SearchPage.js\ntry:\n    with open(search_page_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Remove (Affix Group)\n    content = content.replace(\"หมวดธาตุ (Affix Group)\", \"หมวดธาตุ\")\n    # Move search-results-info\n    # We look for the closing of search-hero and the info block following it\n    search_hero_end_pattern = \"\"\"                </div>",
        "detail": "scripts.apply_fixes_v3",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.check_dpd_headwords_roots",
        "description": "scripts.check_dpd_headwords_roots",
        "peekOfCode": "def main():\n    if not os.path.exists(DB_PATH):\n        print(f\"DB not found at {DB_PATH}\")\n        return\n    conn = sqlite3.connect(DB_PATH)\n    c = conn.cursor()\n    words_to_check = [\n        \"hiṃsati\", \"mukha\", \"vaṇij\", \"valañjeti\", \"valañja\", \"lāha\", \"acchati\", \"acchāti\"\n    ]\n    print(\"Checking headwords for root info...\")",
        "detail": "scripts.check_dpd_headwords_roots",
        "documentation": {}
    },
    {
        "label": "DB_PATH",
        "kind": 5,
        "importPath": "scripts.check_dpd_headwords_roots",
        "description": "scripts.check_dpd_headwords_roots",
        "peekOfCode": "DB_PATH = r\"d:\\pali-theonlyone\\data\\dpd-db-repo\\dpd.db\"\ndef main():\n    if not os.path.exists(DB_PATH):\n        print(f\"DB not found at {DB_PATH}\")\n        return\n    conn = sqlite3.connect(DB_PATH)\n    c = conn.cursor()\n    words_to_check = [\n        \"hiṃsati\", \"mukha\", \"vaṇij\", \"valañjeti\", \"valañja\", \"lāha\", \"acchati\", \"acchāti\"\n    ]",
        "detail": "scripts.check_dpd_headwords_roots",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.check_dpd_keys",
        "description": "scripts.check_dpd_keys",
        "peekOfCode": "def load_js_object(path):\n    with open(path, \"r\", encoding=\"utf-8\") as f:\n        content = f.read()\n    # Strip JS parts\n    import re\n    content = re.sub(r'export default .*', '', content)\n    content = re.sub(r'const \\w+ = ', '', content)\n    content = content.strip().rstrip(\";\")\n    return json.loads(content)\ndef main():",
        "detail": "scripts.check_dpd_keys",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.check_dpd_keys",
        "description": "scripts.check_dpd_keys",
        "peekOfCode": "def main():\n    try:\n        data = load_js_object(FILE_PATH)\n        keys = list(data.keys())\n        print(f\"Total keys: {len(keys)}\")\n        print(\"First 20 keys:\", keys[:20])\n        # Check specific roots\n        check_list = [\"ji\", \"jī\", \"bhu\", \"bhū\", \"ni\", \"nī\", \"gam\", \"gamu\", \"kar\", \"kara\"]\n        for k in check_list:\n            if k in data:",
        "detail": "scripts.check_dpd_keys",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.check_dpd_keys",
        "description": "scripts.check_dpd_keys",
        "peekOfCode": "FILE_PATH = r\"d:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived-enriched.js\"\ndef load_js_object(path):\n    with open(path, \"r\", encoding=\"utf-8\") as f:\n        content = f.read()\n    # Strip JS parts\n    import re\n    content = re.sub(r'export default .*', '', content)\n    content = re.sub(r'const \\w+ = ', '', content)\n    content = content.strip().rstrip(\";\")\n    return json.loads(content)",
        "detail": "scripts.check_dpd_keys",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.check_dpd_roots_really_specific",
        "description": "scripts.check_dpd_roots_really_specific",
        "peekOfCode": "def main():\n    if not os.path.exists(DB_PATH):\n        print(f\"DB not found at {DB_PATH}\")\n        return\n    conn = sqlite3.connect(DB_PATH)\n    c = conn.cursor()\n    print(\"VERSION: NEW_FILE_NAME\")\n    print(\"Searching for roots matching 'hiṃs' or 'mukh' in dpd_roots...\")\n    try:\n        c.execute(\"SELECT root, root_meaning, dhatupatha_pali FROM dpd_roots WHERE root LIKE '%hiṃs%' OR root LIKE '%mukh%'\")",
        "detail": "scripts.check_dpd_roots_really_specific",
        "documentation": {}
    },
    {
        "label": "DB_PATH",
        "kind": 5,
        "importPath": "scripts.check_dpd_roots_really_specific",
        "description": "scripts.check_dpd_roots_really_specific",
        "peekOfCode": "DB_PATH = r\"d:\\pali-theonlyone\\data\\dpd-db-repo\\dpd.db\"\ndef main():\n    if not os.path.exists(DB_PATH):\n        print(f\"DB not found at {DB_PATH}\")\n        return\n    conn = sqlite3.connect(DB_PATH)\n    c = conn.cursor()\n    print(\"VERSION: NEW_FILE_NAME\")\n    print(\"Searching for roots matching 'hiṃs' or 'mukh' in dpd_roots...\")\n    try:",
        "detail": "scripts.check_dpd_roots_really_specific",
        "documentation": {}
    },
    {
        "label": "path",
        "kind": 5,
        "importPath": "scripts.check_map_keys",
        "description": "scripts.check_map_keys",
        "peekOfCode": "path = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\nwith open(path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Naive parse since it's \"const x = {...}\"\nstart = content.find('{')\nend = content.rfind('}')\njson_str = content[start:end+1]\n# It might be valid JSON if keys are quoted.\ntry:\n    data = json.loads(json_str)",
        "detail": "scripts.check_map_keys",
        "documentation": {}
    },
    {
        "label": "start",
        "kind": 5,
        "importPath": "scripts.check_map_keys",
        "description": "scripts.check_map_keys",
        "peekOfCode": "start = content.find('{')\nend = content.rfind('}')\njson_str = content[start:end+1]\n# It might be valid JSON if keys are quoted.\ntry:\n    data = json.loads(json_str)\n    print(f\"Key count: {len(data)}\")\nexcept:\n    print(\"JSON load failed, counting keys via regex\")\n    keys = re.findall(r'\"([^\"]+)\":\\s*\\[', json_str)",
        "detail": "scripts.check_map_keys",
        "documentation": {}
    },
    {
        "label": "end",
        "kind": 5,
        "importPath": "scripts.check_map_keys",
        "description": "scripts.check_map_keys",
        "peekOfCode": "end = content.rfind('}')\njson_str = content[start:end+1]\n# It might be valid JSON if keys are quoted.\ntry:\n    data = json.loads(json_str)\n    print(f\"Key count: {len(data)}\")\nexcept:\n    print(\"JSON load failed, counting keys via regex\")\n    keys = re.findall(r'\"([^\"]+)\":\\s*\\[', json_str)\n    print(f\"Key count (regex): {len(keys)}\")",
        "detail": "scripts.check_map_keys",
        "documentation": {}
    },
    {
        "label": "json_str",
        "kind": 5,
        "importPath": "scripts.check_map_keys",
        "description": "scripts.check_map_keys",
        "peekOfCode": "json_str = content[start:end+1]\n# It might be valid JSON if keys are quoted.\ntry:\n    data = json.loads(json_str)\n    print(f\"Key count: {len(data)}\")\nexcept:\n    print(\"JSON load failed, counting keys via regex\")\n    keys = re.findall(r'\"([^\"]+)\":\\s*\\[', json_str)\n    print(f\"Key count (regex): {len(keys)}\")",
        "detail": "scripts.check_map_keys",
        "documentation": {}
    },
    {
        "label": "thai_to_roman",
        "kind": 2,
        "importPath": "scripts.check_root_matches",
        "description": "scripts.check_root_matches",
        "peekOfCode": "def thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',\n        'ต': 't', 'ถ': 'th', 'ท': 'd', 'ธ': 'dh', 'น': 'n',",
        "detail": "scripts.check_root_matches",
        "documentation": {}
    },
    {
        "label": "keys",
        "kind": 5,
        "importPath": "scripts.check_root_matches",
        "description": "scripts.check_root_matches",
        "peekOfCode": "keys = re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content)\n# Load vocab-roots-dpd-derived.js\nwith open(r\"d:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js\", \"r\", encoding=\"utf-8\") as f:\n    dpd_content = f.read()\n# Extract keys from DPD\ndpd_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', dpd_content))\n# Thai to Roman (Simplified Python version of the JS logic)\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text",
        "detail": "scripts.check_root_matches",
        "documentation": {}
    },
    {
        "label": "dpd_keys",
        "kind": 5,
        "importPath": "scripts.check_root_matches",
        "description": "scripts.check_root_matches",
        "peekOfCode": "dpd_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', dpd_content))\n# Thai to Roman (Simplified Python version of the JS logic)\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',",
        "detail": "scripts.check_root_matches",
        "documentation": {}
    },
    {
        "label": "matches",
        "kind": 5,
        "importPath": "scripts.check_root_matches",
        "description": "scripts.check_root_matches",
        "peekOfCode": "matches = 0\ntotal = 0\nmismatches = []\nfor k in keys:\n    total += 1\n    roman = thai_to_roman(k)\n    if roman in dpd_keys:\n        matches += 1\n    else:\n        mismatches.append(f\"{k} -> {roman}\")",
        "detail": "scripts.check_root_matches",
        "documentation": {}
    },
    {
        "label": "total",
        "kind": 5,
        "importPath": "scripts.check_root_matches",
        "description": "scripts.check_root_matches",
        "peekOfCode": "total = 0\nmismatches = []\nfor k in keys:\n    total += 1\n    roman = thai_to_roman(k)\n    if roman in dpd_keys:\n        matches += 1\n    else:\n        mismatches.append(f\"{k} -> {roman}\")\nprint(f\"Total Roots in DB: {total}\")",
        "detail": "scripts.check_root_matches",
        "documentation": {}
    },
    {
        "label": "mismatches",
        "kind": 5,
        "importPath": "scripts.check_root_matches",
        "description": "scripts.check_root_matches",
        "peekOfCode": "mismatches = []\nfor k in keys:\n    total += 1\n    roman = thai_to_roman(k)\n    if roman in dpd_keys:\n        matches += 1\n    else:\n        mismatches.append(f\"{k} -> {roman}\")\nprint(f\"Total Roots in DB: {total}\")\nprint(f\"Matches in DPD: {matches}\")",
        "detail": "scripts.check_root_matches",
        "documentation": {}
    },
    {
        "label": "thai_to_roman",
        "kind": 2,
        "importPath": "scripts.check_root_matches_v2",
        "description": "scripts.check_root_matches_v2",
        "peekOfCode": "def thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',\n        'ต': 't', 'ถ': 'th', 'ท': 'd', 'ธ': 'dh', 'น': 'n',",
        "detail": "scripts.check_root_matches_v2",
        "documentation": {}
    },
    {
        "label": "keys",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v2",
        "description": "scripts.check_root_matches_v2",
        "peekOfCode": "keys = re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content)\n# Load vocab-roots-dpd-derived.js\nwith open(r\"d:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js\", \"r\", encoding=\"utf-8\") as f:\n    dpd_content = f.read()\ndpd_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', dpd_content))\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)",
        "detail": "scripts.check_root_matches_v2",
        "documentation": {}
    },
    {
        "label": "dpd_keys",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v2",
        "description": "scripts.check_root_matches_v2",
        "peekOfCode": "dpd_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', dpd_content))\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',",
        "detail": "scripts.check_root_matches_v2",
        "documentation": {}
    },
    {
        "label": "matches",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v2",
        "description": "scripts.check_root_matches_v2",
        "peekOfCode": "matches = 0\ntotal = 0\nmismatches = []\nfor k in keys:\n    total += 1\n    roman = thai_to_roman(k)\n    roman_stripped = roman[:-1] if roman.endswith('a') else roman\n    if roman in dpd_keys:\n        matches += 1\n    elif roman_stripped in dpd_keys:",
        "detail": "scripts.check_root_matches_v2",
        "documentation": {}
    },
    {
        "label": "total",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v2",
        "description": "scripts.check_root_matches_v2",
        "peekOfCode": "total = 0\nmismatches = []\nfor k in keys:\n    total += 1\n    roman = thai_to_roman(k)\n    roman_stripped = roman[:-1] if roman.endswith('a') else roman\n    if roman in dpd_keys:\n        matches += 1\n    elif roman_stripped in dpd_keys:\n        matches += 1",
        "detail": "scripts.check_root_matches_v2",
        "documentation": {}
    },
    {
        "label": "mismatches",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v2",
        "description": "scripts.check_root_matches_v2",
        "peekOfCode": "mismatches = []\nfor k in keys:\n    total += 1\n    roman = thai_to_roman(k)\n    roman_stripped = roman[:-1] if roman.endswith('a') else roman\n    if roman in dpd_keys:\n        matches += 1\n    elif roman_stripped in dpd_keys:\n        matches += 1\n    else:",
        "detail": "scripts.check_root_matches_v2",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.check_root_matches_v3",
        "description": "scripts.check_root_matches_v3",
        "peekOfCode": "def main():\n    # 1. Load available roots\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Extract Tananunto roots\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    entries = re.findall(r'\"((?:[^\"\\\\]|\\\\.)+)\":\\s*\"((?:[^\"\\\\]|\\\\.)+)\"', content)",
        "detail": "scripts.check_root_matches_v3",
        "documentation": {}
    },
    {
        "label": "ROOTS_PATH",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v3",
        "description": "scripts.check_root_matches_v3",
        "peekOfCode": "ROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nTANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\ndef main():\n    # 1. Load available roots\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Extract Tananunto roots\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:",
        "detail": "scripts.check_root_matches_v3",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v3",
        "description": "scripts.check_root_matches_v3",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\ndef main():\n    # 1. Load available roots\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Extract Tananunto roots\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()",
        "detail": "scripts.check_root_matches_v3",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.check_root_matches_v4",
        "description": "scripts.check_root_matches_v4",
        "peekOfCode": "def main():\n    # 1. Load available roots\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Extract Tananunto roots\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    entries = re.findall(r'\"((?:[^\"\\\\]|\\\\.)+)\":\\s*\"((?:[^\"\\\\]|\\\\.)+)\"', content)",
        "detail": "scripts.check_root_matches_v4",
        "documentation": {}
    },
    {
        "label": "ROOTS_PATH",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v4",
        "description": "scripts.check_root_matches_v4",
        "peekOfCode": "ROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nTANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\ndef main():\n    # 1. Load available roots\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Extract Tananunto roots\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:",
        "detail": "scripts.check_root_matches_v4",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.check_root_matches_v4",
        "description": "scripts.check_root_matches_v4",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\ndef main():\n    # 1. Load available roots\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Extract Tananunto roots\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()",
        "detail": "scripts.check_root_matches_v4",
        "documentation": {}
    },
    {
        "label": "total_entries",
        "kind": 5,
        "importPath": "scripts.check_stats",
        "description": "scripts.check_stats",
        "peekOfCode": "total_entries = sum(len(entries) for entries in data.values())\nunique_roots = len(data)\nprint(f\"Unique Roots: {unique_roots}\")\nprint(f\"Total Entries: {total_entries}\")",
        "detail": "scripts.check_stats",
        "documentation": {}
    },
    {
        "label": "unique_roots",
        "kind": 5,
        "importPath": "scripts.check_stats",
        "description": "scripts.check_stats",
        "peekOfCode": "unique_roots = len(data)\nprint(f\"Unique Roots: {unique_roots}\")\nprint(f\"Total Entries: {total_entries}\")",
        "detail": "scripts.check_stats",
        "documentation": {}
    },
    {
        "label": "read_file",
        "kind": 2,
        "importPath": "scripts.clarify_comment",
        "description": "scripts.clarify_comment",
        "peekOfCode": "def read_file(path):\n    with open(path, \"r\", encoding=\"utf-8\") as f:\n        return f.read()\ndef write_file(path, content):\n    with open(path, \"w\", encoding=\"utf-8\") as f:\n        f.write(content)\ndef main():\n    content = read_file(FILE_PATH)\n    # Simple comment update to clarify source of data\n    old_comment = \"const group = dhatu.mawat_dhatu; // e.g. \\\"ภู (อ)\\\"\"",
        "detail": "scripts.clarify_comment",
        "documentation": {}
    },
    {
        "label": "write_file",
        "kind": 2,
        "importPath": "scripts.clarify_comment",
        "description": "scripts.clarify_comment",
        "peekOfCode": "def write_file(path, content):\n    with open(path, \"w\", encoding=\"utf-8\") as f:\n        f.write(content)\ndef main():\n    content = read_file(FILE_PATH)\n    # Simple comment update to clarify source of data\n    old_comment = \"const group = dhatu.mawat_dhatu; // e.g. \\\"ภู (อ)\\\"\"\n    new_comment = \"const group = dhatu.mawat_dhatu; // Check against Our Root Dictionary (Palidict) Group\"\n    if old_comment in content:\n        content = content.replace(old_comment, new_comment)",
        "detail": "scripts.clarify_comment",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.clarify_comment",
        "description": "scripts.clarify_comment",
        "peekOfCode": "def main():\n    content = read_file(FILE_PATH)\n    # Simple comment update to clarify source of data\n    old_comment = \"const group = dhatu.mawat_dhatu; // e.g. \\\"ภู (อ)\\\"\"\n    new_comment = \"const group = dhatu.mawat_dhatu; // Check against Our Root Dictionary (Palidict) Group\"\n    if old_comment in content:\n        content = content.replace(old_comment, new_comment)\n        print(\"Updated comment in TananuntoRootsPage.js\")\n    else:\n        print(\"Could not find the comment to update\")",
        "detail": "scripts.clarify_comment",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.clarify_comment",
        "description": "scripts.clarify_comment",
        "peekOfCode": "FILE_PATH = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\ndef read_file(path):\n    with open(path, \"r\", encoding=\"utf-8\") as f:\n        return f.read()\ndef write_file(path, content):\n    with open(path, \"w\", encoding=\"utf-8\") as f:\n        f.write(content)\ndef main():\n    content = read_file(FILE_PATH)\n    # Simple comment update to clarify source of data",
        "detail": "scripts.clarify_comment",
        "documentation": {}
    },
    {
        "label": "cleanup_file",
        "kind": 2,
        "importPath": "scripts.cleanup_tananunto_page",
        "description": "scripts.cleanup_tananunto_page",
        "peekOfCode": "def cleanup_file():\n    if not os.path.exists(file_path):\n        print(f\"File not found: {file_path}\")\n        return\n    with open(file_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # 1. Fix duplicated dpdList logic at lines 264-265 (approx)\n    # The duplicate:\n    # let dpdList = showDpd ? getDpdVocab(rootWord) : [];\n    # let dpdList = showDpd ? getDpdVocab(rootWord) : [];",
        "detail": "scripts.cleanup_tananunto_page",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.cleanup_tananunto_page",
        "description": "scripts.cleanup_tananunto_page",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\ndef cleanup_file():\n    if not os.path.exists(file_path):\n        print(f\"File not found: {file_path}\")\n        return\n    with open(file_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # 1. Fix duplicated dpdList logic at lines 264-265 (approx)\n    # The duplicate:\n    # let dpdList = showDpd ? getDpdVocab(rootWord) : [];",
        "detail": "scripts.cleanup_tananunto_page",
        "documentation": {}
    },
    {
        "label": "roman_to_thai",
        "kind": 2,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "def roman_to_thai(text):\n    if not text: return \"\"\n    map_char = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',\n        'p': 'ป', 'ph': 'ผ', 'b': 'พ', 'bh': 'ภ', 'm': 'ม',\n        'y': 'ย', 'r': 'ร', 'l': 'ล', 'v': 'ว', 's': 'ส', 'h': 'ห', 'ḷ': 'ฬ',\n        'a': '', 'ā': 'า', 'i': 'ิ', 'ī': 'ี', 'u': 'ุ', 'ū': 'ู', ",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "def load_js_object(path):\n    print(f\"Loading {path}...\")\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n            # Regex to capture the object content: const x = { ... };\n            # We assume it starts with \"const ... = {\" and ends with \"};\" or similar.\n            match = re.search(r'=\\s*(\\{[\\s\\S]*\\});?', content)\n            if match:\n                json_str = match.group(1)",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "def main():\n    # 1. Load Dictionaries\n    dicts = {}\n    for name, path in FILES.items():\n        if os.path.exists(path):\n            dicts[name] = load_js_object(path)\n            print(f\"Loaded {name}: {len(dicts[name])} entries\")\n        else:\n            print(f\"File not found: {path}\")\n    # 2. Load DPD Derived List",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "DATA_DIR",
        "kind": 5,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "DATA_DIR = r'd:\\pali-theonlyone\\data'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-derived-meanings.js'\nFILES = {\n    'Etipitaka': os.path.join(DATA_DIR, 'vocab-etipitaka.js'),\n    'พจนานุกรมธรรมบทภาค ๑-๘': os.path.join(DATA_DIR, 'vocab-tananunto.js'),\n    'NewGen': os.path.join(DATA_DIR, 'vocab-newgen.js')\n}\nDPD_DERIVED_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js'\n# Roman to Thai Mapping (simplified for Python)\n# We can reuse the logic from existing scripts or just implement the basics needed for Pali",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "OUTPUT_PATH",
        "kind": 5,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "OUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-derived-meanings.js'\nFILES = {\n    'Etipitaka': os.path.join(DATA_DIR, 'vocab-etipitaka.js'),\n    'พจนานุกรมธรรมบทภาค ๑-๘': os.path.join(DATA_DIR, 'vocab-tananunto.js'),\n    'NewGen': os.path.join(DATA_DIR, 'vocab-newgen.js')\n}\nDPD_DERIVED_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js'\n# Roman to Thai Mapping (simplified for Python)\n# We can reuse the logic from existing scripts or just implement the basics needed for Pali\ndef roman_to_thai(text):",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "FILES",
        "kind": 5,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "FILES = {\n    'Etipitaka': os.path.join(DATA_DIR, 'vocab-etipitaka.js'),\n    'พจนานุกรมธรรมบทภาค ๑-๘': os.path.join(DATA_DIR, 'vocab-tananunto.js'),\n    'NewGen': os.path.join(DATA_DIR, 'vocab-newgen.js')\n}\nDPD_DERIVED_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js'\n# Roman to Thai Mapping (simplified for Python)\n# We can reuse the logic from existing scripts or just implement the basics needed for Pali\ndef roman_to_thai(text):\n    if not text: return \"\"",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "DPD_DERIVED_PATH",
        "kind": 5,
        "importPath": "scripts.combine_vocab_full",
        "description": "scripts.combine_vocab_full",
        "peekOfCode": "DPD_DERIVED_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js'\n# Roman to Thai Mapping (simplified for Python)\n# We can reuse the logic from existing scripts or just implement the basics needed for Pali\ndef roman_to_thai(text):\n    if not text: return \"\"\n    map_char = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',",
        "detail": "scripts.combine_vocab_full",
        "documentation": {}
    },
    {
        "label": "input_file",
        "kind": 5,
        "importPath": "scripts.convert_detailed_roots",
        "description": "scripts.convert_detailed_roots",
        "peekOfCode": "input_file = \"data/vocab-roots-detailed.json\"\noutput_file = \"data/vocab-roots.js\"\nwith open(input_file, \"r\", encoding=\"utf-8\") as f:\n    data = json.load(f)\nprint(f\"Loaded {len(data)} roots.\")\n# Transform to JS object string\njs_content = \"const vocabRoots = \" + json.dumps(data, ensure_ascii=False, indent=2) + \";\"\nwith open(output_file, \"w\", encoding=\"utf-8\") as f:\n    f.write(js_content)\nprint(f\"Saved to {output_file}\")",
        "detail": "scripts.convert_detailed_roots",
        "documentation": {}
    },
    {
        "label": "output_file",
        "kind": 5,
        "importPath": "scripts.convert_detailed_roots",
        "description": "scripts.convert_detailed_roots",
        "peekOfCode": "output_file = \"data/vocab-roots.js\"\nwith open(input_file, \"r\", encoding=\"utf-8\") as f:\n    data = json.load(f)\nprint(f\"Loaded {len(data)} roots.\")\n# Transform to JS object string\njs_content = \"const vocabRoots = \" + json.dumps(data, ensure_ascii=False, indent=2) + \";\"\nwith open(output_file, \"w\", encoding=\"utf-8\") as f:\n    f.write(js_content)\nprint(f\"Saved to {output_file}\")",
        "detail": "scripts.convert_detailed_roots",
        "documentation": {}
    },
    {
        "label": "js_content",
        "kind": 5,
        "importPath": "scripts.convert_detailed_roots",
        "description": "scripts.convert_detailed_roots",
        "peekOfCode": "js_content = \"const vocabRoots = \" + json.dumps(data, ensure_ascii=False, indent=2) + \";\"\nwith open(output_file, \"w\", encoding=\"utf-8\") as f:\n    f.write(js_content)\nprint(f\"Saved to {output_file}\")",
        "detail": "scripts.convert_detailed_roots",
        "documentation": {}
    },
    {
        "label": "convert_db_to_js",
        "kind": 2,
        "importPath": "scripts.convert_newgen_db",
        "description": "scripts.convert_newgen_db",
        "peekOfCode": "def convert_db_to_js():\n    print(f\"Connecting to database: {db_path}\")\n    conn = sqlite3.connect(db_path)\n    cursor = conn.cursor()\n    # Get total count\n    cursor.execute(\"SELECT COUNT(*) FROM palithaiNewGen\")\n    count = cursor.fetchone()[0]\n    print(f\"Total records found: {count}\")\n    # Fetch data\n    cursor.execute(\"SELECT Paliword, content FROM palithaiNewGen\")",
        "detail": "scripts.convert_newgen_db",
        "documentation": {}
    },
    {
        "label": "db_path",
        "kind": 5,
        "importPath": "scripts.convert_newgen_db",
        "description": "scripts.convert_newgen_db",
        "peekOfCode": "db_path = r'd:\\pali-theonlyone\\data\\DB\\palitothai_newgen.db'\noutput_path = r'd:\\pali-theonlyone\\data\\vocab-newgen.js'\ndef convert_db_to_js():\n    print(f\"Connecting to database: {db_path}\")\n    conn = sqlite3.connect(db_path)\n    cursor = conn.cursor()\n    # Get total count\n    cursor.execute(\"SELECT COUNT(*) FROM palithaiNewGen\")\n    count = cursor.fetchone()[0]\n    print(f\"Total records found: {count}\")",
        "detail": "scripts.convert_newgen_db",
        "documentation": {}
    },
    {
        "label": "output_path",
        "kind": 5,
        "importPath": "scripts.convert_newgen_db",
        "description": "scripts.convert_newgen_db",
        "peekOfCode": "output_path = r'd:\\pali-theonlyone\\data\\vocab-newgen.js'\ndef convert_db_to_js():\n    print(f\"Connecting to database: {db_path}\")\n    conn = sqlite3.connect(db_path)\n    cursor = conn.cursor()\n    # Get total count\n    cursor.execute(\"SELECT COUNT(*) FROM palithaiNewGen\")\n    count = cursor.fetchone()[0]\n    print(f\"Total records found: {count}\")\n    # Fetch data",
        "detail": "scripts.convert_newgen_db",
        "documentation": {}
    },
    {
        "label": "process_and_copy",
        "kind": 2,
        "importPath": "scripts.copy_vocab_data",
        "description": "scripts.copy_vocab_data",
        "peekOfCode": "def process_and_copy(source, dest, type):\n    try:\n        with open(source, 'r', encoding='utf-8') as f:\n            content = f.read()\n        if type == \"vocab\":\n            # Change \"const vocabRootsDPDDerived =\" to \"const vocabRootsDPDDerived =\" and add export\n            if \"export default\" not in content:\n                content += \"\\n\\nexport default vocabRootsDPDDerived;\"\n        elif type == \"script\":\n            # Change \"const PaliScript =\" to \"const PaliScript =\" and add export",
        "detail": "scripts.copy_vocab_data",
        "documentation": {}
    },
    {
        "label": "source_vocab",
        "kind": 5,
        "importPath": "scripts.copy_vocab_data",
        "description": "scripts.copy_vocab_data",
        "peekOfCode": "source_vocab = r\"d:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js\"\ndest_vocab = r\"d:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js\"\nsource_script = r\"d:\\pali-theonlyone\\data\\pali-script.js\"\ndest_script = r\"d:\\pali-dhatu-app\\src\\utils\\paliScript.js\"\ndef process_and_copy(source, dest, type):\n    try:\n        with open(source, 'r', encoding='utf-8') as f:\n            content = f.read()\n        if type == \"vocab\":\n            # Change \"const vocabRootsDPDDerived =\" to \"const vocabRootsDPDDerived =\" and add export",
        "detail": "scripts.copy_vocab_data",
        "documentation": {}
    },
    {
        "label": "dest_vocab",
        "kind": 5,
        "importPath": "scripts.copy_vocab_data",
        "description": "scripts.copy_vocab_data",
        "peekOfCode": "dest_vocab = r\"d:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js\"\nsource_script = r\"d:\\pali-theonlyone\\data\\pali-script.js\"\ndest_script = r\"d:\\pali-dhatu-app\\src\\utils\\paliScript.js\"\ndef process_and_copy(source, dest, type):\n    try:\n        with open(source, 'r', encoding='utf-8') as f:\n            content = f.read()\n        if type == \"vocab\":\n            # Change \"const vocabRootsDPDDerived =\" to \"const vocabRootsDPDDerived =\" and add export\n            if \"export default\" not in content:",
        "detail": "scripts.copy_vocab_data",
        "documentation": {}
    },
    {
        "label": "source_script",
        "kind": 5,
        "importPath": "scripts.copy_vocab_data",
        "description": "scripts.copy_vocab_data",
        "peekOfCode": "source_script = r\"d:\\pali-theonlyone\\data\\pali-script.js\"\ndest_script = r\"d:\\pali-dhatu-app\\src\\utils\\paliScript.js\"\ndef process_and_copy(source, dest, type):\n    try:\n        with open(source, 'r', encoding='utf-8') as f:\n            content = f.read()\n        if type == \"vocab\":\n            # Change \"const vocabRootsDPDDerived =\" to \"const vocabRootsDPDDerived =\" and add export\n            if \"export default\" not in content:\n                content += \"\\n\\nexport default vocabRootsDPDDerived;\"",
        "detail": "scripts.copy_vocab_data",
        "documentation": {}
    },
    {
        "label": "dest_script",
        "kind": 5,
        "importPath": "scripts.copy_vocab_data",
        "description": "scripts.copy_vocab_data",
        "peekOfCode": "dest_script = r\"d:\\pali-dhatu-app\\src\\utils\\paliScript.js\"\ndef process_and_copy(source, dest, type):\n    try:\n        with open(source, 'r', encoding='utf-8') as f:\n            content = f.read()\n        if type == \"vocab\":\n            # Change \"const vocabRootsDPDDerived =\" to \"const vocabRootsDPDDerived =\" and add export\n            if \"export default\" not in content:\n                content += \"\\n\\nexport default vocabRootsDPDDerived;\"\n        elif type == \"script\":",
        "detail": "scripts.copy_vocab_data",
        "documentation": {}
    },
    {
        "label": "update_app_js",
        "kind": 2,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "def update_app_js():\n    print(f\"Updating {APP_JS_PATH}...\")\n    with open(APP_JS_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # 1. Add Import\n    if \"import TananuntoRootsPage\" not in content:\n        content = content.replace(\"import VocabSearchPage from './pages/VocabSearchPage';\", \n                                  \"import VocabSearchPage from './pages/VocabSearchPage';\\nimport TananuntoRootsPage from './pages/TananuntoRootsPage';\")\n    # 2. Add Route\n    if 'path=\"/tananunto-roots\"' not in content:",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "update_search_page",
        "kind": 2,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "def update_search_page():\n    print(f\"Updating {SEARCH_PAGE_PATH}...\")\n    with open(SEARCH_PAGE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Add link button\n    if \"/tananunto-roots\" not in content:\n        # Find the link to search-vocab and add another one\n        search_str = '</Link>'\n        replacement = \"\"\"</Link>\n                    <Link to=\"/tananunto-roots\" className=\"vocab-search-link\" style={{ ",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "def main():\n    # 1. Create Page\n    page_path = os.path.join(PAGES_DIR, 'TananuntoRootsPage.js')\n    print(f\"Creating {page_path}...\")\n    with open(page_path, 'w', encoding='utf-8') as f:\n        f.write(TANANUNTO_PAGE_CONTENT)\n    # 2. Update App\n    update_app_js()\n    # 3. Update Search Page\n    update_search_page()",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "APP_DIR",
        "kind": 5,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "APP_DIR = r'd:\\pali-dhatu-app\\src'\nPAGES_DIR = os.path.join(APP_DIR, 'pages')\nAPP_JS_PATH = os.path.join(APP_DIR, 'App.js')\nSEARCH_PAGE_PATH = os.path.join(PAGES_DIR, 'SearchPage.js')\nTANANUNTO_PAGE_CONTENT = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoRootKeys from '../data/tananunto-root-keys';",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "PAGES_DIR",
        "kind": 5,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "PAGES_DIR = os.path.join(APP_DIR, 'pages')\nAPP_JS_PATH = os.path.join(APP_DIR, 'App.js')\nSEARCH_PAGE_PATH = os.path.join(PAGES_DIR, 'SearchPage.js')\nTANANUNTO_PAGE_CONTENT = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoRootKeys from '../data/tananunto-root-keys';\nfunction TananuntoRootsPage() {",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "APP_JS_PATH",
        "kind": 5,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "APP_JS_PATH = os.path.join(APP_DIR, 'App.js')\nSEARCH_PAGE_PATH = os.path.join(PAGES_DIR, 'SearchPage.js')\nTANANUNTO_PAGE_CONTENT = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoRootKeys from '../data/tananunto-root-keys';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "SEARCH_PAGE_PATH",
        "kind": 5,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "SEARCH_PAGE_PATH = os.path.join(PAGES_DIR, 'SearchPage.js')\nTANANUNTO_PAGE_CONTENT = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoRootKeys from '../data/tananunto-root-keys';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PAGE_CONTENT",
        "kind": 5,
        "importPath": "scripts.create_tananunto_page",
        "description": "scripts.create_tananunto_page",
        "peekOfCode": "TANANUNTO_PAGE_CONTENT = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoRootKeys from '../data/tananunto-root-keys';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchText, setSearchText] = useState('');",
        "detail": "scripts.create_tananunto_page",
        "documentation": {}
    },
    {
        "label": "write_file",
        "kind": 2,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "def write_file(path, content):\n    with open(path, \"w\", encoding=\"utf-8\") as f:\n        f.write(content.strip())\n    print(f\"Updated: {path}\")\n# Execute updates\nwrite_file(KATHA_LIST_PATH, katha_list_content)\nwrite_file(SEARCH_PAGE_PATH, search_page_content)\nwrite_file(APP_CSS_PATH, app_css_content)\nwrite_file(APP_JS_PATH, app_js_content)\nwrite_file(HEADER_JS_PATH, header_js_content)",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "KATHA_LIST_PATH",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "KATHA_LIST_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\KathaListPage.js\"\nSEARCH_PAGE_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\SearchPage.js\"\nAPP_CSS_PATH = r\"D:\\pali-dhatu-app\\src\\App.css\"\nAPP_JS_PATH = r\"D:\\pali-dhatu-app\\src\\App.js\"\nHEADER_JS_PATH = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\n# --- KathaListPage.js ---\nkatha_list_content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "SEARCH_PAGE_PATH",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "SEARCH_PAGE_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\SearchPage.js\"\nAPP_CSS_PATH = r\"D:\\pali-dhatu-app\\src\\App.css\"\nAPP_JS_PATH = r\"D:\\pali-dhatu-app\\src\\App.js\"\nHEADER_JS_PATH = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\n# --- KathaListPage.js ---\nkatha_list_content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "APP_CSS_PATH",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "APP_CSS_PATH = r\"D:\\pali-dhatu-app\\src\\App.css\"\nAPP_JS_PATH = r\"D:\\pali-dhatu-app\\src\\App.js\"\nHEADER_JS_PATH = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\n# --- KathaListPage.js ---\nkatha_list_content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "APP_JS_PATH",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "APP_JS_PATH = r\"D:\\pali-dhatu-app\\src\\App.js\"\nHEADER_JS_PATH = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\n# --- KathaListPage.js ---\nkatha_list_content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport KathaRenderer from '../components/KathaRenderer';",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "HEADER_JS_PATH",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "HEADER_JS_PATH = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\n# --- KathaListPage.js ---\nkatha_list_content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport KathaRenderer from '../components/KathaRenderer';\nfunction KathaListPage() {",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "katha_list_content",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "katha_list_content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport KathaRenderer from '../components/KathaRenderer';\nfunction KathaListPage() {\n    const [kathas, setKathas] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "search_page_content",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "search_page_content = \"\"\"\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction SearchPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchText, setSearchText] = useState('');",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "app_css_content",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "app_css_content = \"\"\"\n/* ===== LIGHT THEME: \"Modern Classroom\" ===== */\n:root {\n  --primary-color: #3498db;      /* Blue header */\n  --primary-dark: #2980b9;\n  --accent-color: #e67e22;       /* Orange accents */\n  --bg-color: #f8f9fa;           /* Light gray background */\n  --card-bg: #ffffff;\n  --text-primary: #2c3e50;       /* Dark gray text */\n  --text-secondary: #7f8c8d;",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "app_js_content",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "app_js_content = \"\"\"\n// src/App.js\nimport './App.css';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Login from './components/Login';\nimport DhatuDetail from './components/DhatuDetail';\nimport SearchPage from './pages/SearchPage';\nimport KathaListPage from './pages/KathaListPage'; // Changed from HomePage\nimport { AuthProvider } from './contexts/AuthContext';",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "header_js_content",
        "kind": 5,
        "importPath": "scripts.create_update_script",
        "description": "scripts.create_update_script",
        "peekOfCode": "header_js_content = \"\"\"\n// src/components/Header.js\nimport React from 'react';\nimport { Link, NavLink, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { signOut } from 'firebase/auth';\nimport { auth } from '../firebaseConfig';\nfunction Header() {\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();",
        "detail": "scripts.create_update_script",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.create_vocab_search_page",
        "description": "scripts.create_vocab_search_page",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\ncontent = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport vocabRootsDPDDerived from '../data/vocab-roots-dpd-derived';\nimport vocabDerivedMeanings from '../data/vocab-derived-meanings';\nimport PaliScript from '../utils/paliScript';\nfunction VocabSearchPage() {",
        "detail": "scripts.create_vocab_search_page",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.create_vocab_search_page",
        "description": "scripts.create_vocab_search_page",
        "peekOfCode": "content = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport vocabRootsDPDDerived from '../data/vocab-roots-dpd-derived';\nimport vocabDerivedMeanings from '../data/vocab-derived-meanings';\nimport PaliScript from '../utils/paliScript';\nfunction VocabSearchPage() {\n    const [vocabList, setVocabList] = useState([]);",
        "detail": "scripts.create_vocab_search_page",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.debug_combine",
        "description": "scripts.debug_combine",
        "peekOfCode": "def load_js_object(path):\n    print(f\"Loading {path}...\")\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n            match = re.search(r'=\\s*(\\{[\\s\\S]*\\});?', content)\n            if match:\n                json_str = match.group(1)\n                return json.loads(json_str)\n            else:",
        "detail": "scripts.debug_combine",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.debug_combine",
        "description": "scripts.debug_combine",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\ndef load_js_object(path):\n    print(f\"Loading {path}...\")\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n            match = re.search(r'=\\s*(\\{[\\s\\S]*\\});?', content)\n            if match:\n                json_str = match.group(1)\n                return json.loads(json_str)",
        "detail": "scripts.debug_combine",
        "documentation": {}
    },
    {
        "label": "tananunto",
        "kind": 5,
        "importPath": "scripts.debug_combine",
        "description": "scripts.debug_combine",
        "peekOfCode": "tananunto = load_js_object(TANANUNTO_PATH)\nif \"กริสฺสติ\" in tananunto:\n    print(\"Found 'กริสฺสติ' in Tananunto.\")\n    print(\"Value:\", tananunto[\"กริสฺสติ\"])\nelse:\n    print(\"'กริสฺสติ' NOT found in Tananunto.\")\nroman = \"karissati\"\nthai = roman_to_thai(roman)\nprint(f\"Roman: {roman} -> Thai: {thai}\")\nif thai in tananunto:",
        "detail": "scripts.debug_combine",
        "documentation": {}
    },
    {
        "label": "roman",
        "kind": 5,
        "importPath": "scripts.debug_combine",
        "description": "scripts.debug_combine",
        "peekOfCode": "roman = \"karissati\"\nthai = roman_to_thai(roman)\nprint(f\"Roman: {roman} -> Thai: {thai}\")\nif thai in tananunto:\n    print(f\"Match! '{thai}' is in Tananunto.\")\nelse:\n    print(f\"No match for '{thai}' in Tananunto.\")",
        "detail": "scripts.debug_combine",
        "documentation": {}
    },
    {
        "label": "thai",
        "kind": 5,
        "importPath": "scripts.debug_combine",
        "description": "scripts.debug_combine",
        "peekOfCode": "thai = roman_to_thai(roman)\nprint(f\"Roman: {roman} -> Thai: {thai}\")\nif thai in tananunto:\n    print(f\"Match! '{thai}' is in Tananunto.\")\nelse:\n    print(f\"No match for '{thai}' in Tananunto.\")",
        "detail": "scripts.debug_combine",
        "documentation": {}
    },
    {
        "label": "roman_to_thai",
        "kind": 2,
        "importPath": "scripts.debug_vocab_matching",
        "description": "scripts.debug_vocab_matching",
        "peekOfCode": "def roman_to_thai(text):\n    if not text: return \"\"\n    s = text\n    map_char = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',\n        'p': 'ป', 'ph': 'ผ', 'b': 'พ', 'bh': 'ภ', 'm': 'ม',\n        'y': 'ย', 'r': 'ร', 'l': 'ล', 'v': 'ว', 's': 'ส', 'h': 'ห', 'ḷ': 'ฬ',",
        "detail": "scripts.debug_vocab_matching",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.debug_vocab_matching",
        "description": "scripts.debug_vocab_matching",
        "peekOfCode": "def load_js_object(path):\n    print(f\"Loading {path}...\")\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n            match = re.search(r'=\\s*(\\{[\\s\\S]*\\});?', content)\n            if match:\n                return json.loads(match.group(1))\n            else:\n                print(f\"Regex match failed for {path}\")",
        "detail": "scripts.debug_vocab_matching",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.debug_vocab_matching",
        "description": "scripts.debug_vocab_matching",
        "peekOfCode": "def main():\n    roman_word = \"kaṭṭhahārikā\"\n    thai_word = roman_to_thai(roman_word)\n    print(f\"Roman: {roman_word}\")\n    print(f\"Thai (converted): {thai_word}\")\n    # Load Tananunto\n    tananunto_path = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\n    tananunto = load_js_object(tananunto_path)\n    if thai_word in tananunto:\n        print(f\"Found in Tananunto: Yes\")",
        "detail": "scripts.debug_vocab_matching",
        "documentation": {}
    },
    {
        "label": "roman_to_thai_robust",
        "kind": 2,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "def roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping\n    cons = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',\n        'p': 'ป', 'ph': 'ผ', 'b': 'พ', 'bh': 'ภ', 'm': 'ม',\n        'y': 'ย', 'r': 'ร', 'l': 'ล', 'v': 'ว', 's': 'ส', 'h': 'ห', 'ḷ': 'ฬ',",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "normalize_dpd_root",
        "kind": 2,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "def normalize_dpd_root(root_str):\n    # 1. Strip √\n    s = root_str.replace(\"√\", \"\").strip()\n    # 2. Strip numbers and spaces (e.g., \"gam 1\" -> \"gam\")\n    s = re.sub(r'\\s+\\d+$', '', s)\n    s = s.strip()\n    # 3. Transliterate\n    thai = roman_to_thai_robust(s)\n    # 4. Strip final Pinthu if present\n    # But only if it's the very last character",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "def load_js_object(path):\n    with open(path, \"r\", encoding=\"utf-8\") as f:\n        content = f.read()\n    # Strip \"const name = \" and \";\" and \"export default\"\n    content = re.sub(r'export default .*', '', content)\n    content = re.sub(r'const \\w+ = ', '', content)\n    content = content.strip().rstrip(\";\")\n    # Remove comments\n    content = re.sub(r'//.*', '', content)\n    return json.loads(content)",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "extract_construction",
        "kind": 2,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "def extract_construction(defn):\n    match = re.search(r'\\[(.*?)\\]', defn, re.DOTALL)\n    return match.group(1) if match else None\ndef extract_first_suffix(construction):\n    if not construction:\n        return None\n    # Clean up: take the first line if multiple lines (e.g. [A + B\\nC + D])\n    # We assume the first line contains the root decomposition.\n    construction = construction.split('\\n')[0]\n    # Split by +",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "extract_first_suffix",
        "kind": 2,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "def extract_first_suffix(construction):\n    if not construction:\n        return None\n    # Clean up: take the first line if multiple lines (e.g. [A + B\\nC + D])\n    # We assume the first line contains the root decomposition.\n    construction = construction.split('\\n')[0]\n    # Split by +\n    parts = construction.split('+')\n    parts = [p.strip() for p in parts]\n    for i, p in enumerate(parts):",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "def main():\n    print(\"Loading data...\")\n    try:\n        derived_data = load_js_object(INPUT_DERIVED)\n        vocab_dpd = load_js_object(INPUT_DPD_VOCAB)\n    except Exception as e:\n        print(f\"Error loading JS files: {e}\")\n        return\n    print(f\"Loaded {len(derived_data)} root entries.\")\n    enriched_data = {}",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "INPUT_DERIVED",
        "kind": 5,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "INPUT_DERIVED = r\"d:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js\"\nINPUT_DPD_VOCAB = r\"d:\\pali-theonlyone\\data\\vocab-dpd.js\"\nOUTPUT_ENRICHED = r\"d:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived-enriched.js\"\ndef roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping\n    cons = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "INPUT_DPD_VOCAB",
        "kind": 5,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "INPUT_DPD_VOCAB = r\"d:\\pali-theonlyone\\data\\vocab-dpd.js\"\nOUTPUT_ENRICHED = r\"d:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived-enriched.js\"\ndef roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping\n    cons = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "OUTPUT_ENRICHED",
        "kind": 5,
        "importPath": "scripts.enrich_dpd_derived",
        "description": "scripts.enrich_dpd_derived",
        "peekOfCode": "OUTPUT_ENRICHED = r\"d:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived-enriched.js\"\ndef roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping\n    cons = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',\n        'p': 'ป', 'ph': 'ผ', 'b': 'พ', 'bh': 'ภ', 'm': 'ม',",
        "detail": "scripts.enrich_dpd_derived",
        "documentation": {}
    },
    {
        "label": "roman_to_thai",
        "kind": 2,
        "importPath": "scripts.extract_derived_meanings",
        "description": "scripts.extract_derived_meanings",
        "peekOfCode": "def roman_to_thai(text):\n    if not text: return \"\"\n    s = text\n    # 1. Move pre-positioned vowels (e, o) to after consonant\n    # JS: s = s.replace(/([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])/g, \"$2$1\"); \n    # Wait, the JS logic was for Thai->Roman fix or Roman->Thai?\n    # The JS `romanToThai` function:\n    # 1. Maps Roman chars to Thai chars.\n    # 2. Handles special cases.\n    # Actually, the JS logic I saw was:",
        "detail": "scripts.extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.extract_derived_meanings",
        "description": "scripts.extract_derived_meanings",
        "peekOfCode": "def load_js_object(path):\n    with open(path, 'r', encoding='utf-8') as f:\n        content = f.read()\n        # Remove \"const variableName = \" and trailing \";\"\n        content = re.sub(r'const\\s+\\w+\\s*=\\s*', '', content)\n        content = content.strip().rstrip(';')\n        # Fix JS keys (no quotes) to JSON keys (quotes) if needed\n        # But wait, the files might have quoted keys already?\n        # Let's check. vocab-roots-dpd-derived.js: \"acc\": [...] -> Quoted.\n        # vocab-etipitaka.js: \"กกฺขฬิย\": ... -> Quoted.",
        "detail": "scripts.extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "extract_meanings",
        "kind": 2,
        "importPath": "scripts.extract_derived_meanings",
        "description": "scripts.extract_derived_meanings",
        "peekOfCode": "def extract_meanings():\n    print(\"Loading DPD Derived data...\")\n    dpd_data = load_js_object(DPD_DERIVED_PATH)\n    if not dpd_data:\n        print(\"Failed to load DPD data\")\n        return\n    print(\"Loading Etipitaka data...\")\n    etipitaka_data = load_js_object(ETIPITAKA_PATH)\n    if not etipitaka_data:\n        print(\"Failed to load Etipitaka data\")",
        "detail": "scripts.extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "DPD_DERIVED_PATH",
        "kind": 5,
        "importPath": "scripts.extract_derived_meanings",
        "description": "scripts.extract_derived_meanings",
        "peekOfCode": "DPD_DERIVED_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js'\nETIPITAKA_PATH = r'd:\\pali-theonlyone\\data\\vocab-etipitaka.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-derived-meanings.js'\n# Roman to Thai Transliteration (Ported from PaliScript.js)\ndef roman_to_thai(text):\n    if not text: return \"\"\n    s = text\n    # 1. Move pre-positioned vowels (e, o) to after consonant\n    # JS: s = s.replace(/([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])/g, \"$2$1\"); \n    # Wait, the JS logic was for Thai->Roman fix or Roman->Thai?",
        "detail": "scripts.extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "ETIPITAKA_PATH",
        "kind": 5,
        "importPath": "scripts.extract_derived_meanings",
        "description": "scripts.extract_derived_meanings",
        "peekOfCode": "ETIPITAKA_PATH = r'd:\\pali-theonlyone\\data\\vocab-etipitaka.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-derived-meanings.js'\n# Roman to Thai Transliteration (Ported from PaliScript.js)\ndef roman_to_thai(text):\n    if not text: return \"\"\n    s = text\n    # 1. Move pre-positioned vowels (e, o) to after consonant\n    # JS: s = s.replace(/([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])/g, \"$2$1\"); \n    # Wait, the JS logic was for Thai->Roman fix or Roman->Thai?\n    # The JS `romanToThai` function:",
        "detail": "scripts.extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "OUTPUT_PATH",
        "kind": 5,
        "importPath": "scripts.extract_derived_meanings",
        "description": "scripts.extract_derived_meanings",
        "peekOfCode": "OUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\vocab-derived-meanings.js'\n# Roman to Thai Transliteration (Ported from PaliScript.js)\ndef roman_to_thai(text):\n    if not text: return \"\"\n    s = text\n    # 1. Move pre-positioned vowels (e, o) to after consonant\n    # JS: s = s.replace(/([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])/g, \"$2$1\"); \n    # Wait, the JS logic was for Thai->Roman fix or Roman->Thai?\n    # The JS `romanToThai` function:\n    # 1. Maps Roman chars to Thai chars.",
        "detail": "scripts.extract_derived_meanings",
        "documentation": {}
    },
    {
        "label": "thai_to_roman",
        "kind": 2,
        "importPath": "scripts.extract_tananunto_roots",
        "description": "scripts.extract_tananunto_roots",
        "peekOfCode": "def thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',\n        'ต': 't', 'ถ': 'th', 'ท': 'd', 'ธ': 'dh', 'น': 'n',",
        "detail": "scripts.extract_tananunto_roots",
        "documentation": {}
    },
    {
        "label": "normalize_root",
        "kind": 2,
        "importPath": "scripts.extract_tananunto_roots",
        "description": "scripts.extract_tananunto_roots",
        "peekOfCode": "def normalize_root(roman_root, available_keys):\n    # Try exact match\n    if roman_root in available_keys:\n        return roman_root\n    # Try removing final 'a' (kara -> kar)\n    if roman_root.endswith('a'):\n        shorter = roman_root[:-1]\n        if shorter in available_keys:\n            return shorter\n    # Try adding final 'a' (kar -> kara)",
        "detail": "scripts.extract_tananunto_roots",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.extract_tananunto_roots",
        "description": "scripts.extract_tananunto_roots",
        "peekOfCode": "def main():\n    print(f\"Reading {TANANUNTO_PATH}...\")\n    with open(TANANUNTO_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Extract entries\n    # Pattern to match \"Key\": \"Value\"\n    # Handling escaped quotes in value is important\n    entries = re.findall(r'\"((?:[^\"\\\\]|\\\\.)+)\":\\s*\"((?:[^\"\\\\]|\\\\.)+)\"', content)\n    print(f\"Found {len(entries)} entries in Tananunto.\")\n    # Read DPD Derived",
        "detail": "scripts.extract_tananunto_roots",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.extract_tananunto_roots",
        "description": "scripts.extract_tananunto_roots",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\nDPD_DERIVED_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js'\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',",
        "detail": "scripts.extract_tananunto_roots",
        "documentation": {}
    },
    {
        "label": "DPD_DERIVED_PATH",
        "kind": 5,
        "importPath": "scripts.extract_tananunto_roots",
        "description": "scripts.extract_tananunto_roots",
        "peekOfCode": "DPD_DERIVED_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js'\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',",
        "detail": "scripts.extract_tananunto_roots",
        "documentation": {}
    },
    {
        "label": "url",
        "kind": 5,
        "importPath": "scripts.fetch_detail_raw",
        "description": "scripts.fetch_detail_raw",
        "peekOfCode": "url = \"https://palidict.com/node/4236\"\nprint(f\"Fetching {url}...\")\nresponse = requests.get(url)\nwith open(\"temp_detail.html\", \"w\", encoding=\"utf-8\") as f:\n    f.write(response.text)\nprint(\"Saved to temp_detail.html\")",
        "detail": "scripts.fetch_detail_raw",
        "documentation": {}
    },
    {
        "label": "response",
        "kind": 5,
        "importPath": "scripts.fetch_detail_raw",
        "description": "scripts.fetch_detail_raw",
        "peekOfCode": "response = requests.get(url)\nwith open(\"temp_detail.html\", \"w\", encoding=\"utf-8\") as f:\n    f.write(response.text)\nprint(\"Saved to temp_detail.html\")",
        "detail": "scripts.fetch_detail_raw",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.find_word",
        "description": "scripts.find_word",
        "peekOfCode": "file_path = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    for line in f:\n        if \"กริสฺสติ\" in line:\n            print(line.strip())",
        "detail": "scripts.find_word",
        "documentation": {}
    },
    {
        "label": "css_path",
        "kind": 5,
        "importPath": "scripts.fix_derived_width",
        "description": "scripts.fix_derived_width",
        "peekOfCode": "css_path = r\"d:\\pali-dhatu-app\\src\\App.css\"\nwith open(css_path, \"r\", encoding=\"utf-8\") as f:\n    content = f.read()\n# Target the specific block we added/modified recently\ntarget_block = \"\"\".derived-words-section {\n  margin-top: 2rem;\"\"\"\nreplacement_block = \"\"\".derived-words-section {\n  grid-column: 1 / -1;\n  margin-top: 2rem;\"\"\"\nif target_block in content:",
        "detail": "scripts.fix_derived_width",
        "documentation": {}
    },
    {
        "label": "target_block",
        "kind": 5,
        "importPath": "scripts.fix_derived_width",
        "description": "scripts.fix_derived_width",
        "peekOfCode": "target_block = \"\"\".derived-words-section {\n  margin-top: 2rem;\"\"\"\nreplacement_block = \"\"\".derived-words-section {\n  grid-column: 1 / -1;\n  margin-top: 2rem;\"\"\"\nif target_block in content:\n    content = content.replace(target_block, replacement_block)\n    print(\"Added grid-column: 1 / -1 to .derived-words-section\")\nelse:\n    print(\"Could not find exact block to replace. Trying regex/broader search.\")",
        "detail": "scripts.fix_derived_width",
        "documentation": {}
    },
    {
        "label": "replacement_block",
        "kind": 5,
        "importPath": "scripts.fix_derived_width",
        "description": "scripts.fix_derived_width",
        "peekOfCode": "replacement_block = \"\"\".derived-words-section {\n  grid-column: 1 / -1;\n  margin-top: 2rem;\"\"\"\nif target_block in content:\n    content = content.replace(target_block, replacement_block)\n    print(\"Added grid-column: 1 / -1 to .derived-words-section\")\nelse:\n    print(\"Could not find exact block to replace. Trying regex/broader search.\")\n    # Fallback to broader replace if indentation varies\n    if \".derived-words-section {\" in content:",
        "detail": "scripts.fix_derived_width",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_colors",
        "description": "scripts.fix_dhatu_colors",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\components\\DhatuDetail.js\"\nwith open(file_path, \"r\", encoding=\"utf-8\") as f:\n    content = f.read()\n# 1. Update Source Mapping Colors\nold_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#95a5a6', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#95a5a6', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#95a5a6', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#95a5a6', icon: 'fas fa-globe' }\n};\"\"\"",
        "detail": "scripts.fix_dhatu_colors",
        "documentation": {}
    },
    {
        "label": "old_mapping",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_colors",
        "description": "scripts.fix_dhatu_colors",
        "peekOfCode": "old_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#95a5a6', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#95a5a6', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#95a5a6', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#95a5a6', icon: 'fas fa-globe' }\n};\"\"\"\nnew_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#d35400', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },",
        "detail": "scripts.fix_dhatu_colors",
        "documentation": {}
    },
    {
        "label": "new_mapping",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_colors",
        "description": "scripts.fix_dhatu_colors",
        "peekOfCode": "new_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#d35400', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#2980b9', icon: 'fas fa-globe' }\n};\"\"\"\nif old_mapping in content:\n    content = content.replace(old_mapping, new_mapping)\n    print(\"Updated sourceMapping colors.\")\nelse:",
        "detail": "scripts.fix_dhatu_colors",
        "documentation": {}
    },
    {
        "label": "target_div",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_colors",
        "description": "scripts.fix_dhatu_colors",
        "peekOfCode": "target_div = '<div className=\"dict-label\">'\nreplacement_div = '<div className=\"dict-label\" style={{ backgroundColor: group.source.color }}>'\nif target_div in content:\n    content = content.replace(target_div, replacement_div)\n    print(\"Added style to dict-label.\")\nelse:\n    print(\"Could not find <div className=\\\"dict-label\\\">\")\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)",
        "detail": "scripts.fix_dhatu_colors",
        "documentation": {}
    },
    {
        "label": "replacement_div",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_colors",
        "description": "scripts.fix_dhatu_colors",
        "peekOfCode": "replacement_div = '<div className=\"dict-label\" style={{ backgroundColor: group.source.color }}>'\nif target_div in content:\n    content = content.replace(target_div, replacement_div)\n    print(\"Added style to dict-label.\")\nelse:\n    print(\"Could not find <div className=\\\"dict-label\\\">\")\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)",
        "detail": "scripts.fix_dhatu_colors",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_detail_syntax",
        "description": "scripts.fix_dhatu_detail_syntax",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# The garbage pattern to remove\ngarbage = \"\"\"                            </div>\n                        </div>\n                    );\n                  })}\n                </div>\n              </div>",
        "detail": "scripts.fix_dhatu_detail_syntax",
        "documentation": {}
    },
    {
        "label": "garbage",
        "kind": 5,
        "importPath": "scripts.fix_dhatu_detail_syntax",
        "description": "scripts.fix_dhatu_detail_syntax",
        "peekOfCode": "garbage = \"\"\"                            </div>\n                        </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\"\"\"\n# We want to remove this garbage.\n# However, exact whitespace matching might be tricky if my copy-paste above isn't perfect.\n# Let's try to find it.",
        "detail": "scripts.fix_dhatu_detail_syntax",
        "documentation": {}
    },
    {
        "label": "search_page_path",
        "kind": 5,
        "importPath": "scripts.fix_search_error",
        "description": "scripts.fix_search_error",
        "peekOfCode": "search_page_path = r\"D:\\pali-dhatu-app\\src\\pages\\SearchPage.js\"\nwith open(search_page_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Replace the filter logic with a more robust version\nold_logic = \"\"\"            const matchesText = !searchText || \n                                d.dhatu_word.toLowerCase().includes(searchLower) || \n                                (d.arth_thai && d.arth_thai.toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && d.arth_pali.toLowerCase().includes(searchLower)) ||\n                                (d.udaharana && d.udaharana.toLowerCase().includes(searchLower));\"\"\"\nnew_logic = \"\"\"            const matchesText = !searchText || ",
        "detail": "scripts.fix_search_error",
        "documentation": {}
    },
    {
        "label": "old_logic",
        "kind": 5,
        "importPath": "scripts.fix_search_error",
        "description": "scripts.fix_search_error",
        "peekOfCode": "old_logic = \"\"\"            const matchesText = !searchText || \n                                d.dhatu_word.toLowerCase().includes(searchLower) || \n                                (d.arth_thai && d.arth_thai.toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && d.arth_pali.toLowerCase().includes(searchLower)) ||\n                                (d.udaharana && d.udaharana.toLowerCase().includes(searchLower));\"\"\"\nnew_logic = \"\"\"            const matchesText = !searchText || \n                                (d.dhatu_word && String(d.dhatu_word).toLowerCase().includes(searchLower)) || \n                                (d.arth_thai && String(d.arth_thai).toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && String(d.arth_pali).toLowerCase().includes(searchLower)) ||\n                                (d.udaharana && (Array.isArray(d.udaharana) ? d.udaharana.join(' ') : String(d.udaharana)).toLowerCase().includes(searchLower));\"\"\"",
        "detail": "scripts.fix_search_error",
        "documentation": {}
    },
    {
        "label": "new_logic",
        "kind": 5,
        "importPath": "scripts.fix_search_error",
        "description": "scripts.fix_search_error",
        "peekOfCode": "new_logic = \"\"\"            const matchesText = !searchText || \n                                (d.dhatu_word && String(d.dhatu_word).toLowerCase().includes(searchLower)) || \n                                (d.arth_thai && String(d.arth_thai).toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && String(d.arth_pali).toLowerCase().includes(searchLower)) ||\n                                (d.udaharana && (Array.isArray(d.udaharana) ? d.udaharana.join(' ') : String(d.udaharana)).toLowerCase().includes(searchLower));\"\"\"\nif old_logic in content:\n    content = content.replace(old_logic, new_logic)\n    print(\"Updated filter logic to be robust against non-string types\")\nelse:\n    # Fallback search if exact match fails (e.g. whitespace differences)",
        "detail": "scripts.fix_search_error",
        "documentation": {}
    },
    {
        "label": "src",
        "kind": 5,
        "importPath": "scripts.force_copy_derived",
        "description": "scripts.force_copy_derived",
        "peekOfCode": "src = r'd:\\pali-theonlyone\\data\\vocab-roots-dpd-derived.js'\ndst = r'd:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js'\nprint(f\"Copying {src} to {dst}...\")\ntry:\n    shutil.copy2(src, dst)\n    print(\"Success!\")\nexcept Exception as e:\n    print(f\"Error: {e}\")\n    # Try to force by removing destination first\n    try:",
        "detail": "scripts.force_copy_derived",
        "documentation": {}
    },
    {
        "label": "dst",
        "kind": 5,
        "importPath": "scripts.force_copy_derived",
        "description": "scripts.force_copy_derived",
        "peekOfCode": "dst = r'd:\\pali-dhatu-app\\src\\data\\vocab-roots-dpd-derived.js'\nprint(f\"Copying {src} to {dst}...\")\ntry:\n    shutil.copy2(src, dst)\n    print(\"Success!\")\nexcept Exception as e:\n    print(f\"Error: {e}\")\n    # Try to force by removing destination first\n    try:\n        if os.path.exists(dst):",
        "detail": "scripts.force_copy_derived",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map",
        "description": "scripts.generate_tananunto_map",
        "peekOfCode": "def main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Read Tananunto\n    print(f\"Reading {TANANUNTO_PATH}...\")",
        "detail": "scripts.generate_tananunto_map",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map",
        "description": "scripts.generate_tananunto_map",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\nROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))",
        "detail": "scripts.generate_tananunto_map",
        "documentation": {}
    },
    {
        "label": "ROOTS_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map",
        "description": "scripts.generate_tananunto_map",
        "peekOfCode": "ROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")",
        "detail": "scripts.generate_tananunto_map",
        "documentation": {}
    },
    {
        "label": "OUTPUT_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map",
        "description": "scripts.generate_tananunto_map",
        "peekOfCode": "OUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Read Tananunto",
        "detail": "scripts.generate_tananunto_map",
        "documentation": {}
    },
    {
        "label": "load_available_roots",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def load_available_roots():\n    \"\"\"Loads root keys from vocab-roots.js\"\"\"\n    print(f\"Reading {ROOTS_FILE}...\")\n    with open(ROOTS_FILE, 'r', encoding='utf-8') as f:\n        content = f.read()\n    keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', content))\n    print(f\"Loaded {len(keys)} available root keys.\")\n    return keys\ndef normalize_root(thai_root, available_keys):\n    \"\"\"",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "normalize_root",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def normalize_root(thai_root, available_keys):\n    \"\"\"\n    Normalizes a Tananunto root string to a vocab-roots.js key.\n    Returns the key if found, otherwise None.\n    \"\"\"\n    thai_root = thai_root.strip()\n    garbage = {\n        \"ซึ่ง\", \"ตามหนังสือสัททนีติ\", \"ต้น\", \"ถือเอาซึ่งพระ\", \"ทีฆะต้น\", \"ที่สุด\",\n        \"นิพพาน\", \"นิพฺพาน\", \"ผู้มี\", \"พระ\", \"มาจากญา\", \"มีธาตุเหมือนกับ\", \"มีเตโช\",\n        \"สักว่าขันธ์และ\", \"สัททนีติ\", \"อันมี\", \"อันมีโสต\", \"อาคมหลัง\", \"อุปสัคสังหาร\",",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "load_js_object",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def load_js_object(filepath):\n    \"\"\"\n    Naively parses a JS object definition file (const x = { ... }) into a Python dict.\n    Assumes keys are quoted or unquoted strings, values are strings.\n    \"\"\"\n    with open(filepath, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Strip \"const vocabTananunto = \" and trailing \"};\" roughly\n    start = content.find('{')\n    end = content.rfind('}')",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "clean_meaning",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def clean_meaning(meaning):\n    \"\"\"Removes 'ความ' prefix and whitespace.\"\"\"\n    if not meaning:\n        return \"\"\n    m = meaning.replace(\"ความ\", \"\").strip()\n    return m\ndef map_paccaya_to_roman(thai_paccaya):\n    if not thai_paccaya: return None\n    p = thai_paccaya.strip()\n    mapping = {",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "map_paccaya_to_roman",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def map_paccaya_to_roman(thai_paccaya):\n    if not thai_paccaya: return None\n    p = thai_paccaya.strip()\n    mapping = {\n        \"อ\": \"a\",\n        \"ย\": \"ya\",\n        \"นุ\": \"nu\",\n        \"ณุ\": \"ṇu\",\n        \"นา\": \"nā\",\n        \"ณหา\": \"nhā\",",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "extract_root_info",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def extract_root_info(definition):\n    \"\"\"\n    Parses definition to extract root info.\n    Format: \"... RootName ธาตุ ใน Meaning + Paccaya ปัจจัย...\"\n    \"\"\"\n    # Normalized definition for easier regex\n    # Replace newlines with space\n    def_norm = definition.replace('\\n', ' ')\n    # Regex to find root analysis\n    # Group 1: Root Name",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "def main():\n    available_keys = load_available_roots()\n    print(f\"Reading {VOCAB_FILE}...\")\n    entries = load_js_object(VOCAB_FILE)\n    print(f\"Found {len(entries)} entries.\")\n    mapped_data = {}\n    matched_count = 0\n    for word, definition in entries:\n        info = extract_root_info(definition)\n        if info:",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "BASE_DIR",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "BASE_DIR = r'd:\\pali-theonlyone\\data'\nVOCAB_FILE = os.path.join(BASE_DIR, 'vocab-tananunto.js')\nROOTS_FILE = os.path.join(BASE_DIR, 'vocab-roots.js')\nOUTPUT_FILE = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef load_available_roots():\n    \"\"\"Loads root keys from vocab-roots.js\"\"\"\n    print(f\"Reading {ROOTS_FILE}...\")\n    with open(ROOTS_FILE, 'r', encoding='utf-8') as f:\n        content = f.read()\n    keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', content))",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "VOCAB_FILE",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "VOCAB_FILE = os.path.join(BASE_DIR, 'vocab-tananunto.js')\nROOTS_FILE = os.path.join(BASE_DIR, 'vocab-roots.js')\nOUTPUT_FILE = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef load_available_roots():\n    \"\"\"Loads root keys from vocab-roots.js\"\"\"\n    print(f\"Reading {ROOTS_FILE}...\")\n    with open(ROOTS_FILE, 'r', encoding='utf-8') as f:\n        content = f.read()\n    keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', content))\n    print(f\"Loaded {len(keys)} available root keys.\")",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "ROOTS_FILE",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "ROOTS_FILE = os.path.join(BASE_DIR, 'vocab-roots.js')\nOUTPUT_FILE = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef load_available_roots():\n    \"\"\"Loads root keys from vocab-roots.js\"\"\"\n    print(f\"Reading {ROOTS_FILE}...\")\n    with open(ROOTS_FILE, 'r', encoding='utf-8') as f:\n        content = f.read()\n    keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', content))\n    print(f\"Loaded {len(keys)} available root keys.\")\n    return keys",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "OUTPUT_FILE",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_map_v2",
        "description": "scripts.generate_tananunto_map_v2",
        "peekOfCode": "OUTPUT_FILE = r'd:\\pali-dhatu-app\\src\\data\\tananunto-vocab-map.js'\ndef load_available_roots():\n    \"\"\"Loads root keys from vocab-roots.js\"\"\"\n    print(f\"Reading {ROOTS_FILE}...\")\n    with open(ROOTS_FILE, 'r', encoding='utf-8') as f:\n        content = f.read()\n    keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', content))\n    print(f\"Loaded {len(keys)} available root keys.\")\n    return keys\ndef normalize_root(thai_root, available_keys):",
        "detail": "scripts.generate_tananunto_map_v2",
        "documentation": {}
    },
    {
        "label": "thai_to_roman",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_root_index",
        "description": "scripts.generate_tananunto_root_index",
        "peekOfCode": "def thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',\n        'ต': 't', 'ถ': 'th', 'ท': 'd', 'ธ': 'dh', 'น': 'n',",
        "detail": "scripts.generate_tananunto_root_index",
        "documentation": {}
    },
    {
        "label": "normalize_root",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_root_index",
        "description": "scripts.generate_tananunto_root_index",
        "peekOfCode": "def normalize_root(roman_root, available_keys):\n    # Try exact match\n    if roman_root in available_keys:\n        return roman_root\n    # Try removing final 'a' (kara -> kar)\n    if roman_root.endswith('a'):\n        shorter = roman_root[:-1]\n        if shorter in available_keys:\n            return shorter\n    # Try adding final 'a' (kar -> kara)",
        "detail": "scripts.generate_tananunto_root_index",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_root_index",
        "description": "scripts.generate_tananunto_root_index",
        "peekOfCode": "def main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Read Tananunto\n    print(f\"Reading {TANANUNTO_PATH}...\")",
        "detail": "scripts.generate_tananunto_root_index",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_root_index",
        "description": "scripts.generate_tananunto_root_index",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\nROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-root-keys.js'\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',",
        "detail": "scripts.generate_tananunto_root_index",
        "documentation": {}
    },
    {
        "label": "ROOTS_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_root_index",
        "description": "scripts.generate_tananunto_root_index",
        "peekOfCode": "ROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-root-keys.js'\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',",
        "detail": "scripts.generate_tananunto_root_index",
        "documentation": {}
    },
    {
        "label": "OUTPUT_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_root_index",
        "description": "scripts.generate_tananunto_root_index",
        "peekOfCode": "OUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-root-keys.js'\ndef thai_to_roman(text):\n    if not text: return \"\"\n    s = text\n    # Move pre-positioned vowels\n    s = re.sub(r'([เโไใ])((?:[ก-ฮ]ฺ)*[ก-ฮ])', r'\\2\\1', s)\n    map_char = {\n        'ก': 'k', 'ข': 'kh', 'ค': 'g', 'ฆ': 'gh', 'ง': 'ṅ',\n        'จ': 'c', 'ฉ': 'ch', 'ช': 'j', 'ฌ': 'jh', 'ญ': 'ñ',\n        'ฏ': 'ṭ', 'ฐ': 'ṭh', 'ฑ': 'ḍ', 'ฒ': 'ḍh', 'ณ': 'ṇ',",
        "detail": "scripts.generate_tananunto_root_index",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.generate_tananunto_root_index_v2",
        "description": "scripts.generate_tananunto_root_index_v2",
        "peekOfCode": "def main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Read Tananunto\n    print(f\"Reading {TANANUNTO_PATH}...\")",
        "detail": "scripts.generate_tananunto_root_index_v2",
        "documentation": {}
    },
    {
        "label": "TANANUNTO_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_root_index_v2",
        "description": "scripts.generate_tananunto_root_index_v2",
        "peekOfCode": "TANANUNTO_PATH = r'd:\\pali-theonlyone\\data\\vocab-tananunto.js'\nROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-root-keys.js'\ndef main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))",
        "detail": "scripts.generate_tananunto_root_index_v2",
        "documentation": {}
    },
    {
        "label": "ROOTS_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_root_index_v2",
        "description": "scripts.generate_tananunto_root_index_v2",
        "peekOfCode": "ROOTS_PATH = r'd:\\pali-theonlyone\\data\\vocab-roots.js'\nOUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-root-keys.js'\ndef main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")",
        "detail": "scripts.generate_tananunto_root_index_v2",
        "documentation": {}
    },
    {
        "label": "OUTPUT_PATH",
        "kind": 5,
        "importPath": "scripts.generate_tananunto_root_index_v2",
        "description": "scripts.generate_tananunto_root_index_v2",
        "peekOfCode": "OUTPUT_PATH = r'd:\\pali-dhatu-app\\src\\data\\tananunto-root-keys.js'\ndef main():\n    # 1. Load available roots from vocab-roots.js\n    print(f\"Reading {ROOTS_PATH}...\")\n    with open(ROOTS_PATH, 'r', encoding='utf-8') as f:\n        roots_content = f.read()\n    # Extract keys: \"key\": [ ... ]\n    available_keys = set(re.findall(r'\"([^\"]+)\":\\s*\\[', roots_content))\n    print(f\"Loaded {len(available_keys)} available roots.\")\n    # 2. Read Tananunto",
        "detail": "scripts.generate_tananunto_root_index_v2",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.inspect_dpd_db",
        "description": "scripts.inspect_dpd_db",
        "peekOfCode": "def main():\n    if not os.path.exists(DB_PATH):\n        print(f\"DB not found at {DB_PATH}\")\n        return\n    conn = sqlite3.connect(DB_PATH)\n    c = conn.cursor()\n    print(\"Listing tables...\")\n    c.execute(\"SELECT name FROM sqlite_master WHERE type='table';\")\n    tables = c.fetchall()\n    for t in tables:",
        "detail": "scripts.inspect_dpd_db",
        "documentation": {}
    },
    {
        "label": "DB_PATH",
        "kind": 5,
        "importPath": "scripts.inspect_dpd_db",
        "description": "scripts.inspect_dpd_db",
        "peekOfCode": "DB_PATH = r\"d:\\pali-theonlyone\\data\\dpd-db-repo\\dpd.db\"\ndef main():\n    if not os.path.exists(DB_PATH):\n        print(f\"DB not found at {DB_PATH}\")\n        return\n    conn = sqlite3.connect(DB_PATH)\n    c = conn.cursor()\n    print(\"Listing tables...\")\n    c.execute(\"SELECT name FROM sqlite_master WHERE type='table';\")\n    tables = c.fetchall()",
        "detail": "scripts.inspect_dpd_db",
        "documentation": {}
    },
    {
        "label": "url",
        "kind": 5,
        "importPath": "scripts.inspect_roots_page",
        "description": "scripts.inspect_roots_page",
        "peekOfCode": "url = \"https://palidict.com/พจนานุกรมธาตุ\"\nprint(f\"Fetching {url}...\")\ntry:\n    response = requests.get(url, timeout=10)\n    response.raise_for_status()\n    print(\"Fetch successful.\")\nexcept Exception as e:\n    print(f\"Error fetching: {e}\")\n    exit(1)\nsoup = BeautifulSoup(response.content, 'html.parser')",
        "detail": "scripts.inspect_roots_page",
        "documentation": {}
    },
    {
        "label": "soup",
        "kind": 5,
        "importPath": "scripts.inspect_roots_page",
        "description": "scripts.inspect_roots_page",
        "peekOfCode": "soup = BeautifulSoup(response.content, 'html.parser')\n# Find the first few rows\nrows = soup.find_all('tr')\nprint(f\"Found {len(rows)} rows.\")\nfor i, row in enumerate(rows[:5]):\n    print(f\"--- Row {i} ---\")\n    cols = row.find_all('td')\n    for j, col in enumerate(cols):\n        print(f\"Col {j}: {col.get_text(strip=True)}\")\n        # Check for links",
        "detail": "scripts.inspect_roots_page",
        "documentation": {}
    },
    {
        "label": "rows",
        "kind": 5,
        "importPath": "scripts.inspect_roots_page",
        "description": "scripts.inspect_roots_page",
        "peekOfCode": "rows = soup.find_all('tr')\nprint(f\"Found {len(rows)} rows.\")\nfor i, row in enumerate(rows[:5]):\n    print(f\"--- Row {i} ---\")\n    cols = row.find_all('td')\n    for j, col in enumerate(cols):\n        print(f\"Col {j}: {col.get_text(strip=True)}\")\n        # Check for links\n        links = col.find_all('a')\n        for link in links:",
        "detail": "scripts.inspect_roots_page",
        "documentation": {}
    },
    {
        "label": "url",
        "kind": 5,
        "importPath": "scripts.inspect_root_detail",
        "description": "scripts.inspect_root_detail",
        "peekOfCode": "url = \"https://palidict.com/node/4236\"\nprint(f\"Fetching {url}...\")\nheaders = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n}\ntry:\n    response = requests.get(url, headers=headers, timeout=10)\n    print(f\"Status: {response.status_code}\")\n    response.raise_for_status()\n    with open(\"temp_detail.html\", \"w\", encoding=\"utf-8\") as f:",
        "detail": "scripts.inspect_root_detail",
        "documentation": {}
    },
    {
        "label": "headers",
        "kind": 5,
        "importPath": "scripts.inspect_root_detail",
        "description": "scripts.inspect_root_detail",
        "peekOfCode": "headers = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n}\ntry:\n    response = requests.get(url, headers=headers, timeout=10)\n    print(f\"Status: {response.status_code}\")\n    response.raise_for_status()\n    with open(\"temp_detail.html\", \"w\", encoding=\"utf-8\") as f:\n        f.write(response.text)\n    print(\"Saved HTML to temp_detail.html\")",
        "detail": "scripts.inspect_root_detail",
        "documentation": {}
    },
    {
        "label": "keys",
        "kind": 5,
        "importPath": "scripts.list_b_keys",
        "description": "scripts.list_b_keys",
        "peekOfCode": "keys = re.findall(r'\"([^\"]+)\":\\s*\\[', content)\nb_keys = [k for k in keys if k.startswith('bh')]\nprint(\"Found keys starting with bh:\")\nfor k in sorted(b_keys):\n    print(k)",
        "detail": "scripts.list_b_keys",
        "documentation": {}
    },
    {
        "label": "b_keys",
        "kind": 5,
        "importPath": "scripts.list_b_keys",
        "description": "scripts.list_b_keys",
        "peekOfCode": "b_keys = [k for k in keys if k.startswith('bh')]\nprint(\"Found keys starting with bh:\")\nfor k in sorted(b_keys):\n    print(k)",
        "detail": "scripts.list_b_keys",
        "documentation": {}
    },
    {
        "label": "keys",
        "kind": 5,
        "importPath": "scripts.list_k_keys",
        "description": "scripts.list_k_keys",
        "peekOfCode": "keys = re.findall(r'\"([^\"]+)\":\\s*\\[', content)\nk_keys = [k for k in keys if k.startswith('k')]\nprint(\"Found keys starting with k:\")\nfor k in sorted(k_keys):\n    print(k)",
        "detail": "scripts.list_k_keys",
        "documentation": {}
    },
    {
        "label": "k_keys",
        "kind": 5,
        "importPath": "scripts.list_k_keys",
        "description": "scripts.list_k_keys",
        "peekOfCode": "k_keys = [k for k in keys if k.startswith('k')]\nprint(\"Found keys starting with k:\")\nfor k in sorted(k_keys):\n    print(k)",
        "detail": "scripts.list_k_keys",
        "documentation": {}
    },
    {
        "label": "katha_manager_path",
        "kind": 5,
        "importPath": "scripts.refactor_admin_forms_part1",
        "description": "scripts.refactor_admin_forms_part1",
        "peekOfCode": "katha_manager_path = 'D:/pali-dhatu-app/src/components/KathaManager.js'\nwith open(katha_manager_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Replace the linear form with grid form\nold_form = \"\"\"                    <form onSubmit={handleUpdate}>\n                        <h3>แก้ไขคาถาที่: {editingKatha.katha_no}</h3>\n                        <label>เนื้อหาคาถา (บาลี):</label>\n                        <textarea name=\"katha_pali\" value={editingKatha.katha_pali} onChange={handleEditChange} rows=\"6\" required />\n                        <label>จำนวนธาตุ:</label>\n                        <input type=\"number\" name=\"dhatu_count\" value={editingKatha.dhatu_count} onChange={handleEditChange} required />",
        "detail": "scripts.refactor_admin_forms_part1",
        "documentation": {}
    },
    {
        "label": "old_form",
        "kind": 5,
        "importPath": "scripts.refactor_admin_forms_part1",
        "description": "scripts.refactor_admin_forms_part1",
        "peekOfCode": "old_form = \"\"\"                    <form onSubmit={handleUpdate}>\n                        <h3>แก้ไขคาถาที่: {editingKatha.katha_no}</h3>\n                        <label>เนื้อหาคาถา (บาลี):</label>\n                        <textarea name=\"katha_pali\" value={editingKatha.katha_pali} onChange={handleEditChange} rows=\"6\" required />\n                        <label>จำนวนธาตุ:</label>\n                        <input type=\"number\" name=\"dhatu_count\" value={editingKatha.dhatu_count} onChange={handleEditChange} required />\n                        <label>ประเภทคาถา:</label>\n                        <select name=\"katha_type\" value={editingKatha.katha_type} onChange={handleEditChange}>\n                            <option value=\"pathyavatta\">คาถาปัฐยาวัตร (2/4 บาท)</option>\n                            <option value=\"pathyavatta-6\">คาถาปัฐยาวัตร (6 บาท)</option>",
        "detail": "scripts.refactor_admin_forms_part1",
        "documentation": {}
    },
    {
        "label": "new_form",
        "kind": 5,
        "importPath": "scripts.refactor_admin_forms_part1",
        "description": "scripts.refactor_admin_forms_part1",
        "peekOfCode": "new_form = \"\"\"                    <form onSubmit={handleUpdate}>\n                        <h3>แก้ไขคาถาที่: {editingKatha.katha_no}</h3>\n                        <div className=\"form-grid\">\n                            <div className=\"form-column\">\n                                <label>เลขคาถา (แก้ไขไม่ได้):</label>\n                                <input type=\"number\" value={editingKatha.katha_no} readOnly className=\"readonly-input\" />\n                                <label>จำนวนธาตุ:</label>\n                                <input type=\"number\" name=\"dhatu_count\" value={editingKatha.dhatu_count} onChange={handleEditChange} required />\n                                <label>ประเภทคาถา:</label>\n                                <select name=\"katha_type\" value={editingKatha.katha_type} onChange={handleEditChange}>",
        "detail": "scripts.refactor_admin_forms_part1",
        "documentation": {}
    },
    {
        "label": "add_dhatu_path",
        "kind": 5,
        "importPath": "scripts.refactor_admin_forms_part1",
        "description": "scripts.refactor_admin_forms_part1",
        "peekOfCode": "add_dhatu_path = 'D:/pali-dhatu-app/src/components/AddDhatuForm.js'\nwith open(add_dhatu_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# I'll need to match a larger block or be clever. The file read earlier shows the form is inside `return`.\n# I will use a simple regex-like replacement or just find the block if it's contiguous.\n# The `return` block in `AddDhatuForm.js` (lines 94+) is simpler to just replace entirely if I construct it right.\n# Let's try to replace the whole `return` statement block.\n# Actually, the file content I read earlier ends at line 100. I need to be careful.\n# I'll read the full file first to be safe.\npass",
        "detail": "scripts.refactor_admin_forms_part1",
        "documentation": {}
    },
    {
        "label": "search_page_path",
        "kind": 5,
        "importPath": "scripts.refine_search_ui",
        "description": "scripts.refine_search_ui",
        "peekOfCode": "search_page_path = r\"D:\\pali-dhatu-app\\src\\pages\\SearchPage.js\"\nwith open(search_page_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Fix the parens issue: Only show parens if arth_pali exists\nold_span = \"\"\"<span className=\"pali-meaning\">({dhatu.arth_pali})</span>\"\"\"\nnew_span = \"\"\"{dhatu.arth_pali ? <span className=\"pali-meaning\">({dhatu.arth_pali})</span> : null}\"\"\"\nif old_span in content:\n    content = content.replace(old_span, new_span)\n    print(\"Fixed empty parens issue.\")\n    with open(search_page_path, 'w', encoding='utf-8') as f:",
        "detail": "scripts.refine_search_ui",
        "documentation": {}
    },
    {
        "label": "old_span",
        "kind": 5,
        "importPath": "scripts.refine_search_ui",
        "description": "scripts.refine_search_ui",
        "peekOfCode": "old_span = \"\"\"<span className=\"pali-meaning\">({dhatu.arth_pali})</span>\"\"\"\nnew_span = \"\"\"{dhatu.arth_pali ? <span className=\"pali-meaning\">({dhatu.arth_pali})</span> : null}\"\"\"\nif old_span in content:\n    content = content.replace(old_span, new_span)\n    print(\"Fixed empty parens issue.\")\n    with open(search_page_path, 'w', encoding='utf-8') as f:\n        f.write(content)\nelse:\n    print(\"Pattern not found (maybe already fixed or different format).\")",
        "detail": "scripts.refine_search_ui",
        "documentation": {}
    },
    {
        "label": "new_span",
        "kind": 5,
        "importPath": "scripts.refine_search_ui",
        "description": "scripts.refine_search_ui",
        "peekOfCode": "new_span = \"\"\"{dhatu.arth_pali ? <span className=\"pali-meaning\">({dhatu.arth_pali})</span> : null}\"\"\"\nif old_span in content:\n    content = content.replace(old_span, new_span)\n    print(\"Fixed empty parens issue.\")\n    with open(search_page_path, 'w', encoding='utf-8') as f:\n        f.write(content)\nelse:\n    print(\"Pattern not found (maybe already fixed or different format).\")",
        "detail": "scripts.refine_search_ui",
        "documentation": {}
    },
    {
        "label": "footer_path",
        "kind": 5,
        "importPath": "scripts.remove_footer_text",
        "description": "scripts.remove_footer_text",
        "peekOfCode": "footer_path = r\"D:\\pali-dhatu-app\\src\\components\\Footer.js\"\nwith open(footer_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Remove the paragraph with copyright\nold_p = \"\"\"<p>&copy; 2025 คลังธาตุบาลี. สงวนลิขสิทธิ์.</p>\"\"\"\nnew_p = \"\"\"{/* <p>&copy; 2025 คลังธาตุบาลี. สงวนลิขสิทธิ์.</p> */}\"\"\" \n# Or just empty string if we want to remove it completely from view.\n# The user said \"remove it\", so let's just make the footer content empty or minimal.\nnew_content = \"\"\"// src/components/Footer.js\nimport React from 'react';",
        "detail": "scripts.remove_footer_text",
        "documentation": {}
    },
    {
        "label": "old_p",
        "kind": 5,
        "importPath": "scripts.remove_footer_text",
        "description": "scripts.remove_footer_text",
        "peekOfCode": "old_p = \"\"\"<p>&copy; 2025 คลังธาตุบาลี. สงวนลิขสิทธิ์.</p>\"\"\"\nnew_p = \"\"\"{/* <p>&copy; 2025 คลังธาตุบาลี. สงวนลิขสิทธิ์.</p> */}\"\"\" \n# Or just empty string if we want to remove it completely from view.\n# The user said \"remove it\", so let's just make the footer content empty or minimal.\nnew_content = \"\"\"// src/components/Footer.js\nimport React from 'react';\nfunction Footer() {\n  return (\n    <footer className=\"App-footer\">\n      {/* Footer content removed as per request */}",
        "detail": "scripts.remove_footer_text",
        "documentation": {}
    },
    {
        "label": "new_p",
        "kind": 5,
        "importPath": "scripts.remove_footer_text",
        "description": "scripts.remove_footer_text",
        "peekOfCode": "new_p = \"\"\"{/* <p>&copy; 2025 คลังธาตุบาลี. สงวนลิขสิทธิ์.</p> */}\"\"\" \n# Or just empty string if we want to remove it completely from view.\n# The user said \"remove it\", so let's just make the footer content empty or minimal.\nnew_content = \"\"\"// src/components/Footer.js\nimport React from 'react';\nfunction Footer() {\n  return (\n    <footer className=\"App-footer\">\n      {/* Footer content removed as per request */}\n    </footer>",
        "detail": "scripts.remove_footer_text",
        "documentation": {}
    },
    {
        "label": "new_content",
        "kind": 5,
        "importPath": "scripts.remove_footer_text",
        "description": "scripts.remove_footer_text",
        "peekOfCode": "new_content = \"\"\"// src/components/Footer.js\nimport React from 'react';\nfunction Footer() {\n  return (\n    <footer className=\"App-footer\">\n      {/* Footer content removed as per request */}\n    </footer>\n  );\n}\nexport default Footer;\"\"\"",
        "detail": "scripts.remove_footer_text",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.remove_unused_loading",
        "description": "scripts.remove_unused_loading",
        "peekOfCode": "file_path = r\"D:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js\"\nwith open(file_path, \"r\", encoding=\"utf-8\") as f:\n    content = f.read()\n# 1. Remove `const [loading, setLoading] = useState(true);`\ncontent = content.replace(\"    const [loading, setLoading] = useState(true);\", \"\")\n# 2. Remove `setLoading(false);`\ncontent = content.replace(\"            setLoading(false);\", \"\")\n# 3. Clean up empty lines if any (simple approach)\ncontent = re.sub(r'\\n\\s*\\n\\s*\\n', '\\n\\n', content)\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:",
        "detail": "scripts.remove_unused_loading",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.remove_unused_loading",
        "description": "scripts.remove_unused_loading",
        "peekOfCode": "content = content.replace(\"    const [loading, setLoading] = useState(true);\", \"\")\n# 2. Remove `setLoading(false);`\ncontent = content.replace(\"            setLoading(false);\", \"\")\n# 3. Clean up empty lines if any (simple approach)\ncontent = re.sub(r'\\n\\s*\\n\\s*\\n', '\\n\\n', content)\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)\nprint(\"Removed unused loading state.\")",
        "detail": "scripts.remove_unused_loading",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.remove_unused_loading",
        "description": "scripts.remove_unused_loading",
        "peekOfCode": "content = content.replace(\"            setLoading(false);\", \"\")\n# 3. Clean up empty lines if any (simple approach)\ncontent = re.sub(r'\\n\\s*\\n\\s*\\n', '\\n\\n', content)\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)\nprint(\"Removed unused loading state.\")",
        "detail": "scripts.remove_unused_loading",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.remove_unused_loading",
        "description": "scripts.remove_unused_loading",
        "peekOfCode": "content = re.sub(r'\\n\\s*\\n\\s*\\n', '\\n\\n', content)\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)\nprint(\"Removed unused loading state.\")",
        "detail": "scripts.remove_unused_loading",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.restore_dhatu_tags",
        "description": "scripts.restore_dhatu_tags",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# We need to insert the missing closing tags before the next section.\n# The next section starts with <div className=\"detail-card full-width\"> containing \"อุทาหรณ์ (ตัวอย่างการใช้)\"\ntarget = '<div className=\"detail-card full-width\">\\n              <h2>อุทาหรณ์ (ตัวอย่างการใช้)</h2>'\nmissing_tags = \"\"\"                            </div>\n                        </div>\n                    );\n                  })}",
        "detail": "scripts.restore_dhatu_tags",
        "documentation": {}
    },
    {
        "label": "target",
        "kind": 5,
        "importPath": "scripts.restore_dhatu_tags",
        "description": "scripts.restore_dhatu_tags",
        "peekOfCode": "target = '<div className=\"detail-card full-width\">\\n              <h2>อุทาหรณ์ (ตัวอย่างการใช้)</h2>'\nmissing_tags = \"\"\"                            </div>\n                        </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\"\"\"\nif target in content:",
        "detail": "scripts.restore_dhatu_tags",
        "documentation": {}
    },
    {
        "label": "missing_tags",
        "kind": 5,
        "importPath": "scripts.restore_dhatu_tags",
        "description": "scripts.restore_dhatu_tags",
        "peekOfCode": "missing_tags = \"\"\"                            </div>\n                        </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\"\"\"\nif target in content:\n    content = content.replace(target, missing_tags + \"            \" + target)",
        "detail": "scripts.restore_dhatu_tags",
        "documentation": {}
    },
    {
        "label": "load_data",
        "kind": 2,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "def load_data():\n    if os.path.exists(OUTPUT_FILE):\n        try:\n            with open(OUTPUT_FILE, 'r', encoding='utf-8') as f:\n                return json.load(f)\n        except json.JSONDecodeError:\n            return {}\n    return {}\ndef save_data(data):\n    with open(OUTPUT_FILE, 'w', encoding='utf-8') as f:",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "save_data",
        "kind": 2,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "def save_data(data):\n    with open(OUTPUT_FILE, 'w', encoding='utf-8') as f:\n        json.dump(data, f, ensure_ascii=False, indent=2)\ndef extract_text(soup, selector):\n    element = soup.select_one(selector)\n    if element:\n        # Get text, preserving newlines for readability if needed, but mostly we want clean text\n        return element.get_text(separator=' ', strip=True)\n    return \"\"\ndef scrape_details():",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "extract_text",
        "kind": 2,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "def extract_text(soup, selector):\n    element = soup.select_one(selector)\n    if element:\n        # Get text, preserving newlines for readability if needed, but mostly we want clean text\n        return element.get_text(separator=' ', strip=True)\n    return \"\"\ndef scrape_details():\n    # Load links\n    with open(INPUT_FILE, 'r', encoding='utf-8') as f:\n        links = json.load(f)",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "scrape_details",
        "kind": 2,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "def scrape_details():\n    # Load links\n    with open(INPUT_FILE, 'r', encoding='utf-8') as f:\n        links = json.load(f)\n    # Load existing progress\n    scraped_data = load_data()\n    print(f\"Total links to scrape: {len(links)}\")\n    print(f\"Already scraped: {len(scraped_data)}\")\n    count = 0\n    for item in links:",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "convert_to_vocab_format",
        "kind": 2,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "def convert_to_vocab_format(raw_data):\n    print(\"Converting to vocab-roots structure...\")\n    vocab_roots = {}\n    for url, entry in raw_data.items():\n        root = entry['root']\n        # Remove URL from final object if not needed, or keep it. User didn't ask for URL but useful for ref.\n        # Clean entry for final output\n        clean_entry = {k: v for k, v in entry.items() if k != 'url'}\n        if root not in vocab_roots:\n            vocab_roots[root] = []",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "INPUT_FILE",
        "kind": 5,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "INPUT_FILE = 'data/root_links.json'\nOUTPUT_FILE = 'data/scraped_roots_raw.json'\nHEADERS = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n}\nSAVE_INTERVAL = 5\nLIMIT = None\ndef load_data():\n    if os.path.exists(OUTPUT_FILE):\n        try:",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "OUTPUT_FILE",
        "kind": 5,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "OUTPUT_FILE = 'data/scraped_roots_raw.json'\nHEADERS = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n}\nSAVE_INTERVAL = 5\nLIMIT = None\ndef load_data():\n    if os.path.exists(OUTPUT_FILE):\n        try:\n            with open(OUTPUT_FILE, 'r', encoding='utf-8') as f:",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "HEADERS",
        "kind": 5,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "HEADERS = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n}\nSAVE_INTERVAL = 5\nLIMIT = None\ndef load_data():\n    if os.path.exists(OUTPUT_FILE):\n        try:\n            with open(OUTPUT_FILE, 'r', encoding='utf-8') as f:\n                return json.load(f)",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "SAVE_INTERVAL",
        "kind": 5,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "SAVE_INTERVAL = 5\nLIMIT = None\ndef load_data():\n    if os.path.exists(OUTPUT_FILE):\n        try:\n            with open(OUTPUT_FILE, 'r', encoding='utf-8') as f:\n                return json.load(f)\n        except json.JSONDecodeError:\n            return {}\n    return {}",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "LIMIT",
        "kind": 5,
        "importPath": "scripts.scrape_root_details",
        "description": "scripts.scrape_root_details",
        "peekOfCode": "LIMIT = None\ndef load_data():\n    if os.path.exists(OUTPUT_FILE):\n        try:\n            with open(OUTPUT_FILE, 'r', encoding='utf-8') as f:\n                return json.load(f)\n        except json.JSONDecodeError:\n            return {}\n    return {}\ndef save_data(data):",
        "detail": "scripts.scrape_root_details",
        "documentation": {}
    },
    {
        "label": "base_url",
        "kind": 5,
        "importPath": "scripts.scrape_root_links",
        "description": "scripts.scrape_root_links",
        "peekOfCode": "base_url = \"https://palidict.com/พจนานุกรมธาตุ\"\nlinks_data = []\n# Assuming max 100 pages based on previous experience (2500 items / 25 per page = 100 pages)\n# I'll check for \"next\" button to stop.\nprint(\"Scraping root links...\")\nfor page in range(101): # 0 to 100\n    url = f\"{base_url}?page={page}\"\n    print(f\"Fetching page {page}...\")\n    try:\n        response = requests.get(url, timeout=10)",
        "detail": "scripts.scrape_root_links",
        "documentation": {}
    },
    {
        "label": "links_data",
        "kind": 5,
        "importPath": "scripts.scrape_root_links",
        "description": "scripts.scrape_root_links",
        "peekOfCode": "links_data = []\n# Assuming max 100 pages based on previous experience (2500 items / 25 per page = 100 pages)\n# I'll check for \"next\" button to stop.\nprint(\"Scraping root links...\")\nfor page in range(101): # 0 to 100\n    url = f\"{base_url}?page={page}\"\n    print(f\"Fetching page {page}...\")\n    try:\n        response = requests.get(url, timeout=10)\n        if response.status_code != 200:",
        "detail": "scripts.scrape_root_links",
        "documentation": {}
    },
    {
        "label": "base_url",
        "kind": 5,
        "importPath": "scripts.scrape_root_links_robust",
        "description": "scripts.scrape_root_links_robust",
        "peekOfCode": "base_url = \"https://palidict.com/พจนานุกรมธาตุ\"\nlinks_data = []\noutput_file = \"data/root_links.json\"\n# Load existing if any\ntry:\n    with open(output_file, \"r\", encoding=\"utf-8\") as f:\n        links_data = json.load(f)\n    print(f\"Loaded {len(links_data)} existing links.\")\nexcept:\n    pass",
        "detail": "scripts.scrape_root_links_robust",
        "documentation": {}
    },
    {
        "label": "links_data",
        "kind": 5,
        "importPath": "scripts.scrape_root_links_robust",
        "description": "scripts.scrape_root_links_robust",
        "peekOfCode": "links_data = []\noutput_file = \"data/root_links.json\"\n# Load existing if any\ntry:\n    with open(output_file, \"r\", encoding=\"utf-8\") as f:\n        links_data = json.load(f)\n    print(f\"Loaded {len(links_data)} existing links.\")\nexcept:\n    pass\nstart_page = len(links_data) // 25",
        "detail": "scripts.scrape_root_links_robust",
        "documentation": {}
    },
    {
        "label": "output_file",
        "kind": 5,
        "importPath": "scripts.scrape_root_links_robust",
        "description": "scripts.scrape_root_links_robust",
        "peekOfCode": "output_file = \"data/root_links.json\"\n# Load existing if any\ntry:\n    with open(output_file, \"r\", encoding=\"utf-8\") as f:\n        links_data = json.load(f)\n    print(f\"Loaded {len(links_data)} existing links.\")\nexcept:\n    pass\nstart_page = len(links_data) // 25\nprint(f\"Starting from page {start_page}...\")",
        "detail": "scripts.scrape_root_links_robust",
        "documentation": {}
    },
    {
        "label": "start_page",
        "kind": 5,
        "importPath": "scripts.scrape_root_links_robust",
        "description": "scripts.scrape_root_links_robust",
        "peekOfCode": "start_page = len(links_data) // 25\nprint(f\"Starting from page {start_page}...\")\nfor page in range(start_page, 155): # Max pages around 155 for 3800 items\n    url = f\"{base_url}?page={page}\"\n    print(f\"Fetching page {page}...\")\n    success = False\n    for attempt in range(3):\n        try:\n            response = requests.get(url, timeout=20)\n            if response.status_code == 200:",
        "detail": "scripts.scrape_root_links_robust",
        "documentation": {}
    },
    {
        "label": "is_compatible",
        "kind": 2,
        "importPath": "scripts.test_compatibility_logic",
        "description": "scripts.test_compatibility_logic",
        "peekOfCode": "def is_compatible(dhatu_group, vocab_ending):\n    # Logic ported from TananuntoRootsPage.js\n    if vocab_ending == \"o\" and \"โอ\" not in dhatu_group:\n        return False\n    if (vocab_ending == \"e\" or vocab_ending == \"aya\") and \"เณ\" not in dhatu_group:\n        return False\n    if vocab_ending == \"ṇā\" and (\"ณุ\" not in dhatu_group and \"นา\" not in dhatu_group):\n        return False\n    if vocab_ending == \"a\":\n        # Strict exclusion: If root is Tan/Cur/Ki/Su, 'a' ending is likely wrong",
        "detail": "scripts.test_compatibility_logic",
        "documentation": {}
    },
    {
        "label": "test_cases",
        "kind": 5,
        "importPath": "scripts.test_compatibility_logic",
        "description": "scripts.test_compatibility_logic",
        "peekOfCode": "test_cases = [\n    # DPD word: karoti (o), Our Dict: Tan (โอ) -> Should Pass\n    {\"dhatu_group\": \"ตน (โอ)\", \"vocab_ending\": \"o\", \"expected\": True, \"desc\": \"karoti (o) vs Tan (O)\"},\n    # DPD word: karoti (o), Our Dict: Bhu (อ) -> Should Fail\n    {\"dhatu_group\": \"ภู (อ)\", \"vocab_ending\": \"o\", \"expected\": False, \"desc\": \"karoti (o) vs Bhu (A)\"},\n    # DPD word: deseti (e), Our Dict: Cur (เณ) -> Should Pass\n    {\"dhatu_group\": \"จุร (เณ)\", \"vocab_ending\": \"e\", \"expected\": True, \"desc\": \"deseti (e) vs Cur (Ne)\"},\n    # DPD word: deseti (e), Our Dict: Tan (โอ) -> Should Fail\n    {\"dhatu_group\": \"ตน (โอ)\", \"vocab_ending\": \"e\", \"expected\": False, \"desc\": \"deseti (e) vs Tan (O)\"},\n    # DPD word: agghati (a), Our Dict: Bhu (อ) -> Should Pass",
        "detail": "scripts.test_compatibility_logic",
        "documentation": {}
    },
    {
        "label": "all_passed",
        "kind": 5,
        "importPath": "scripts.test_compatibility_logic",
        "description": "scripts.test_compatibility_logic",
        "peekOfCode": "all_passed = True\nfor case in test_cases:\n    result = is_compatible(case[\"dhatu_group\"], case[\"vocab_ending\"])\n    status = \"PASS\" if result == case[\"expected\"] else \"FAIL\"\n    if status == \"FAIL\": all_passed = False\n    print(f\"Test: {case['desc']} | Group: {case['dhatu_group']} | Ending: {case['vocab_ending']} -> Result: {result} ({status})\")\nif all_passed:\n    print(\"\\nAll tests passed! Logic confirms strict matching against Our Dictionary.\")\nelse:\n    print(\"\\nSome tests failed.\")",
        "detail": "scripts.test_compatibility_logic",
        "documentation": {}
    },
    {
        "label": "load_vocab_dpd",
        "kind": 2,
        "importPath": "scripts.test_dpd_paccaya",
        "description": "scripts.test_dpd_paccaya",
        "peekOfCode": "def load_vocab_dpd(path):\n    with open(path, 'r', encoding='utf-8') as f:\n        content = f.read()\n        # Remove \"const vocabDPD = \" and \";\"\n        json_str = content.replace(\"const vocabDPD = \", \"\").strip().rstrip(\";\")\n        return json.loads(json_str)\ndef extract_paccaya(construction):\n    # Pattern: Look for the element after the root\n    # e.g., [na > a + √kaṅkh + a] -> root is kaṅkh, next is 'a'\n    # e.g., [√aggh + a + ti] -> root is aggh, next is 'a'",
        "detail": "scripts.test_dpd_paccaya",
        "documentation": {}
    },
    {
        "label": "extract_paccaya",
        "kind": 2,
        "importPath": "scripts.test_dpd_paccaya",
        "description": "scripts.test_dpd_paccaya",
        "peekOfCode": "def extract_paccaya(construction):\n    # Pattern: Look for the element after the root\n    # e.g., [na > a + √kaṅkh + a] -> root is kaṅkh, next is 'a'\n    # e.g., [√aggh + a + ti] -> root is aggh, next is 'a'\n    if not construction:\n        return None\n    # Clean up brackets\n    inner = construction.strip(\"[]\")\n    parts = [p.strip() for p in inner.split(\"+\")]\n    # Find the part with √",
        "detail": "scripts.test_dpd_paccaya",
        "documentation": {}
    },
    {
        "label": "extract_construction",
        "kind": 2,
        "importPath": "scripts.test_extraction",
        "description": "scripts.test_extraction",
        "peekOfCode": "def extract_construction(defn):\n    match = re.search(r'\\[(.*?)\\]', defn)\n    return match.group(1) if match else None\ndef extract_first_suffix(construction):\n    if not construction:\n        return None\n    # Clean up: take the first line if multiple lines (e.g. [A + B\\nC + D])\n    construction = construction.split('\\n')[0]\n    # Split by +\n    parts = construction.split('+')",
        "detail": "scripts.test_extraction",
        "documentation": {}
    },
    {
        "label": "extract_first_suffix",
        "kind": 2,
        "importPath": "scripts.test_extraction",
        "description": "scripts.test_extraction",
        "peekOfCode": "def extract_first_suffix(construction):\n    if not construction:\n        return None\n    # Clean up: take the first line if multiple lines (e.g. [A + B\\nC + D])\n    construction = construction.split('\\n')[0]\n    # Split by +\n    parts = construction.split('+')\n    parts = [p.strip() for p in parts]\n    for i, p in enumerate(parts):\n        # Check for root symbol",
        "detail": "scripts.test_extraction",
        "documentation": {}
    },
    {
        "label": "test_cases",
        "kind": 5,
        "importPath": "scripts.test_extraction",
        "description": "scripts.test_extraction",
        "peekOfCode": "test_cases = [\n    \"(adj) with a flame [√acc + i + ikā + a\\naccikā + a]\",\n    \"(fem) flame [√acc + i]\",\n    \"(adj) eating [√ad + a]\",\n    \"[na > a + √kaṅkh + a]\"\n]\nfor t in test_cases:\n    const = extract_construction(t)\n    suffix = extract_first_suffix(const)\n    print(f\"'{t}' -> Const: '{const}' -> Suffix: '{suffix}'\")",
        "detail": "scripts.test_extraction",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "def update_file(path, old_content, new_content):\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        # Check if the content is already updated (partial check)\n        if new_content in content:\n            print(f\"File {path} is already updated.\")\n            return\n        if old_content in content:\n            updated_content = content.replace(old_content, new_content)",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "base_path",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "base_path = \"d:/pali-dhatu-app/src\"\nadd_dhatu_path = os.path.join(base_path, \"components/AddDhatuForm.js\")\nadd_katha_path = os.path.join(base_path, \"pages/AdminAddKatha.js\")\nuser_manager_path = os.path.join(base_path, \"components/UserManager.js\")\ndef update_file(path, old_content, new_content):\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        # Check if the content is already updated (partial check)\n        if new_content in content:",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "add_dhatu_path",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "add_dhatu_path = os.path.join(base_path, \"components/AddDhatuForm.js\")\nadd_katha_path = os.path.join(base_path, \"pages/AdminAddKatha.js\")\nuser_manager_path = os.path.join(base_path, \"components/UserManager.js\")\ndef update_file(path, old_content, new_content):\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        # Check if the content is already updated (partial check)\n        if new_content in content:\n            print(f\"File {path} is already updated.\")",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "add_katha_path",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "add_katha_path = os.path.join(base_path, \"pages/AdminAddKatha.js\")\nuser_manager_path = os.path.join(base_path, \"components/UserManager.js\")\ndef update_file(path, old_content, new_content):\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        # Check if the content is already updated (partial check)\n        if new_content in content:\n            print(f\"File {path} is already updated.\")\n            return",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "user_manager_path",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "user_manager_path = os.path.join(base_path, \"components/UserManager.js\")\ndef update_file(path, old_content, new_content):\n    try:\n        with open(path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        # Check if the content is already updated (partial check)\n        if new_content in content:\n            print(f\"File {path} is already updated.\")\n            return\n        if old_content in content:",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "add_dhatu_old",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "add_dhatu_old = \"\"\"  return (\n    <div className=\"add-dhatu-form-container\">\n      <div className=\"latest-dhatu-info\">\n        {latestDhatu ? (\n          <p>ธาตุล่าสุด: <strong>{latestDhatu.dhatu_word}</strong> (ลำดับที่: <strong>{latestDhatu.anukrom_dhatu}</strong>)</p>\n        ) : (\n          <p>ยังไม่มีข้อมูลในระบบ</p>\n        )}\n      </div>\n      <h4>เพิ่มธาตุใหม่โดยตรง</h4>",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "add_dhatu_new",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "add_dhatu_new = \"\"\"  return (\n    <div className=\"add-dhatu-form-container\">\n      <div className=\"latest-dhatu-info\">\n        {latestDhatu ? (\n          <p>ธาตุล่าสุด: <strong>{latestDhatu.dhatu_word}</strong> (ลำดับที่: <strong>{latestDhatu.anukrom_dhatu}</strong>)</p>\n        ) : (\n          <p>ยังไม่มีข้อมูลในระบบ</p>\n        )}\n      </div>\n      <h4>เพิ่มธาตุใหม่โดยตรง</h4>",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "add_katha_old",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "add_katha_old = \"\"\"            <div className=\"add-dhatu-form-container\" style={{ maxWidth: '600px', margin: '20px 0' }}>\n                <form onSubmit={handleSubmit}>\n                    <label>เลขคาถา (สร้างอัตโนมัติ):</label>\n                    {/* *** 4. เพิ่ม readOnly และ className *** */}\n                    <input type=\"number\" name=\"katha_no\" value={formData.katha_no} onChange={handleChange} required readOnly className=\"readonly-input\" />\n                    <label>เนื้อหาคาถา (บาลี):</label>\n                    <textarea name=\"katha_pali\" value={formData.katha_pali} onChange={handleChange} rows=\"6\" required />\n                    <label>จำนวนธาตุ:</label>\n                    <input type=\"number\" name=\"dhatu_count\" value={formData.dhatu_count} onChange={handleChange} required />\n                    <label>ประเภทคาถา:</label>",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "add_katha_new",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "add_katha_new = \"\"\"            <div className=\"add-dhatu-form-container\" style={{ maxWidth: '100%', margin: '20px 0' }}>\n                <form onSubmit={handleSubmit}>\n                    <div className=\"form-grid\">\n                        <div className=\"form-column\">\n                            <label>เลขคาถา (สร้างอัตโนมัติ):</label>\n                            <input type=\"number\" name=\"katha_no\" value={formData.katha_no} onChange={handleChange} required readOnly className=\"readonly-input\" />\n                            <label>จำนวนธาตุ:</label>\n                            <input type=\"number\" name=\"dhatu_count\" value={formData.dhatu_count} onChange={handleChange} required />\n                            <label>ประเภทคาถา:</label>\n                            <select name=\"katha_type\" value={formData.katha_type} onChange={handleChange}>",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "user_manager_old",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "user_manager_old = \"\"\"  return (\n    <div className=\"user-manager-container\">\n      <h4>จัดการผู้ดูแลระบบ (Admin)</h4>\n      <p>ส่วนนี้สำหรับเพิ่มผู้ดูแลระบบคนใหม่ (ต้องใช้ Firebase Functions)</p>\n      <form onSubmit={handleAddAdmin} className=\"center-form\"> {/* เอา edit-form และ style ออก */}\n        <label>อีเมล Admin ใหม่:</label>\n        <input\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "user_manager_new",
        "kind": 5,
        "importPath": "scripts.update_admin_forms",
        "description": "scripts.update_admin_forms",
        "peekOfCode": "user_manager_new = \"\"\"  return (\n    <div className=\"add-dhatu-form-container\">\n      <h4>จัดการผู้ดูแลระบบ (Admin)</h4>\n      <p>ส่วนนี้สำหรับเพิ่มผู้ดูแลระบบคนใหม่ (ต้องใช้ Firebase Functions)</p>\n      <form onSubmit={handleAddAdmin}>\n        <label>อีเมล Admin ใหม่:</label>\n        <input\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}",
        "detail": "scripts.update_admin_forms",
        "documentation": {}
    },
    {
        "label": "css_path",
        "kind": 5,
        "importPath": "scripts.update_admin_styles",
        "description": "scripts.update_admin_styles",
        "peekOfCode": "css_path = 'D:/pali-dhatu-app/src/App.css'\ncss_content = \"\"\"\n/* --- Admin Theme (New) --- */\n/* 1. General Admin Page Layout */\n.admin-content h3 {\n  color: #2c3e50;\n  border-bottom: 2px solid #3498db;\n  padding-bottom: 10px;\n  margin-bottom: 25px;\n  font-size: 1.5rem;",
        "detail": "scripts.update_admin_styles",
        "documentation": {}
    },
    {
        "label": "css_content",
        "kind": 5,
        "importPath": "scripts.update_admin_styles",
        "description": "scripts.update_admin_styles",
        "peekOfCode": "css_content = \"\"\"\n/* --- Admin Theme (New) --- */\n/* 1. General Admin Page Layout */\n.admin-content h3 {\n  color: #2c3e50;\n  border-bottom: 2px solid #3498db;\n  padding-bottom: 10px;\n  margin-bottom: 25px;\n  font-size: 1.5rem;\n}",
        "detail": "scripts.update_admin_styles",
        "documentation": {}
    },
    {
        "label": "admin_menu_path",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "admin_menu_path = 'D:/pali-dhatu-app/src/components/AdminMenu.js'\nwith open(admin_menu_path, 'r', encoding='utf-8') as f:\n    menu_content = f.read()\nmenu_old = \"\"\"      <ul>\n        {/* --- กลุ่มเมนู \"สร้างข้อมูลใหม่\" --- */}\n        <li><NavLink to=\"/admin/add-dhatu\"><strong>+ เพิ่มธาตุใหม่</strong></NavLink></li>\n        <li><NavLink to=\"/admin/add-katha\"><strong>+ เพิ่มคาถาใหม่</strong></NavLink></li>\n        <hr />\n        {/* --- กลุ่มเมนู \"จัดการข้อมูล\" --- */}\n        <li><NavLink to=\"/admin/submissions\">จัดการเสนอแนะ</NavLink></li>",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "menu_old",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "menu_old = \"\"\"      <ul>\n        {/* --- กลุ่มเมนู \"สร้างข้อมูลใหม่\" --- */}\n        <li><NavLink to=\"/admin/add-dhatu\"><strong>+ เพิ่มธาตุใหม่</strong></NavLink></li>\n        <li><NavLink to=\"/admin/add-katha\"><strong>+ เพิ่มคาถาใหม่</strong></NavLink></li>\n        <hr />\n        {/* --- กลุ่มเมนู \"จัดการข้อมูล\" --- */}\n        <li><NavLink to=\"/admin/submissions\">จัดการเสนอแนะ</NavLink></li>\n        <li><NavLink to=\"/admin/dhatu-management\">จัดการคลังธาตุ</NavLink></li>\n        <li><NavLink to=\"/admin/katha-management\">จัดการคาถา</NavLink></li>\n        <li><NavLink to=\"/admin/user-management\">จัดการผู้ใช้งาน</NavLink></li>",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "menu_new",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "menu_new = \"\"\"      <ul className=\"admin-menu-list\">\n        <li className=\"menu-section-title\">ส่วนเพิ่มข้อมูล</li>\n        <li><NavLink to=\"/admin/add-dhatu\" className={({ isActive }) => isActive ? \"active-menu\" : \"\"}> <i className=\"fas fa-plus-circle\"></i> เพิ่มธาตุ</NavLink></li>\n        <li><NavLink to=\"/admin/add-katha\" className={({ isActive }) => isActive ? \"active-menu\" : \"\"}> <i className=\"fas fa-plus-circle\"></i> เพิ่มคาถา</NavLink></li>\n        <li className=\"menu-section-title\">ส่วนแก้ไข/จัดการ</li>\n        {/* ลบเมนูจัดการเสนอแนะออกตามคำขอ */}\n        <li><NavLink to=\"/admin/dhatu-management\" className={({ isActive }) => isActive ? \"active-menu\" : \"\"}> <i className=\"fas fa-database\"></i> จัดการคลังธาตุ</NavLink></li>\n        <li><NavLink to=\"/admin/katha-management\" className={({ isActive }) => isActive ? \"active-menu\" : \"\"}> <i className=\"fas fa-book\"></i> จัดการคาถา</NavLink></li>\n        <li><NavLink to=\"/admin/user-management\" className={({ isActive }) => isActive ? \"active-menu\" : \"\"}> <i className=\"fas fa-users\"></i> จัดการผู้ใช้งาน</NavLink></li>\n        <li className=\"menu-separator\"></li>",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "app_js_path",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "app_js_path = 'D:/pali-dhatu-app/src/App.js'\nwith open(app_js_path, 'r', encoding='utf-8') as f:\n    app_content = f.read()\napp_old = \"\"\"            {/* Admin Routes */}\n            <Route path=\"/admin\" element={<AdminLayout />}>\n              <Route index element={<AdminSubmissions />} />\n              <Route path=\"submissions\" element={<AdminSubmissions />} />\n              <Route path=\"dhatu-management\" element={<AdminDhatuManagement />} />\"\"\"\napp_new = \"\"\"            {/* Admin Routes */}\n            <Route path=\"/admin\" element={<AdminLayout />}>",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "app_old",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "app_old = \"\"\"            {/* Admin Routes */}\n            <Route path=\"/admin\" element={<AdminLayout />}>\n              <Route index element={<AdminSubmissions />} />\n              <Route path=\"submissions\" element={<AdminSubmissions />} />\n              <Route path=\"dhatu-management\" element={<AdminDhatuManagement />} />\"\"\"\napp_new = \"\"\"            {/* Admin Routes */}\n            <Route path=\"/admin\" element={<AdminLayout />}>\n              <Route index element={<AdminDhatuManagement />} />\n              {/* <Route path=\"submissions\" element={<AdminSubmissions />} /> */}\n              <Route path=\"dhatu-management\" element={<AdminDhatuManagement />} />\"\"\"",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "app_new",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "app_new = \"\"\"            {/* Admin Routes */}\n            <Route path=\"/admin\" element={<AdminLayout />}>\n              <Route index element={<AdminDhatuManagement />} />\n              {/* <Route path=\"submissions\" element={<AdminSubmissions />} /> */}\n              <Route path=\"dhatu-management\" element={<AdminDhatuManagement />} />\"\"\"\nif app_old in app_content:\n    app_content = app_content.replace(app_old, app_new)\n    with open(app_js_path, 'w', encoding='utf-8') as f:\n        f.write(app_content)\n    print(\"Updated App.js\")",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "login_js_path",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "login_js_path = 'D:/pali-dhatu-app/src/components/Login.js'\nwith open(login_js_path, 'r', encoding='utf-8') as f:\n    login_content = f.read()\nlogin_old = \"\"\"  return (\n    <main className=\"Login-container\">\n      <h2>เข้าสู่ระบบสำหรับเจ้าหน้าที่</h2>\n      <form onSubmit={handleLogin} className=\"login-form\">\n        <div className=\"form-group\">\n          <label htmlFor=\"email\">อีเมล:</label>\n          <input",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "login_old",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "login_old = \"\"\"  return (\n    <main className=\"Login-container\">\n      <h2>เข้าสู่ระบบสำหรับเจ้าหน้าที่</h2>\n      <form onSubmit={handleLogin} className=\"login-form\">\n        <div className=\"form-group\">\n          <label htmlFor=\"email\">อีเมล:</label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={email}",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "login_new",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "login_new = \"\"\"  return (\n    <div className=\"login-page-wrapper\">\n      <main className=\"Login-container\">\n        <div className=\"login-header\">\n          <div className=\"login-logo\">☸️</div>\n          <h2>ระบบจัดการคลังธาตุ</h2>\n          <p>เข้าสู่ระบบสำหรับเจ้าหน้าที่ (Admin)</p>\n        </div>\n        <form onSubmit={handleLogin} className=\"login-form\">\n          <div className=\"form-group\">",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "css_path",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "css_path = 'D:/pali-dhatu-app/src/App.css'\ncss_to_append = \"\"\"\n/* --- Admin Login Page --- */\n.login-page-wrapper {\n  min-height: 80vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f0f2f5;\n  padding: 20px;",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "css_to_append",
        "kind": 5,
        "importPath": "scripts.update_admin_ui",
        "description": "scripts.update_admin_ui",
        "peekOfCode": "css_to_append = \"\"\"\n/* --- Admin Login Page --- */\n.login-page-wrapper {\n  min-height: 80vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f0f2f5;\n  padding: 20px;\n}",
        "detail": "scripts.update_admin_ui",
        "documentation": {}
    },
    {
        "label": "css_path",
        "kind": 5,
        "importPath": "scripts.update_app_css",
        "description": "scripts.update_app_css",
        "peekOfCode": "css_path = r\"d:\\pali-dhatu-app\\src\\App.css\"\nnew_css = \"\"\"\n/* Enhanced Derived Words Section */\n.derived-words-section {\n  margin-top: 2rem;\n  background-color: #fff;\n  border-radius: var(--radius);\n  padding: 1.5rem;\n  box-shadow: var(--shadow-sm);\n}",
        "detail": "scripts.update_app_css",
        "documentation": {}
    },
    {
        "label": "new_css",
        "kind": 5,
        "importPath": "scripts.update_app_css",
        "description": "scripts.update_app_css",
        "peekOfCode": "new_css = \"\"\"\n/* Enhanced Derived Words Section */\n.derived-words-section {\n  margin-top: 2rem;\n  background-color: #fff;\n  border-radius: var(--radius);\n  padding: 1.5rem;\n  box-shadow: var(--shadow-sm);\n}\n.derived-section-header {",
        "detail": "scripts.update_app_css",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_app_css_derived",
        "description": "scripts.update_app_css_derived",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\App.css'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\nold_css = '''/* Derived Words Section */\n.derived-words-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 10px;\n}",
        "detail": "scripts.update_app_css_derived",
        "documentation": {}
    },
    {
        "label": "old_css",
        "kind": 5,
        "importPath": "scripts.update_app_css_derived",
        "description": "scripts.update_app_css_derived",
        "peekOfCode": "old_css = '''/* Derived Words Section */\n.derived-words-list {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 10px;\n}\n.derived-word-tag {\n  background-color: #e8f5e9;\n  color: #2e7d32;",
        "detail": "scripts.update_app_css_derived",
        "documentation": {}
    },
    {
        "label": "new_css",
        "kind": 5,
        "importPath": "scripts.update_app_css_derived",
        "description": "scripts.update_app_css_derived",
        "peekOfCode": "new_css = '''/* Derived Words Section (List with Meanings) */\n.derived-words-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-top: 15px;\n}\n.derived-word-item {\n  display: flex;\n  align-items: flex-start;",
        "detail": "scripts.update_app_css_derived",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_app_css_katha",
        "description": "scripts.update_app_css_katha",
        "peekOfCode": "file_path = \"d:/pali-dhatu-app/src/App.css\"\ncss_to_append = \"\"\"\n/* Added for Linear Katha Display */\n.verse-line {\n  font-size: 1.15rem;\n  margin-bottom: 8px;\n  color: #2c3e50;\n  line-height: 1.6;\n}\n\"\"\"",
        "detail": "scripts.update_app_css_katha",
        "documentation": {}
    },
    {
        "label": "css_to_append",
        "kind": 5,
        "importPath": "scripts.update_app_css_katha",
        "description": "scripts.update_app_css_katha",
        "peekOfCode": "css_to_append = \"\"\"\n/* Added for Linear Katha Display */\n.verse-line {\n  font-size: 1.15rem;\n  margin-bottom: 8px;\n  color: #2c3e50;\n  line-height: 1.6;\n}\n\"\"\"\ntry:",
        "detail": "scripts.update_app_css_katha",
        "documentation": {}
    },
    {
        "label": "APP_JS_PATH",
        "kind": 5,
        "importPath": "scripts.update_app_js",
        "description": "scripts.update_app_js",
        "peekOfCode": "APP_JS_PATH = r\"D:\\pali-dhatu-app\\src\\App.js\"\ncontent = \"\"\"\n// src/App.js\nimport './App.css';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Login from './components/Login';\nimport DhatuDetail from './components/DhatuDetail';\nimport SearchPage from './pages/SearchPage';\nimport { AuthProvider } from './contexts/AuthContext';",
        "detail": "scripts.update_app_js",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_app_js",
        "description": "scripts.update_app_js",
        "peekOfCode": "content = \"\"\"\n// src/App.js\nimport './App.css';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Login from './components/Login';\nimport DhatuDetail from './components/DhatuDetail';\nimport SearchPage from './pages/SearchPage';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { ToastContainer } from 'react-toastify';",
        "detail": "scripts.update_app_js",
        "documentation": {}
    },
    {
        "label": "APP_JS_PATH",
        "kind": 5,
        "importPath": "scripts.update_app_js_routes",
        "description": "scripts.update_app_js_routes",
        "peekOfCode": "APP_JS_PATH = r\"D:\\pali-dhatu-app\\src\\App.js\"\ncontent = \"\"\"\n// src/App.js\nimport './App.css';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Login from './components/Login';\nimport DhatuDetail from './components/DhatuDetail';\nimport SearchPage from './pages/SearchPage';\nimport KathaListPage from './pages/KathaListPage'; // Changed from HomePage",
        "detail": "scripts.update_app_js_routes",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_app_js_routes",
        "description": "scripts.update_app_js_routes",
        "peekOfCode": "content = \"\"\"\n// src/App.js\nimport './App.css';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\nimport Login from './components/Login';\nimport DhatuDetail from './components/DhatuDetail';\nimport SearchPage from './pages/SearchPage';\nimport KathaListPage from './pages/KathaListPage'; // Changed from HomePage\nimport { AuthProvider } from './contexts/AuthContext';",
        "detail": "scripts.update_app_js_routes",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_app_routes_v2",
        "description": "scripts.update_app_routes_v2",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\App.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Add Import\nif \"import VocabSearchPage\" not in content:\n    content = content.replace(\n        \"import SearchPage from './pages/SearchPage';\",\n        \"import SearchPage from './pages/SearchPage';\\nimport VocabSearchPage from './pages/VocabSearchPage';\"\n    )\n# 2. Add Route",
        "detail": "scripts.update_app_routes_v2",
        "documentation": {}
    },
    {
        "label": "create_icon",
        "kind": 2,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "def create_icon(size):\n    # Create image with transparent background\n    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))\n    draw = ImageDraw.Draw(img)\n    # Draw rounded rectangle (simulated gradient)\n    # Since complex gradients are hard, we'll use a solid fill with the primary color\n    # or we can try a simple vertical gradient manually, but solid is safer and cleaner.\n    # Rounded corners\n    radius = size // 5\n    draw.rounded_rectangle([(0, 0), (size, size)], radius=radius, fill=LOGO_COLOR)",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "def main():\n    print(\"Generating icons...\")\n    # 1. Generate logo512.png\n    icon512 = create_icon(512)\n    icon512.save(os.path.join(PUBLIC_DIR, \"logo512.png\"))\n    print(\"Saved logo512.png\")\n    # 2. Generate logo192.png\n    icon192 = icon512.resize((192, 192), Image.Resampling.LANCZOS)\n    icon192.save(os.path.join(PUBLIC_DIR, \"logo192.png\"))\n    print(\"Saved logo192.png\")",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "APP_DIR",
        "kind": 5,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "APP_DIR = r\"D:\\pali-dhatu-app\"\nPUBLIC_DIR = os.path.join(APP_DIR, \"public\")\nLOGO_COLOR = (39, 174, 96) # #27ae60\nLOGO_COLOR_2 = (46, 204, 113) # #2ecc71\nTEXT_COLOR = (255, 255, 255)\ndef create_icon(size):\n    # Create image with transparent background\n    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))\n    draw = ImageDraw.Draw(img)\n    # Draw rounded rectangle (simulated gradient)",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "PUBLIC_DIR",
        "kind": 5,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "PUBLIC_DIR = os.path.join(APP_DIR, \"public\")\nLOGO_COLOR = (39, 174, 96) # #27ae60\nLOGO_COLOR_2 = (46, 204, 113) # #2ecc71\nTEXT_COLOR = (255, 255, 255)\ndef create_icon(size):\n    # Create image with transparent background\n    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))\n    draw = ImageDraw.Draw(img)\n    # Draw rounded rectangle (simulated gradient)\n    # Since complex gradients are hard, we'll use a solid fill with the primary color",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "LOGO_COLOR",
        "kind": 5,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "LOGO_COLOR = (39, 174, 96) # #27ae60\nLOGO_COLOR_2 = (46, 204, 113) # #2ecc71\nTEXT_COLOR = (255, 255, 255)\ndef create_icon(size):\n    # Create image with transparent background\n    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))\n    draw = ImageDraw.Draw(img)\n    # Draw rounded rectangle (simulated gradient)\n    # Since complex gradients are hard, we'll use a solid fill with the primary color\n    # or we can try a simple vertical gradient manually, but solid is safer and cleaner.",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "LOGO_COLOR_2",
        "kind": 5,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "LOGO_COLOR_2 = (46, 204, 113) # #2ecc71\nTEXT_COLOR = (255, 255, 255)\ndef create_icon(size):\n    # Create image with transparent background\n    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))\n    draw = ImageDraw.Draw(img)\n    # Draw rounded rectangle (simulated gradient)\n    # Since complex gradients are hard, we'll use a solid fill with the primary color\n    # or we can try a simple vertical gradient manually, but solid is safer and cleaner.\n    # Rounded corners",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "TEXT_COLOR",
        "kind": 5,
        "importPath": "scripts.update_branding",
        "description": "scripts.update_branding",
        "peekOfCode": "TEXT_COLOR = (255, 255, 255)\ndef create_icon(size):\n    # Create image with transparent background\n    img = Image.new('RGBA', (size, size), (0, 0, 0, 0))\n    draw = ImageDraw.Draw(img)\n    # Draw rounded rectangle (simulated gradient)\n    # Since complex gradients are hard, we'll use a solid fill with the primary color\n    # or we can try a simple vertical gradient manually, but solid is safer and cleaner.\n    # Rounded corners\n    radius = size // 5",
        "detail": "scripts.update_branding",
        "documentation": {}
    },
    {
        "label": "app_dir",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "app_dir = r\"D:\\pali-dhatu-app\"\nsrc_dir = os.path.join(app_dir, \"src\")\ncomponents_dir = os.path.join(src_dir, \"components\")\npages_dir = os.path.join(src_dir, \"pages\")\n# 1. Update DhatuDetail.js\ndhatu_detail_path = os.path.join(components_dir, \"DhatuDetail.js\")\ndhatu_detail_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "src_dir",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "src_dir = os.path.join(app_dir, \"src\")\ncomponents_dir = os.path.join(src_dir, \"components\")\npages_dir = os.path.join(src_dir, \"pages\")\n# 1. Update DhatuDetail.js\ndhatu_detail_path = os.path.join(components_dir, \"DhatuDetail.js\")\ndhatu_detail_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "components_dir",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "components_dir = os.path.join(src_dir, \"components\")\npages_dir = os.path.join(src_dir, \"pages\")\n# 1. Update DhatuDetail.js\ndhatu_detail_path = os.path.join(components_dir, \"DhatuDetail.js\")\ndhatu_detail_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction DhatuDetail() {",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "pages_dir",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "pages_dir = os.path.join(src_dir, \"pages\")\n# 1. Update DhatuDetail.js\ndhatu_detail_path = os.path.join(components_dir, \"DhatuDetail.js\")\ndhatu_detail_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction DhatuDetail() {\n  const { id } = useParams();",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "dhatu_detail_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "dhatu_detail_path = os.path.join(components_dir, \"DhatuDetail.js\")\ndhatu_detail_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction DhatuDetail() {\n  const { id } = useParams();\n  const [dhatu, setDhatu] = useState(null);\n  const [loading, setLoading] = useState(true);",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "dhatu_detail_content",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "dhatu_detail_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction DhatuDetail() {\n  const { id } = useParams();\n  const [dhatu, setDhatu] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "principles_page_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "principles_page_path = os.path.join(pages_dir, \"PrinciplesPage.js\")\nprinciples_page_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc, collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction PrinciplesPage() {\n    const { groupCode } = useParams();\n    const [content, setContent] = useState(null);\n    const [list, setList] = useState([]);",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "principles_page_content",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "principles_page_content = \"\"\"import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { doc, getDoc, collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction PrinciplesPage() {\n    const { groupCode } = useParams();\n    const [content, setContent] = useState(null);\n    const [list, setList] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "app_js_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "app_js_path = os.path.join(src_dir, \"App.js\")\nwith open(app_js_path, \"r\", encoding=\"utf-8\") as f:\n    app_js_content = f.read()\n# Add the new route if not exists\nnew_route = '<Route path=\"/principles/:groupCode\" element={<PrinciplesPage />} />'\nif new_route not in app_js_content:\n    old_route = '<Route path=\"/principles\" element={<PrinciplesPage />} />'\n    if old_route in app_js_content:\n        app_js_content = app_js_content.replace(old_route, old_route + '\\n            ' + new_route)\n        with open(app_js_path, \"w\", encoding=\"utf-8\") as f:",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "new_route",
        "kind": 5,
        "importPath": "scripts.update_dhatu_app",
        "description": "scripts.update_dhatu_app",
        "peekOfCode": "new_route = '<Route path=\"/principles/:groupCode\" element={<PrinciplesPage />} />'\nif new_route not in app_js_content:\n    old_route = '<Route path=\"/principles\" element={<PrinciplesPage />} />'\n    if old_route in app_js_content:\n        app_js_content = app_js_content.replace(old_route, old_route + '\\n            ' + new_route)\n        with open(app_js_path, \"w\", encoding=\"utf-8\") as f:\n            f.write(app_js_content)\n        print(f\"Updated {app_js_path}\")\n    else:\n        print(\"Could not find anchor to patch App.js\")",
        "detail": "scripts.update_dhatu_app",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.update_dhatu_detail",
        "description": "scripts.update_dhatu_detail",
        "peekOfCode": "def main():\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    if OLD_CODE in content:\n        new_content = content.replace(OLD_CODE, NEW_CODE)\n        with open(FILE_PATH, 'w', encoding='utf-8') as f:\n            f.write(new_content)\n        print(\"Successfully updated DhatuDetail.js\")\n    else:\n        print(\"Could not find code block to replace\")",
        "detail": "scripts.update_dhatu_detail",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail",
        "description": "scripts.update_dhatu_detail",
        "peekOfCode": "FILE_PATH = r\"d:\\pali-dhatu-app\\src\\components\\DhatuDetail.js\"\nOLD_CODE = \"\"\"                            <div className=\"derived-word-header\">\n                                <span className=\"derived-word-thai\">{thaiWord}</span>\n                                <span className=\"derived-word-roman\">{word}</span>\n                            </div>\"\"\"\nNEW_CODE = \"\"\"                            <div className=\"derived-word-header\">\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                                    <span className=\"derived-word-thai\">{thaiWord}</span>\n                                    <span className=\"derived-word-roman\">{word}</span>\n                                </div>",
        "detail": "scripts.update_dhatu_detail",
        "documentation": {}
    },
    {
        "label": "OLD_CODE",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail",
        "description": "scripts.update_dhatu_detail",
        "peekOfCode": "OLD_CODE = \"\"\"                            <div className=\"derived-word-header\">\n                                <span className=\"derived-word-thai\">{thaiWord}</span>\n                                <span className=\"derived-word-roman\">{word}</span>\n                            </div>\"\"\"\nNEW_CODE = \"\"\"                            <div className=\"derived-word-header\">\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                                    <span className=\"derived-word-thai\">{thaiWord}</span>\n                                    <span className=\"derived-word-roman\">{word}</span>\n                                </div>\n                                <a ",
        "detail": "scripts.update_dhatu_detail",
        "documentation": {}
    },
    {
        "label": "NEW_CODE",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail",
        "description": "scripts.update_dhatu_detail",
        "peekOfCode": "NEW_CODE = \"\"\"                            <div className=\"derived-word-header\">\n                                <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\n                                    <span className=\"derived-word-thai\">{thaiWord}</span>\n                                    <span className=\"derived-word-roman\">{word}</span>\n                                </div>\n                                <a \n                                    href={`https://www.dpdict.net/gd?search=${word}`} \n                                    target=\"_blank\" \n                                    rel=\"noopener noreferrer\"\n                                    title=\"ดูใน dpdict.net\"",
        "detail": "scripts.update_dhatu_detail",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Add Helper Functions (outside component or inside, but before return)\n# We will insert them before the component function for cleanliness, or just inside.\n# Let's insert them before \"function DhatuDetail() {\"\nhelper_code = \"\"\"\nconst sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธนานันท์', color: '#2980b9', icon: 'fas fa-user-tie' },",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "helper_code",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "helper_code = \"\"\"\nconst sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธนานันท์', color: '#2980b9', icon: 'fas fa-user-tie' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#e67e22', icon: 'fas fa-globe' }\n};\nconst parseMeaning = (text) => {\n    if (!text) return [];\n    // Split by separator if multiple sources exist",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "old_jsx_start",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "old_jsx_start = \"{/* Derived Words Section (DPD) */}\"\n# We need to find the matching closing brace for the condition block. \n# The block is:\n# {derivedWords && derivedWords.length > 0 && (\n#   <div className=\"detail-card full-width\">\n#     ...\n#   </div>\n# )}\n# Since regex replacement across multiple lines can be tricky with nested braces, \n# I will use a known unique substring to identify the block and replace it carefully.",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "block_signature",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "block_signature = \"\"\"{derivedWords && derivedWords.length > 0 && (\n              <div className=\"detail-card full-width\">\n                <h2>ศัพท์ที่สร้างจากธาตุนี้ (DPD)</h2>\n                <div className=\"derived-words-list\">\n                  {derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const meaning = vocabDerivedMeanings[thaiWord];\n                    return (\n                        <div key={index} className=\"derived-word-item\">\n                            <span className=\"derived-word-tag\">{thaiWord}</span>",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "new_jsx",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "new_jsx = \"\"\"{/* Derived Words Section (DPD) - Enhanced */}\n            {derivedWords && derivedWords.length > 0 && (\n              <div className=\"derived-words-section\">\n                <div className=\"derived-section-header\">\n                    <div className=\"derived-section-icon\">\n                        <i className=\"fas fa-sitemap\"></i>\n                    </div>\n                    <h2>ศัพท์ที่สร้างจากธาตุนี้ (DPD)</h2>\n                </div>\n                <div className=\"derived-words-list-enhanced\">",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "pattern",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "pattern = r\"\\{\\/\\* Derived Words Section \\(DPD\\) \\*\\/\\}[\\s\\S]*?\\}\\)\\}[\\s\\S]*?\\}\\)\"\n# This regex is risky if there are nested }) that match early.\n# Better approach: Replace the inner <div> content if possible, or use exact string from my previous read.\n# Let's trust the `block_signature` but be careful about whitespace.\n# I will use the exact string I got from `Read` tool.\n# The Read tool output:\nexact_block = \"\"\"            {/* Derived Words Section (DPD) */}\n            {derivedWords && derivedWords.length > 0 && (\n              <div className=\"detail-card full-width\">\n                <h2>ศัพท์ที่สร้างจากธาตุนี้ (DPD)</h2>",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "exact_block",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived",
        "description": "scripts.update_dhatu_detail_derived",
        "peekOfCode": "exact_block = \"\"\"            {/* Derived Words Section (DPD) */}\n            {derivedWords && derivedWords.length > 0 && (\n              <div className=\"detail-card full-width\">\n                <h2>ศัพท์ที่สร้างจากธาตุนี้ (DPD)</h2>\n                <div className=\"derived-words-list\">\n                  {derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const meaning = vocabDerivedMeanings[thaiWord];\n                    return (\n                        <div key={index} className=\"derived-word-item\">",
        "detail": "scripts.update_dhatu_detail_derived",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived_v2",
        "description": "scripts.update_dhatu_detail_derived_v2",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Add Helper Functions\nhelper_code = \"\"\"\nconst sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธนานันท์', color: '#2980b9', icon: 'fas fa-user-tie' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#e67e22', icon: 'fas fa-globe' }",
        "detail": "scripts.update_dhatu_detail_derived_v2",
        "documentation": {}
    },
    {
        "label": "helper_code",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived_v2",
        "description": "scripts.update_dhatu_detail_derived_v2",
        "peekOfCode": "helper_code = \"\"\"\nconst sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธนานันท์', color: '#2980b9', icon: 'fas fa-user-tie' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#e67e22', icon: 'fas fa-globe' }\n};\nconst parseMeaning = (text) => {\n    if (!text) return [];\n    // Split by separator if multiple sources exist",
        "detail": "scripts.update_dhatu_detail_derived_v2",
        "documentation": {}
    },
    {
        "label": "start_marker",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived_v2",
        "description": "scripts.update_dhatu_detail_derived_v2",
        "peekOfCode": "start_marker = \"{/* Derived Words Section (DPD) */}\"\nend_marker = \"            )}\" # identifying the closing of the condition\nstart_idx = content.find(start_marker)\nif start_idx != -1:\n    # Find the closing tag. It should be the first one after start_idx.\n    # Note: We need to be careful not to match a nested one, but the structure is:\n    # {cond && (\n    #    <div>...</div>\n    # )}\n    # So searching for \"            )}\" (12 spaces + )}) should work if formatting is consistent.",
        "detail": "scripts.update_dhatu_detail_derived_v2",
        "documentation": {}
    },
    {
        "label": "end_marker",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived_v2",
        "description": "scripts.update_dhatu_detail_derived_v2",
        "peekOfCode": "end_marker = \"            )}\" # identifying the closing of the condition\nstart_idx = content.find(start_marker)\nif start_idx != -1:\n    # Find the closing tag. It should be the first one after start_idx.\n    # Note: We need to be careful not to match a nested one, but the structure is:\n    # {cond && (\n    #    <div>...</div>\n    # )}\n    # So searching for \"            )}\" (12 spaces + )}) should work if formatting is consistent.\n    # Let's verify what the file actually has by searching",
        "detail": "scripts.update_dhatu_detail_derived_v2",
        "documentation": {}
    },
    {
        "label": "start_idx",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_derived_v2",
        "description": "scripts.update_dhatu_detail_derived_v2",
        "peekOfCode": "start_idx = content.find(start_marker)\nif start_idx != -1:\n    # Find the closing tag. It should be the first one after start_idx.\n    # Note: We need to be careful not to match a nested one, but the structure is:\n    # {cond && (\n    #    <div>...</div>\n    # )}\n    # So searching for \"            )}\" (12 spaces + )}) should work if formatting is consistent.\n    # Let's verify what the file actually has by searching\n    next_end = content.find(end_marker, start_idx)",
        "detail": "scripts.update_dhatu_detail_derived_v2",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Update Helper Functions (Dictionary Name Change)\n# I need to find the `const sourceMapping` block and replace it.\nold_mapping_start = \"const sourceMapping = {\"\nnew_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#95a5a6', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#95a5a6', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#95a5a6', icon: 'fas fa-leaf' },",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "old_mapping_start",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "old_mapping_start = \"const sourceMapping = {\"\nnew_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#95a5a6', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#95a5a6', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#95a5a6', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#95a5a6', icon: 'fas fa-globe' }\n};\"\"\"\n# Regex replace for the object\npattern_mapping = r\"const sourceMapping = \\{[\\s\\S]*?\\};\"\ncontent = re.sub(pattern_mapping, new_mapping, content)",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "new_mapping",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "new_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#95a5a6', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#95a5a6', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#95a5a6', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#95a5a6', icon: 'fas fa-globe' }\n};\"\"\"\n# Regex replace for the object\npattern_mapping = r\"const sourceMapping = \\{[\\s\\S]*?\\};\"\ncontent = re.sub(pattern_mapping, new_mapping, content)\n# 2. Update the JSX structure for the new \"Faint Box\" design",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "pattern_mapping",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "pattern_mapping = r\"const sourceMapping = \\{[\\s\\S]*?\\};\"\ncontent = re.sub(pattern_mapping, new_mapping, content)\n# 2. Update the JSX structure for the new \"Faint Box\" design\n# Locate the map loop inside derived-words-list-enhanced\n# The block to replace:\n# return (\n#     <div key={index} className=\"derived-word-card\">\n#         ...\n#     </div>\n# );",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "content = re.sub(pattern_mapping, new_mapping, content)\n# 2. Update the JSX structure for the new \"Faint Box\" design\n# Locate the map loop inside derived-words-list-enhanced\n# The block to replace:\n# return (\n#     <div key={index} className=\"derived-word-card\">\n#         ...\n#     </div>\n# );\n# I will replace the entire `derived-words-list-enhanced` content or just the map callback return.",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "start_marker",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "start_marker = \"{derivedWords.map((word, index) => {\"\nend_marker = \"                  })}\" # The closing of the map\nstart_idx = content.find(start_marker)\nif start_idx != -1:\n    end_idx = content.find(end_marker, start_idx) + len(end_marker)\n    new_map_block = \"\"\"{derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const rawMeaning = vocabDerivedMeanings[thaiWord];\n                    const meaningGroups = parseMeaning(rawMeaning);\n                    return (",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "end_marker",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "end_marker = \"                  })}\" # The closing of the map\nstart_idx = content.find(start_marker)\nif start_idx != -1:\n    end_idx = content.find(end_marker, start_idx) + len(end_marker)\n    new_map_block = \"\"\"{derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const rawMeaning = vocabDerivedMeanings[thaiWord];\n                    const meaningGroups = parseMeaning(rawMeaning);\n                    return (\n                        <div key={index} className=\"derived-word-card\">",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "start_idx",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_design_v3",
        "description": "scripts.update_dhatu_detail_design_v3",
        "peekOfCode": "start_idx = content.find(start_marker)\nif start_idx != -1:\n    end_idx = content.find(end_marker, start_idx) + len(end_marker)\n    new_map_block = \"\"\"{derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const rawMeaning = vocabDerivedMeanings[thaiWord];\n                    const meaningGroups = parseMeaning(rawMeaning);\n                    return (\n                        <div key={index} className=\"derived-word-card\">\n                            <div className=\"derived-word-header\">",
        "detail": "scripts.update_dhatu_detail_design_v3",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_meanings",
        "description": "scripts.update_dhatu_detail_meanings",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Add import\nif \"import vocabDerivedMeanings\" not in content:\n    content = content.replace(\n        \"import vocabRootsDPDDerived from '../data/vocab-roots-dpd-derived';\",\n        \"import vocabRootsDPDDerived from '../data/vocab-roots-dpd-derived';\\nimport vocabDerivedMeanings from '../data/vocab-derived-meanings';\"\n    )\n# 2. Update render logic",
        "detail": "scripts.update_dhatu_detail_meanings",
        "documentation": {}
    },
    {
        "label": "old_block",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_meanings",
        "description": "scripts.update_dhatu_detail_meanings",
        "peekOfCode": "old_block = '''                <div className=\"derived-words-list\">\n                  {derivedWords.map((word, index) => (\n                    <span key={index} className=\"derived-word-tag\">{PaliScript.romanToThai(word)}</span>\n                  ))}\n                </div>'''\nnew_block = '''                <div className=\"derived-words-list\">\n                  {derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const meaning = vocabDerivedMeanings[thaiWord];\n                    return (",
        "detail": "scripts.update_dhatu_detail_meanings",
        "documentation": {}
    },
    {
        "label": "new_block",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_meanings",
        "description": "scripts.update_dhatu_detail_meanings",
        "peekOfCode": "new_block = '''                <div className=\"derived-words-list\">\n                  {derivedWords.map((word, index) => {\n                    const thaiWord = PaliScript.romanToThai(word);\n                    const meaning = vocabDerivedMeanings[thaiWord];\n                    return (\n                        <div key={index} className=\"derived-word-item\">\n                            <span className=\"derived-word-tag\">{thaiWord}</span>\n                            {meaning ? (\n                                <span className=\"derived-word-meaning\">{meaning}</span>\n                            ) : (",
        "detail": "scripts.update_dhatu_detail_meanings",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_thai",
        "description": "scripts.update_dhatu_detail_thai",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\nold_str = '<span key={index} className=\"derived-word-tag\">{word}</span>'\nnew_str = '<span key={index} className=\"derived-word-tag\">{PaliScript.romanToThai(word)}</span>'\nif old_str in content:\n    new_content = content.replace(old_str, new_str)\n    with open(file_path, 'w', encoding='utf-8') as f:\n        f.write(new_content)\n    print(\"Updated DhatuDetail.js successfully.\")",
        "detail": "scripts.update_dhatu_detail_thai",
        "documentation": {}
    },
    {
        "label": "old_str",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_thai",
        "description": "scripts.update_dhatu_detail_thai",
        "peekOfCode": "old_str = '<span key={index} className=\"derived-word-tag\">{word}</span>'\nnew_str = '<span key={index} className=\"derived-word-tag\">{PaliScript.romanToThai(word)}</span>'\nif old_str in content:\n    new_content = content.replace(old_str, new_str)\n    with open(file_path, 'w', encoding='utf-8') as f:\n        f.write(new_content)\n    print(\"Updated DhatuDetail.js successfully.\")\nelse:\n    print(\"Target string not found in DhatuDetail.js\")",
        "detail": "scripts.update_dhatu_detail_thai",
        "documentation": {}
    },
    {
        "label": "new_str",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_thai",
        "description": "scripts.update_dhatu_detail_thai",
        "peekOfCode": "new_str = '<span key={index} className=\"derived-word-tag\">{PaliScript.romanToThai(word)}</span>'\nif old_str in content:\n    new_content = content.replace(old_str, new_str)\n    with open(file_path, 'w', encoding='utf-8') as f:\n        f.write(new_content)\n    print(\"Updated DhatuDetail.js successfully.\")\nelse:\n    print(\"Target string not found in DhatuDetail.js\")",
        "detail": "scripts.update_dhatu_detail_thai",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_v2",
        "description": "scripts.update_dhatu_detail_v2",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\components\\DhatuDetail.js\"\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Logic to add\nnew_logic = \"\"\"\n  const getDerivedWords = (roman) => {\n      if (!roman) return null;\n      if (vocabRootsDPDDerived[roman]) return vocabRootsDPDDerived[roman];\n      // Strip final 'a' (common for Thai implicit 'a')\n      if (roman.endsWith('a') && vocabRootsDPDDerived[roman.slice(0, -1)]) {",
        "detail": "scripts.update_dhatu_detail_v2",
        "documentation": {}
    },
    {
        "label": "new_logic",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_v2",
        "description": "scripts.update_dhatu_detail_v2",
        "peekOfCode": "new_logic = \"\"\"\n  const getDerivedWords = (roman) => {\n      if (!roman) return null;\n      if (vocabRootsDPDDerived[roman]) return vocabRootsDPDDerived[roman];\n      // Strip final 'a' (common for Thai implicit 'a')\n      if (roman.endsWith('a') && vocabRootsDPDDerived[roman.slice(0, -1)]) {\n          return vocabRootsDPDDerived[roman.slice(0, -1)];\n      }\n      // Strip final 'i' (common for Thai 'i' ending roots like kakhi -> kakh)\n      if (roman.endsWith('i') && vocabRootsDPDDerived[roman.slice(0, -1)]) {",
        "detail": "scripts.update_dhatu_detail_v2",
        "documentation": {}
    },
    {
        "label": "pattern_start",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_v2",
        "description": "scripts.update_dhatu_detail_v2",
        "peekOfCode": "pattern_start = \"const groupCode = dhatu ? getGroupCode(dhatu.mawat_dhatu) : null;\"\npattern_end = \"const derivedWords = dhatu ? vocabRootsDPDDerived[PaliScript.thaiToRoman(dhatu.dhatu_word)] : null;\"\n# Construct the block to replace\nold_block = pattern_start + \"\\n  \" + pattern_end\nif old_block in content:\n    content = content.replace(old_block, new_logic.strip())\n    print(\"Updated with smart lookup logic\")\nelse:\n    # Fallback search if exact formatting matches\n    # Just replace the two lines we added previously",
        "detail": "scripts.update_dhatu_detail_v2",
        "documentation": {}
    },
    {
        "label": "pattern_end",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_v2",
        "description": "scripts.update_dhatu_detail_v2",
        "peekOfCode": "pattern_end = \"const derivedWords = dhatu ? vocabRootsDPDDerived[PaliScript.thaiToRoman(dhatu.dhatu_word)] : null;\"\n# Construct the block to replace\nold_block = pattern_start + \"\\n  \" + pattern_end\nif old_block in content:\n    content = content.replace(old_block, new_logic.strip())\n    print(\"Updated with smart lookup logic\")\nelse:\n    # Fallback search if exact formatting matches\n    # Just replace the two lines we added previously\n    pass",
        "detail": "scripts.update_dhatu_detail_v2",
        "documentation": {}
    },
    {
        "label": "old_block",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_v2",
        "description": "scripts.update_dhatu_detail_v2",
        "peekOfCode": "old_block = pattern_start + \"\\n  \" + pattern_end\nif old_block in content:\n    content = content.replace(old_block, new_logic.strip())\n    print(\"Updated with smart lookup logic\")\nelse:\n    # Fallback search if exact formatting matches\n    # Just replace the two lines we added previously\n    pass\n# Let's try to locate \"const groupCode\" and replace up to \"const derivedWords\"\nimport re",
        "detail": "scripts.update_dhatu_detail_v2",
        "documentation": {}
    },
    {
        "label": "regex",
        "kind": 5,
        "importPath": "scripts.update_dhatu_detail_v2",
        "description": "scripts.update_dhatu_detail_v2",
        "peekOfCode": "regex = r\"const groupCode = dhatu \\? getGroupCode\\(dhatu\\.mawat_dhatu\\) : null;\\s+const derivedWords = dhatu \\? vocabRootsDPDDerived\\[PaliScript\\.thaiToRoman\\(dhatu\\.dhatu_word\\)\\] : null;\"\nif re.search(regex, content):\n    content = re.sub(regex, new_logic.strip(), content)\n    print(\"Updated with regex\")\nelse:\n    print(\"Could not find the code block to replace\")\nwith open(file_path, 'w', encoding='utf-8') as f:\n    f.write(content)",
        "detail": "scripts.update_dhatu_detail_v2",
        "documentation": {}
    },
    {
        "label": "path",
        "kind": 5,
        "importPath": "scripts.update_functions_node",
        "description": "scripts.update_functions_node",
        "peekOfCode": "path = r\"D:\\pali-dhatu-app\\functions\\package.json\"\nwith open(path, 'r', encoding='utf-8') as f:\n    data = json.load(f)\ndata['engines']['node'] = \"20\"\nwith open(path, 'w', encoding='utf-8') as f:\n    json.dump(data, f, indent=2)\nprint(\"Updated functions/package.json to Node 20\")",
        "detail": "scripts.update_functions_node",
        "documentation": {}
    },
    {
        "label": "data['engines']['node']",
        "kind": 5,
        "importPath": "scripts.update_functions_node",
        "description": "scripts.update_functions_node",
        "peekOfCode": "data['engines']['node'] = \"20\"\nwith open(path, 'w', encoding='utf-8') as f:\n    json.dump(data, f, indent=2)\nprint(\"Updated functions/package.json to Node 20\")",
        "detail": "scripts.update_functions_node",
        "documentation": {}
    },
    {
        "label": "HEADER_JS_PATH",
        "kind": 5,
        "importPath": "scripts.update_header",
        "description": "scripts.update_header",
        "peekOfCode": "HEADER_JS_PATH = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\ncontent = \"\"\"\n// src/components/Header.js\nimport React from 'react';\nimport { Link, NavLink, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { signOut } from 'firebase/auth';\nimport { auth } from '../firebaseConfig';\nfunction Header() {\n  const { currentUser } = useAuth();",
        "detail": "scripts.update_header",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_header",
        "description": "scripts.update_header",
        "peekOfCode": "content = \"\"\"\n// src/components/Header.js\nimport React from 'react';\nimport { Link, NavLink, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { signOut } from 'firebase/auth';\nimport { auth } from '../firebaseConfig';\nfunction Header() {\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();",
        "detail": "scripts.update_header",
        "documentation": {}
    },
    {
        "label": "header_path",
        "kind": 5,
        "importPath": "scripts.update_header_and_app",
        "description": "scripts.update_header_and_app",
        "peekOfCode": "header_path = r\"D:\\pali-dhatu-app\\src\\components\\Header.js\"\napp_path = r\"D:\\pali-dhatu-app\\src\\App.js\"\n# 1. Update Header.js\ntry:\n    with open(header_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Target block to remove\n    target = \"\"\"          <li><NavLink to=\"/flashcards\" style={{color: \"#f39c12\"}}>ทบทวนธาตุ</NavLink></li>\n          <li className=\"nav-separator\">|</li>\n          <li><NavLink to=\"/submit\">เสนอแนะข้อมูล</NavLink></li>",
        "detail": "scripts.update_header_and_app",
        "documentation": {}
    },
    {
        "label": "app_path",
        "kind": 5,
        "importPath": "scripts.update_header_and_app",
        "description": "scripts.update_header_and_app",
        "peekOfCode": "app_path = r\"D:\\pali-dhatu-app\\src\\App.js\"\n# 1. Update Header.js\ntry:\n    with open(header_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Target block to remove\n    target = \"\"\"          <li><NavLink to=\"/flashcards\" style={{color: \"#f39c12\"}}>ทบทวนธาตุ</NavLink></li>\n          <li className=\"nav-separator\">|</li>\n          <li><NavLink to=\"/submit\">เสนอแนะข้อมูล</NavLink></li>\n          <li><NavLink to=\"/about\">เกี่ยวกับ</NavLink></li>",
        "detail": "scripts.update_header_and_app",
        "documentation": {}
    },
    {
        "label": "KATHA_LIST_PATH",
        "kind": 5,
        "importPath": "scripts.update_katha_list",
        "description": "scripts.update_katha_list",
        "peekOfCode": "KATHA_LIST_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\KathaListPage.js\"\ncontent = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport KathaRenderer from '../components/KathaRenderer';\nfunction KathaListPage() {\n    const [kathas, setKathas] = useState([]);",
        "detail": "scripts.update_katha_list",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_katha_list",
        "description": "scripts.update_katha_list",
        "peekOfCode": "content = \"\"\"\nimport React, { useState, useEffect } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport KathaRenderer from '../components/KathaRenderer';\nfunction KathaListPage() {\n    const [kathas, setKathas] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.update_katha_list",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_katha_renderer",
        "description": "scripts.update_katha_renderer",
        "peekOfCode": "file_path = \"d:/pali-dhatu-app/src/components/KathaRenderer.js\"\nold_content = \"\"\"        default:\n            return (\n                <div className=\"katha-linear-display\">\n                    <p>{text}</p>\n                </div>\n            );\"\"\"\nnew_content = \"\"\"        default:\n            return (\n                <div className=\"katha-linear-display\">",
        "detail": "scripts.update_katha_renderer",
        "documentation": {}
    },
    {
        "label": "old_content",
        "kind": 5,
        "importPath": "scripts.update_katha_renderer",
        "description": "scripts.update_katha_renderer",
        "peekOfCode": "old_content = \"\"\"        default:\n            return (\n                <div className=\"katha-linear-display\">\n                    <p>{text}</p>\n                </div>\n            );\"\"\"\nnew_content = \"\"\"        default:\n            return (\n                <div className=\"katha-linear-display\">\n                    {verses.map((verse, index) => (",
        "detail": "scripts.update_katha_renderer",
        "documentation": {}
    },
    {
        "label": "new_content",
        "kind": 5,
        "importPath": "scripts.update_katha_renderer",
        "description": "scripts.update_katha_renderer",
        "peekOfCode": "new_content = \"\"\"        default:\n            return (\n                <div className=\"katha-linear-display\">\n                    {verses.map((verse, index) => (\n                        <div key={index} className=\"verse-line\">{verse}</div>\n                    ))}\n                </div>\n            );\"\"\"\ntry:\n    with open(file_path, 'r', encoding='utf-8') as f:",
        "detail": "scripts.update_katha_renderer",
        "documentation": {}
    },
    {
        "label": "app_css_path",
        "kind": 5,
        "importPath": "scripts.update_katha_v2",
        "description": "scripts.update_katha_v2",
        "peekOfCode": "app_css_path = \"D:/pali-dhatu-app/src/App.css\"\nverse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\n# 1. Update App.css for centering\ntry:\n    with open(app_css_path, 'r', encoding='utf-8') as f:\n        css_content = f.read()\n    new_css_rule = \"\"\"\n.page-header {\n  text-align: center;\n  margin-bottom: 2rem;",
        "detail": "scripts.update_katha_v2",
        "documentation": {}
    },
    {
        "label": "verse_detail_path",
        "kind": 5,
        "importPath": "scripts.update_katha_v2",
        "description": "scripts.update_katha_v2",
        "peekOfCode": "verse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\n# 1. Update App.css for centering\ntry:\n    with open(app_css_path, 'r', encoding='utf-8') as f:\n        css_content = f.read()\n    new_css_rule = \"\"\"\n.page-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}",
        "detail": "scripts.update_katha_v2",
        "documentation": {}
    },
    {
        "label": "file_path_detail",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "file_path_detail = r'd:\\pali-dhatu-app\\src\\components\\DhatuDetail.js'\nwith open(file_path_detail, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Replace the inner part of derived-word-item to support block display\nold_jsx = \"\"\"                        <div key={index} className=\"derived-word-item\">\n                            <span className=\"derived-word-tag\">{thaiWord}</span>\n                            {meaning ? (\n                                <span className=\"derived-word-meaning\">{meaning}</span>\n                            ) : (\n                                <span className=\"derived-word-meaning text-muted\">-</span>",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "old_jsx",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "old_jsx = \"\"\"                        <div key={index} className=\"derived-word-item\">\n                            <span className=\"derived-word-tag\">{thaiWord}</span>\n                            {meaning ? (\n                                <span className=\"derived-word-meaning\">{meaning}</span>\n                            ) : (\n                                <span className=\"derived-word-meaning text-muted\">-</span>\n                            )}\n                        </div>\"\"\"\nnew_jsx = \"\"\"                        <div key={index} className=\"derived-word-item\">\n                            <span className=\"derived-word-tag\">{thaiWord}</span>",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "new_jsx",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "new_jsx = \"\"\"                        <div key={index} className=\"derived-word-item\">\n                            <span className=\"derived-word-tag\">{thaiWord}</span>\n                            {meaning ? (\n                                <div className=\"derived-word-meaning\">{meaning}</div>\n                            ) : (\n                                <div className=\"derived-word-meaning text-muted\">-</div>\n                            )}\n                        </div>\"\"\"\nif old_jsx in content:\n    content = content.replace(old_jsx, new_jsx)",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "file_path_search",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "file_path_search = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\nwith open(file_path_search, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Update the display in VocabSearchPage\nold_p = \"\"\"<p style={{ margin: 0, color: '#555', fontFamily: 'Sarabun' }}>{item.meaning || '-'}</p>\"\"\"\nnew_div = \"\"\"<div style={{ margin: 0, color: '#555', fontFamily: 'Sarabun', whiteSpace: 'pre-wrap', lineHeight: '1.6' }}>{item.meaning || '-'}</div>\"\"\"\ncontent = content.replace(old_p, new_div)\nwith open(file_path_search, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"VocabSearchPage.js updated.\")",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "old_p",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "old_p = \"\"\"<p style={{ margin: 0, color: '#555', fontFamily: 'Sarabun' }}>{item.meaning || '-'}</p>\"\"\"\nnew_div = \"\"\"<div style={{ margin: 0, color: '#555', fontFamily: 'Sarabun', whiteSpace: 'pre-wrap', lineHeight: '1.6' }}>{item.meaning || '-'}</div>\"\"\"\ncontent = content.replace(old_p, new_div)\nwith open(file_path_search, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"VocabSearchPage.js updated.\")\n# 3. Update App.css\nfile_path_css = r'd:\\pali-dhatu-app\\src\\App.css'\ncss_append = \"\"\"\n/* Derived Words Styles - Updated for Full Meanings */",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "new_div",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "new_div = \"\"\"<div style={{ margin: 0, color: '#555', fontFamily: 'Sarabun', whiteSpace: 'pre-wrap', lineHeight: '1.6' }}>{item.meaning || '-'}</div>\"\"\"\ncontent = content.replace(old_p, new_div)\nwith open(file_path_search, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"VocabSearchPage.js updated.\")\n# 3. Update App.css\nfile_path_css = r'd:\\pali-dhatu-app\\src\\App.css'\ncss_append = \"\"\"\n/* Derived Words Styles - Updated for Full Meanings */\n.derived-word-item {",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "content = content.replace(old_p, new_div)\nwith open(file_path_search, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"VocabSearchPage.js updated.\")\n# 3. Update App.css\nfile_path_css = r'd:\\pali-dhatu-app\\src\\App.css'\ncss_append = \"\"\"\n/* Derived Words Styles - Updated for Full Meanings */\n.derived-word-item {\n  display: block;",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "file_path_css",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "file_path_css = r'd:\\pali-dhatu-app\\src\\App.css'\ncss_append = \"\"\"\n/* Derived Words Styles - Updated for Full Meanings */\n.derived-word-item {\n  display: block;\n  background: #f8f9fa;\n  padding: 15px;\n  border-radius: 8px;\n  margin-bottom: 15px;\n  border-left: 4px solid #3498db;",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "css_append",
        "kind": 5,
        "importPath": "scripts.update_meaning_display",
        "description": "scripts.update_meaning_display",
        "peekOfCode": "css_append = \"\"\"\n/* Derived Words Styles - Updated for Full Meanings */\n.derived-word-item {\n  display: block;\n  background: #f8f9fa;\n  padding: 15px;\n  border-radius: 8px;\n  margin-bottom: 15px;\n  border-left: 4px solid #3498db;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);",
        "detail": "scripts.update_meaning_display",
        "documentation": {}
    },
    {
        "label": "path",
        "kind": 5,
        "importPath": "scripts.update_pali_script",
        "description": "scripts.update_pali_script",
        "peekOfCode": "path = r'd:\\pali-dhatu-app\\src\\utils\\PaliScript.js'\nwith open(path, 'r', encoding='utf-8') as f:\n    content = f.read()\nold_str = \"\"\"    romanToThai: function(text) {\n        if (!text) return \"\";\n        const map = {\"\"\"\nnew_str = \"\"\"    romanToThai: function(text) {\n        if (!text) return \"\";\n        // Normalization for Thai Pali conventions (Display)\n        if (text.endsWith('vant')) text = text.slice(0, -4) + 'vantu';",
        "detail": "scripts.update_pali_script",
        "documentation": {}
    },
    {
        "label": "old_str",
        "kind": 5,
        "importPath": "scripts.update_pali_script",
        "description": "scripts.update_pali_script",
        "peekOfCode": "old_str = \"\"\"    romanToThai: function(text) {\n        if (!text) return \"\";\n        const map = {\"\"\"\nnew_str = \"\"\"    romanToThai: function(text) {\n        if (!text) return \"\";\n        // Normalization for Thai Pali conventions (Display)\n        if (text.endsWith('vant')) text = text.slice(0, -4) + 'vantu';\n        if (text.endsWith('mant')) text = text.slice(0, -4) + 'mantu';\n        if (text.endsWith('ar')) text = text.slice(0, -2) + 'u'; // e.g. samavekkhitar -> samavekkhitu\n        const map = {\"\"\"",
        "detail": "scripts.update_pali_script",
        "documentation": {}
    },
    {
        "label": "new_str",
        "kind": 5,
        "importPath": "scripts.update_pali_script",
        "description": "scripts.update_pali_script",
        "peekOfCode": "new_str = \"\"\"    romanToThai: function(text) {\n        if (!text) return \"\";\n        // Normalization for Thai Pali conventions (Display)\n        if (text.endsWith('vant')) text = text.slice(0, -4) + 'vantu';\n        if (text.endsWith('mant')) text = text.slice(0, -4) + 'mantu';\n        if (text.endsWith('ar')) text = text.slice(0, -2) + 'u'; // e.g. samavekkhitar -> samavekkhitu\n        const map = {\"\"\"\nif old_str in content:\n    content = content.replace(old_str, new_str)\n    with open(path, 'w', encoding='utf-8') as f:",
        "detail": "scripts.update_pali_script",
        "documentation": {}
    },
    {
        "label": "update_headers",
        "kind": 2,
        "importPath": "scripts.update_principles_header",
        "description": "scripts.update_principles_header",
        "peekOfCode": "def update_headers():\n    collection_ref = db.collection('grammar_principles')\n    docs = collection_ref.stream()\n    updated_count = 0\n    for doc in docs:\n        data = doc.to_dict()\n        if 'content_html' in data:\n            html = data['content_html']\n            # Regex to find H1 with parenthesis and split it\n            # Pattern: <h1>Text (Subtitle)</h1>",
        "detail": "scripts.update_principles_header",
        "documentation": {}
    },
    {
        "label": "db",
        "kind": 5,
        "importPath": "scripts.update_principles_header",
        "description": "scripts.update_principles_header",
        "peekOfCode": "db = firestore.client()\ndef update_headers():\n    collection_ref = db.collection('grammar_principles')\n    docs = collection_ref.stream()\n    updated_count = 0\n    for doc in docs:\n        data = doc.to_dict()\n        if 'content_html' in data:\n            html = data['content_html']\n            # Regex to find H1 with parenthesis and split it",
        "detail": "scripts.update_principles_header",
        "documentation": {}
    },
    {
        "label": "principles_page_path",
        "kind": 5,
        "importPath": "scripts.update_principles_header_client",
        "description": "scripts.update_principles_header_client",
        "peekOfCode": "principles_page_path = 'D:/pali-dhatu-app/src/pages/PrinciplesPage.js'\nwith open(principles_page_path, 'r', encoding='utf-8') as f:\n    content = f.read()\nold_snippet = \"\"\"                    const docSnap = await getDoc(docRef);\n                    if (docSnap.exists()) {\n                        setContent(docSnap.data());\n                    }\"\"\"\nnew_snippet = \"\"\"                    const docSnap = await getDoc(docRef);\n                    if (docSnap.exists()) {\n                        const data = docSnap.data();",
        "detail": "scripts.update_principles_header_client",
        "documentation": {}
    },
    {
        "label": "old_snippet",
        "kind": 5,
        "importPath": "scripts.update_principles_header_client",
        "description": "scripts.update_principles_header_client",
        "peekOfCode": "old_snippet = \"\"\"                    const docSnap = await getDoc(docRef);\n                    if (docSnap.exists()) {\n                        setContent(docSnap.data());\n                    }\"\"\"\nnew_snippet = \"\"\"                    const docSnap = await getDoc(docRef);\n                    if (docSnap.exists()) {\n                        const data = docSnap.data();\n                        // Format H1 to be 2 lines: Title <br> (Subtitle)\n                        if (data.content_html) {\n                            data.content_html = data.content_html.replace(",
        "detail": "scripts.update_principles_header_client",
        "documentation": {}
    },
    {
        "label": "new_snippet",
        "kind": 5,
        "importPath": "scripts.update_principles_header_client",
        "description": "scripts.update_principles_header_client",
        "peekOfCode": "new_snippet = \"\"\"                    const docSnap = await getDoc(docRef);\n                    if (docSnap.exists()) {\n                        const data = docSnap.data();\n                        // Format H1 to be 2 lines: Title <br> (Subtitle)\n                        if (data.content_html) {\n                            data.content_html = data.content_html.replace(\n                                /<h1>(.*?) \\\\((.*?)\\\\)<\\\\/h1>/,\n                                '<h1>$1<br><span style=\"font-size:0.8em\">($2)</span></h1>'\n                            );\n                        }",
        "detail": "scripts.update_principles_header_client",
        "documentation": {}
    },
    {
        "label": "app_css_path",
        "kind": 5,
        "importPath": "scripts.update_principles_style",
        "description": "scripts.update_principles_style",
        "peekOfCode": "app_css_path = 'D:/pali-dhatu-app/src/App.css'\nprinciples_page_path = 'D:/pali-dhatu-app/src/pages/PrinciplesPage.js'\n# 1. Update PrinciplesPage.js to add 'grammar-content' class\nwith open(principles_page_path, 'r', encoding='utf-8') as f:\n    js_content = f.read()\nif '<div dangerouslySetInnerHTML={{ __html: content.content_html }} />' in js_content:\n    js_content = js_content.replace(\n        '<div dangerouslySetInnerHTML={{ __html: content.content_html }} />',\n        '<div className=\"grammar-content\" dangerouslySetInnerHTML={{ __html: content.content_html }} />'\n    )",
        "detail": "scripts.update_principles_style",
        "documentation": {}
    },
    {
        "label": "principles_page_path",
        "kind": 5,
        "importPath": "scripts.update_principles_style",
        "description": "scripts.update_principles_style",
        "peekOfCode": "principles_page_path = 'D:/pali-dhatu-app/src/pages/PrinciplesPage.js'\n# 1. Update PrinciplesPage.js to add 'grammar-content' class\nwith open(principles_page_path, 'r', encoding='utf-8') as f:\n    js_content = f.read()\nif '<div dangerouslySetInnerHTML={{ __html: content.content_html }} />' in js_content:\n    js_content = js_content.replace(\n        '<div dangerouslySetInnerHTML={{ __html: content.content_html }} />',\n        '<div className=\"grammar-content\" dangerouslySetInnerHTML={{ __html: content.content_html }} />'\n    )\n    with open(principles_page_path, 'w', encoding='utf-8') as f:",
        "detail": "scripts.update_principles_style",
        "documentation": {}
    },
    {
        "label": "grammar_styles",
        "kind": 5,
        "importPath": "scripts.update_principles_style",
        "description": "scripts.update_principles_style",
        "peekOfCode": "grammar_styles = \"\"\"\n/* ===== Grammar Principles Styles (Classroom Theme) ===== */\n.grammar-content {\n  font-family: 'Sarabun', sans-serif;\n  color: #333;\n  line-height: 1.8;\n}\n.grammar-content h1 {\n  font-family: 'Niramit', serif;\n  font-size: 2.2rem;",
        "detail": "scripts.update_principles_style",
        "documentation": {}
    },
    {
        "label": "update_search_page",
        "kind": 2,
        "importPath": "scripts.update_search_logic",
        "description": "scripts.update_search_logic",
        "peekOfCode": "def update_search_page():\n    print(f\"Updating {SEARCH_PAGE_PATH}...\")\n    with open(SEARCH_PAGE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Old Filter Logic\n    old_logic = \"\"\"    // Filter Logic\n    const filteredData = useMemo(() => {\n        return allDhatus.filter(d => {\n            const matchesGroup = selectedGroup === 'all' || (d.mawat_dhatu && d.mawat_dhatu.includes(selectedGroup));\n            const searchLower = searchText.toLowerCase();",
        "detail": "scripts.update_search_logic",
        "documentation": {}
    },
    {
        "label": "update_vocab_page",
        "kind": 2,
        "importPath": "scripts.update_search_logic",
        "description": "scripts.update_search_logic",
        "peekOfCode": "def update_vocab_page():\n    print(f\"Updating {VOCAB_PAGE_PATH}...\")\n    with open(VOCAB_PAGE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # 1. Update Filter Logic\n    old_logic = \"\"\"    const filteredData = useMemo(() => {\n        if (!searchText) return [];\n        const lower = searchText.toLowerCase();\n        return vocabList.filter(item => \n            item.wordThai.includes(lower) || ",
        "detail": "scripts.update_search_logic",
        "documentation": {}
    },
    {
        "label": "SEARCH_PAGE_PATH",
        "kind": 5,
        "importPath": "scripts.update_search_logic",
        "description": "scripts.update_search_logic",
        "peekOfCode": "SEARCH_PAGE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\SearchPage.js'\nVOCAB_PAGE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\ndef update_search_page():\n    print(f\"Updating {SEARCH_PAGE_PATH}...\")\n    with open(SEARCH_PAGE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Old Filter Logic\n    old_logic = \"\"\"    // Filter Logic\n    const filteredData = useMemo(() => {\n        return allDhatus.filter(d => {",
        "detail": "scripts.update_search_logic",
        "documentation": {}
    },
    {
        "label": "VOCAB_PAGE_PATH",
        "kind": 5,
        "importPath": "scripts.update_search_logic",
        "description": "scripts.update_search_logic",
        "peekOfCode": "VOCAB_PAGE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\ndef update_search_page():\n    print(f\"Updating {SEARCH_PAGE_PATH}...\")\n    with open(SEARCH_PAGE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Old Filter Logic\n    old_logic = \"\"\"    // Filter Logic\n    const filteredData = useMemo(() => {\n        return allDhatus.filter(d => {\n            const matchesGroup = selectedGroup === 'all' || (d.mawat_dhatu && d.mawat_dhatu.includes(selectedGroup));",
        "detail": "scripts.update_search_logic",
        "documentation": {}
    },
    {
        "label": "SEARCH_PAGE_PATH",
        "kind": 5,
        "importPath": "scripts.update_search_page",
        "description": "scripts.update_search_page",
        "peekOfCode": "SEARCH_PAGE_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\SearchPage.js\"\ncontent = \"\"\"\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction SearchPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.update_search_page",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_search_page",
        "description": "scripts.update_search_page",
        "peekOfCode": "content = \"\"\"\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nfunction SearchPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchText, setSearchText] = useState('');",
        "detail": "scripts.update_search_page",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_search_page_gap",
        "description": "scripts.update_search_page_gap",
        "peekOfCode": "def update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Target the container div\n    old_container = '<div style={{ marginBottom: \"20px\" }}>'\n    new_container = '<div style={{ marginBottom: \"20px\", display: \"flex\", flexWrap: \"wrap\", gap: \"15px\", justifyContent: \"center\" }}>'\n    # Target the second button's style to remove marginLeft\n    # We need to be careful with matching multi-line strings.\n    # Let's try to match the specific line with marginLeft: '10px'",
        "detail": "scripts.update_search_page_gap",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_search_page_gap",
        "description": "scripts.update_search_page_gap",
        "peekOfCode": "FILE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\SearchPage.js'\ndef update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Target the container div\n    old_container = '<div style={{ marginBottom: \"20px\" }}>'\n    new_container = '<div style={{ marginBottom: \"20px\", display: \"flex\", flexWrap: \"wrap\", gap: \"15px\", justifyContent: \"center\" }}>'\n    # Target the second button's style to remove marginLeft\n    # We need to be careful with matching multi-line strings.",
        "detail": "scripts.update_search_page_gap",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_search_page_title_and_button",
        "description": "scripts.update_search_page_title_and_button",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\pages\\SearchPage.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Update Title\ncontent = content.replace(\n    '<h1>สืบค้นธาตุบาลี</h1>', \n    '<h1>สืบค้นธาตุบาลีและคำศัพท์</h1>'\n)\n# 2. Add Search Button\n# We look for the input field and wrap it or append a button",
        "detail": "scripts.update_search_page_title_and_button",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_search_page_title_and_button",
        "description": "scripts.update_search_page_title_and_button",
        "peekOfCode": "content = content.replace(\n    '<h1>สืบค้นธาตุบาลี</h1>', \n    '<h1>สืบค้นธาตุบาลีและคำศัพท์</h1>'\n)\n# 2. Add Search Button\n# We look for the input field and wrap it or append a button\nold_input_block = \"\"\"                        <input \n                            type=\"text\" \n                            placeholder=\"ค้นหาชื่อธาตุ หรือคำแปล...\" \n                            value={searchText}",
        "detail": "scripts.update_search_page_title_and_button",
        "documentation": {}
    },
    {
        "label": "old_input_block",
        "kind": 5,
        "importPath": "scripts.update_search_page_title_and_button",
        "description": "scripts.update_search_page_title_and_button",
        "peekOfCode": "old_input_block = \"\"\"                        <input \n                            type=\"text\" \n                            placeholder=\"ค้นหาชื่อธาตุ หรือคำแปล...\" \n                            value={searchText}\n                            onChange={(e) => setSearchText(e.target.value)}\n                            className=\"search-input\"\n                        />\"\"\"\nnew_input_block = \"\"\"                        <div className=\"input-group\" style={{ display: 'flex', gap: '8px', width: '100%' }}>\n                            <input \n                                type=\"text\" ",
        "detail": "scripts.update_search_page_title_and_button",
        "documentation": {}
    },
    {
        "label": "new_input_block",
        "kind": 5,
        "importPath": "scripts.update_search_page_title_and_button",
        "description": "scripts.update_search_page_title_and_button",
        "peekOfCode": "new_input_block = \"\"\"                        <div className=\"input-group\" style={{ display: 'flex', gap: '8px', width: '100%' }}>\n                            <input \n                                type=\"text\" \n                                placeholder=\"ค้นหาชื่อธาตุ หรือคำแปล...\" \n                                value={searchText}\n                                onChange={(e) => setSearchText(e.target.value)}\n                                className=\"search-input\"\n                                style={{ flex: 1 }}\n                            />\n                            <button className=\"search-btn\" style={{ ",
        "detail": "scripts.update_search_page_title_and_button",
        "documentation": {}
    },
    {
        "label": "search_page_path",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "search_page_path = r\"D:\\pali-dhatu-app\\src\\pages\\SearchPage.js\"\napp_css_path = r\"D:\\pali-dhatu-app\\src\\App.css\"\n# 1. Update SearchPage.js\nwith open(search_page_path, 'r', encoding='utf-8') as f:\n    search_content = f.read()\n# Update fetchData to include arth_pali\nold_fetch = \"\"\"                const data = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    dhatu_word: doc.data().dhatu_word,\n                    arth_thai: doc.data().arth_thai,",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "app_css_path",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "app_css_path = r\"D:\\pali-dhatu-app\\src\\App.css\"\n# 1. Update SearchPage.js\nwith open(search_page_path, 'r', encoding='utf-8') as f:\n    search_content = f.read()\n# Update fetchData to include arth_pali\nold_fetch = \"\"\"                const data = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    dhatu_word: doc.data().dhatu_word,\n                    arth_thai: doc.data().arth_thai,\n                    mawat_dhatu: doc.data().mawat_dhatu,",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "old_fetch",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "old_fetch = \"\"\"                const data = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    dhatu_word: doc.data().dhatu_word,\n                    arth_thai: doc.data().arth_thai,\n                    mawat_dhatu: doc.data().mawat_dhatu,\n                    anukrom_dhatu: doc.data().anukrom_dhatu\n                }));\"\"\"\nnew_fetch = \"\"\"                const data = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    dhatu_word: doc.data().dhatu_word,",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "new_fetch",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "new_fetch = \"\"\"                const data = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    dhatu_word: doc.data().dhatu_word,\n                    arth_thai: doc.data().arth_thai,\n                    arth_pali: doc.data().arth_pali,\n                    mawat_dhatu: doc.data().mawat_dhatu,\n                    anukrom_dhatu: doc.data().anukrom_dhatu\n                }));\"\"\"\nif old_fetch in search_content:\n    search_content = search_content.replace(old_fetch, new_fetch)",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "old_filter",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "old_filter = \"\"\"                                (d.arth_thai && d.arth_thai.toLowerCase().includes(searchLower));\"\"\"\nnew_filter = \"\"\"                                (d.arth_thai && d.arth_thai.toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && d.arth_pali.toLowerCase().includes(searchLower));\"\"\"\nif old_filter in search_content:\n    search_content = search_content.replace(old_filter, new_filter)\n# Update JSX Render\nold_jsx = \"\"\"            <div className=\"results-grid\">\n                {displayedData.map(dhatu => (\n                    <Link to={`/dhatu/${dhatu.id}`} key={dhatu.id} className=\"dhatu-card-mini\">\n                        <div className=\"card-top\">",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "new_filter",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "new_filter = \"\"\"                                (d.arth_thai && d.arth_thai.toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && d.arth_pali.toLowerCase().includes(searchLower));\"\"\"\nif old_filter in search_content:\n    search_content = search_content.replace(old_filter, new_filter)\n# Update JSX Render\nold_jsx = \"\"\"            <div className=\"results-grid\">\n                {displayedData.map(dhatu => (\n                    <Link to={`/dhatu/${dhatu.id}`} key={dhatu.id} className=\"dhatu-card-mini\">\n                        <div className=\"card-top\">\n                            <span className=\"id-badge\">#{dhatu.anukrom_dhatu}</span>",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "old_jsx",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "old_jsx = \"\"\"            <div className=\"results-grid\">\n                {displayedData.map(dhatu => (\n                    <Link to={`/dhatu/${dhatu.id}`} key={dhatu.id} className=\"dhatu-card-mini\">\n                        <div className=\"card-top\">\n                            <span className=\"id-badge\">#{dhatu.anukrom_dhatu}</span>\n                            <span className=\"group-badge\">{dhatu.mawat_dhatu}</span>\n                        </div>\n                        <h3>{dhatu.dhatu_word}</h3>\n                        <p>{dhatu.arth_thai}</p>\n                    </Link>",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "new_jsx",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "new_jsx = \"\"\"            <div className=\"results-grid\">\n                {displayedData.map(dhatu => (\n                    <Link to={`/dhatu/${dhatu.id}`} key={dhatu.id} className=\"dhatu-card-mini\">\n                        <div className=\"card-top\">\n                            <span className=\"dhatu-name\">{dhatu.dhatu_word}</span>\n                            <span className=\"group-badge\">{dhatu.mawat_dhatu}</span>\n                        </div>\n                        <div className=\"dhatu-meaning-container\">\n                            <span className=\"pali-meaning\">({dhatu.arth_pali})</span>\n                            <span className=\"thai-meaning\"> {dhatu.arth_thai}</span>",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "new_styles",
        "kind": 5,
        "importPath": "scripts.update_search_ui",
        "description": "scripts.update_search_ui",
        "peekOfCode": "new_styles = \"\"\"\n/* Updated Search Result Styles */\n.dhatu-name {\n  font-size: 1.5rem;\n  font-weight: bold;\n  color: var(--primary-color);\n}\n.dhatu-meaning-container {\n  margin-top: 0.5rem;\n  font-size: 1rem;",
        "detail": "scripts.update_search_ui",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_search_ui_styles",
        "description": "scripts.update_search_ui_styles",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\pages\\SearchPage.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Fix the Vocab Search Link (make it visible and distinct)\n# Old: <Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ color: \"#fff\", textDecoration: \"underline\" }}>🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)</Link>\n# New: Styled as a secondary button/box\nold_link = '<div style={{ marginBottom: \"15px\" }}><Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ color: \"#fff\", textDecoration: \"underline\" }}>🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)</Link></div>'\nnew_link = \"\"\"<div style={{ marginBottom: \"20px\" }}>\n                    <Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ \n                        display: 'inline-block',",
        "detail": "scripts.update_search_ui_styles",
        "documentation": {}
    },
    {
        "label": "old_link",
        "kind": 5,
        "importPath": "scripts.update_search_ui_styles",
        "description": "scripts.update_search_ui_styles",
        "peekOfCode": "old_link = '<div style={{ marginBottom: \"15px\" }}><Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ color: \"#fff\", textDecoration: \"underline\" }}>🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)</Link></div>'\nnew_link = \"\"\"<div style={{ marginBottom: \"20px\" }}>\n                    <Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ \n                        display: 'inline-block',\n                        backgroundColor: '#e67e22', \n                        color: 'white', \n                        padding: '10px 20px', \n                        borderRadius: '30px', \n                        textDecoration: 'none',\n                        fontWeight: 'bold',",
        "detail": "scripts.update_search_ui_styles",
        "documentation": {}
    },
    {
        "label": "new_link",
        "kind": 5,
        "importPath": "scripts.update_search_ui_styles",
        "description": "scripts.update_search_ui_styles",
        "peekOfCode": "new_link = \"\"\"<div style={{ marginBottom: \"20px\" }}>\n                    <Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ \n                        display: 'inline-block',\n                        backgroundColor: '#e67e22', \n                        color: 'white', \n                        padding: '10px 20px', \n                        borderRadius: '30px', \n                        textDecoration: 'none',\n                        fontWeight: 'bold',\n                        boxShadow: '0 2px 5px rgba(0,0,0,0.1)',",
        "detail": "scripts.update_search_ui_styles",
        "documentation": {}
    },
    {
        "label": "input_search_str",
        "kind": 5,
        "importPath": "scripts.update_search_ui_styles",
        "description": "scripts.update_search_ui_styles",
        "peekOfCode": "input_search_str = 'className=\"search-input\"'\n# We want to add style={{ flex: 1, backgroundColor: '#f0f2f5' }} \n# Currently it has style={{ flex: 1 }}\nold_style = 'style={{ flex: 1 }}'\nnew_style = \"style={{ flex: 1, backgroundColor: '#f8f9fa', border: '2px solid #bdc3c7' }}\"\n# Be careful not to replace other inputs if any (there's only one search-input in this file usually)\n# But wait, I just wrote the file with `style={{ flex: 1 }}` in the previous step.\nif old_style in content:\n    content = content.replace(old_style, new_style)\nwith open(file_path, 'w', encoding='utf-8') as f:",
        "detail": "scripts.update_search_ui_styles",
        "documentation": {}
    },
    {
        "label": "old_style",
        "kind": 5,
        "importPath": "scripts.update_search_ui_styles",
        "description": "scripts.update_search_ui_styles",
        "peekOfCode": "old_style = 'style={{ flex: 1 }}'\nnew_style = \"style={{ flex: 1, backgroundColor: '#f8f9fa', border: '2px solid #bdc3c7' }}\"\n# Be careful not to replace other inputs if any (there's only one search-input in this file usually)\n# But wait, I just wrote the file with `style={{ flex: 1 }}` in the previous step.\nif old_style in content:\n    content = content.replace(old_style, new_style)\nwith open(file_path, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"SearchPage.js styles updated.\")",
        "detail": "scripts.update_search_ui_styles",
        "documentation": {}
    },
    {
        "label": "new_style",
        "kind": 5,
        "importPath": "scripts.update_search_ui_styles",
        "description": "scripts.update_search_ui_styles",
        "peekOfCode": "new_style = \"style={{ flex: 1, backgroundColor: '#f8f9fa', border: '2px solid #bdc3c7' }}\"\n# Be careful not to replace other inputs if any (there's only one search-input in this file usually)\n# But wait, I just wrote the file with `style={{ flex: 1 }}` in the previous step.\nif old_style in content:\n    content = content.replace(old_style, new_style)\nwith open(file_path, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"SearchPage.js styles updated.\")",
        "detail": "scripts.update_search_ui_styles",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_search_ui_v2",
        "description": "scripts.update_search_ui_v2",
        "peekOfCode": "file_path = r'd:\\pali-dhatu-app\\src\\pages\\SearchPage.js'\nwith open(file_path, 'r', encoding='utf-8') as f:\n    content = f.read()\n# 1. Update Filter Logic (Remove arth_pali and udaharana)\nold_filter = \"\"\"            const matchesText = !searchText || \n                                (d.dhatu_word && String(d.dhatu_word).toLowerCase().includes(searchLower)) || \n                                (d.arth_thai && String(d.arth_thai).toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && String(d.arth_pali).toLowerCase().includes(searchLower)) ||\n                                (d.udaharana && (Array.isArray(d.udaharana) ? d.udaharana.join(' ') : String(d.udaharana)).toLowerCase().includes(searchLower));\"\"\"\nnew_filter = \"\"\"            const matchesText = !searchText || ",
        "detail": "scripts.update_search_ui_v2",
        "documentation": {}
    },
    {
        "label": "old_filter",
        "kind": 5,
        "importPath": "scripts.update_search_ui_v2",
        "description": "scripts.update_search_ui_v2",
        "peekOfCode": "old_filter = \"\"\"            const matchesText = !searchText || \n                                (d.dhatu_word && String(d.dhatu_word).toLowerCase().includes(searchLower)) || \n                                (d.arth_thai && String(d.arth_thai).toLowerCase().includes(searchLower)) ||\n                                (d.arth_pali && String(d.arth_pali).toLowerCase().includes(searchLower)) ||\n                                (d.udaharana && (Array.isArray(d.udaharana) ? d.udaharana.join(' ') : String(d.udaharana)).toLowerCase().includes(searchLower));\"\"\"\nnew_filter = \"\"\"            const matchesText = !searchText || \n                                (d.dhatu_word && String(d.dhatu_word).toLowerCase().includes(searchLower)) || \n                                (d.arth_thai && String(d.arth_thai).toLowerCase().includes(searchLower));\"\"\"\n# Try to find a substring if exact match fails (due to whitespace)\nif old_filter not in content:",
        "detail": "scripts.update_search_ui_v2",
        "documentation": {}
    },
    {
        "label": "new_filter",
        "kind": 5,
        "importPath": "scripts.update_search_ui_v2",
        "description": "scripts.update_search_ui_v2",
        "peekOfCode": "new_filter = \"\"\"            const matchesText = !searchText || \n                                (d.dhatu_word && String(d.dhatu_word).toLowerCase().includes(searchLower)) || \n                                (d.arth_thai && String(d.arth_thai).toLowerCase().includes(searchLower));\"\"\"\n# Try to find a substring if exact match fails (due to whitespace)\nif old_filter not in content:\n    # Construct a simpler regex or just look for the block\n    start_marker = \"const matchesText = !searchText ||\"\n    end_marker = \"return matchesGroup && matchesText;\"\n    start_idx = content.find(start_marker)\n    end_idx = content.find(end_marker)",
        "detail": "scripts.update_search_ui_v2",
        "documentation": {}
    },
    {
        "label": "old_placeholder",
        "kind": 5,
        "importPath": "scripts.update_search_ui_v2",
        "description": "scripts.update_search_ui_v2",
        "peekOfCode": "old_placeholder = 'placeholder=\"ค้นหาชื่อธาตุ, คำแปล หรือศัพท์ในอุทาหรณ์...\"'\nnew_placeholder = 'placeholder=\"ค้นหาชื่อธาตุ หรือคำแปล...\"'\ncontent = content.replace(old_placeholder, new_placeholder)\n# 3. Add Link to Vocab Search\n# Insert it after <h1>\nif '<h1>สืบค้นธาตุบาลี</h1>' in content and 'Link to=\"/search-vocab\"' not in content:\n    content = content.replace(\n        '<h1>สืบค้นธาตุบาลี</h1>',\n        '<h1>สืบค้นธาตุบาลี</h1>\\n                <div style={{ marginBottom: \"15px\" }}><Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ color: \"#fff\", textDecoration: \"underline\" }}>🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)</Link></div>'\n    )",
        "detail": "scripts.update_search_ui_v2",
        "documentation": {}
    },
    {
        "label": "new_placeholder",
        "kind": 5,
        "importPath": "scripts.update_search_ui_v2",
        "description": "scripts.update_search_ui_v2",
        "peekOfCode": "new_placeholder = 'placeholder=\"ค้นหาชื่อธาตุ หรือคำแปล...\"'\ncontent = content.replace(old_placeholder, new_placeholder)\n# 3. Add Link to Vocab Search\n# Insert it after <h1>\nif '<h1>สืบค้นธาตุบาลี</h1>' in content and 'Link to=\"/search-vocab\"' not in content:\n    content = content.replace(\n        '<h1>สืบค้นธาตุบาลี</h1>',\n        '<h1>สืบค้นธาตุบาลี</h1>\\n                <div style={{ marginBottom: \"15px\" }}><Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ color: \"#fff\", textDecoration: \"underline\" }}>🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)</Link></div>'\n    )\nwith open(file_path, 'w', encoding='utf-8') as f:",
        "detail": "scripts.update_search_ui_v2",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_search_ui_v2",
        "description": "scripts.update_search_ui_v2",
        "peekOfCode": "content = content.replace(old_placeholder, new_placeholder)\n# 3. Add Link to Vocab Search\n# Insert it after <h1>\nif '<h1>สืบค้นธาตุบาลี</h1>' in content and 'Link to=\"/search-vocab\"' not in content:\n    content = content.replace(\n        '<h1>สืบค้นธาตุบาลี</h1>',\n        '<h1>สืบค้นธาตุบาลี</h1>\\n                <div style={{ marginBottom: \"15px\" }}><Link to=\"/search-vocab\" className=\"vocab-search-link\" style={{ color: \"#fff\", textDecoration: \"underline\" }}>🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)</Link></div>'\n    )\nwith open(file_path, 'w', encoding='utf-8') as f:\n    f.write(content)",
        "detail": "scripts.update_search_ui_v2",
        "documentation": {}
    },
    {
        "label": "CSS_PATH",
        "kind": 5,
        "importPath": "scripts.update_styles",
        "description": "scripts.update_styles",
        "peekOfCode": "CSS_PATH = r\"D:\\pali-dhatu-app\\src\\App.css\"\nnew_styles = \"\"\"\n/* --- Grammar Principles Styles (Ported from Learning Web) --- */\n.content-box { font-size: 1.15rem; color: #444; text-align: justify; line-height: 1.8; }\n.content-box p { margin-bottom: 1.5em; }\n.example-list { list-style: none; padding: 0; }\n.example-list li { \n    background: #f9fbfd; \n    margin-bottom: 10px; \n    padding: 15px; ",
        "detail": "scripts.update_styles",
        "documentation": {}
    },
    {
        "label": "new_styles",
        "kind": 5,
        "importPath": "scripts.update_styles",
        "description": "scripts.update_styles",
        "peekOfCode": "new_styles = \"\"\"\n/* --- Grammar Principles Styles (Ported from Learning Web) --- */\n.content-box { font-size: 1.15rem; color: #444; text-align: justify; line-height: 1.8; }\n.content-box p { margin-bottom: 1.5em; }\n.example-list { list-style: none; padding: 0; }\n.example-list li { \n    background: #f9fbfd; \n    margin-bottom: 10px; \n    padding: 15px; \n    border-radius: 8px; ",
        "detail": "scripts.update_styles",
        "documentation": {}
    },
    {
        "label": "TARGET_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page",
        "description": "scripts.update_tananunto_page",
        "peekOfCode": "TARGET_PATH = r'd:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js'\nCONTENT = r'''import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoVocabMap from '../data/tananunto-vocab-map';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.update_tananunto_page",
        "documentation": {}
    },
    {
        "label": "CONTENT",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page",
        "description": "scripts.update_tananunto_page",
        "peekOfCode": "CONTENT = r'''import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoVocabMap from '../data/tananunto-vocab-map';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchText, setSearchText] = useState('');",
        "detail": "scripts.update_tananunto_page",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v10",
        "description": "scripts.update_tananunto_page_v10",
        "peekOfCode": "def update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Replacement 1: Reading logic and cleanup\n    old_read = \"\"\"            // Try to load from localStorage first to save reads\n            const cachedData = localStorage.getItem('dhatu_cache_v2');\n            const cachedTime = localStorage.getItem('dhatu_cache_time_v2');\"\"\"\n    new_read = \"\"\"            // Clean up old cache\n            localStorage.removeItem('dhatu_cache_v2');",
        "detail": "scripts.update_tananunto_page_v10",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v10",
        "description": "scripts.update_tananunto_page_v10",
        "peekOfCode": "FILE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js'\ndef update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Replacement 1: Reading logic and cleanup\n    old_read = \"\"\"            // Try to load from localStorage first to save reads\n            const cachedData = localStorage.getItem('dhatu_cache_v2');\n            const cachedTime = localStorage.getItem('dhatu_cache_time_v2');\"\"\"\n    new_read = \"\"\"            // Clean up old cache",
        "detail": "scripts.update_tananunto_page_v10",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v11",
        "description": "scripts.update_tananunto_page_v11",
        "peekOfCode": "def update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        lines = f.readlines()\n    new_lines = []\n    found = False\n    for line in lines:\n        if \"พบธาตุจำนวน {allDhatus.length} ตัว ที่ปรากฏในพจนานุกรมธรรมบท\" in line:\n            print(f\"Removing line: {line.strip()}\")\n            found = True",
        "detail": "scripts.update_tananunto_page_v11",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v11",
        "description": "scripts.update_tananunto_page_v11",
        "peekOfCode": "FILE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js'\ndef update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        lines = f.readlines()\n    new_lines = []\n    found = False\n    for line in lines:\n        if \"พบธาตุจำนวน {allDhatus.length} ตัว ที่ปรากฏในพจนานุกรมธรรมบท\" in line:\n            print(f\"Removing line: {line.strip()}\")",
        "detail": "scripts.update_tananunto_page_v11",
        "documentation": {}
    },
    {
        "label": "TARGET_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v2",
        "description": "scripts.update_tananunto_page_v2",
        "peekOfCode": "TARGET_PATH = r'd:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js'\nCONTENT = r'''import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoVocabMap from '../data/tananunto-vocab-map';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);",
        "detail": "scripts.update_tananunto_page_v2",
        "documentation": {}
    },
    {
        "label": "CONTENT",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v2",
        "description": "scripts.update_tananunto_page_v2",
        "peekOfCode": "CONTENT = r'''import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoVocabMap from '../data/tananunto-vocab-map';\nfunction TananuntoRootsPage() {\n    const [allDhatus, setAllDhatus] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [searchText, setSearchText] = useState('');",
        "detail": "scripts.update_tananunto_page_v2",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v3",
        "description": "scripts.update_tananunto_page_v3",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\nnew_is_compatible = \"\"\"    // Helper to check if a vocab entry is compatible with a root entry (resolving homonyms)\n    const isCompatible = (dhatu, vocab) => {\n        // If vocab has no specific root info, assume it's compatible (legacy behavior)\n        if (!vocab.root_info) return true;\n        const info = vocab.root_info;\n        // 1. Check Meaning Compatibility\n        if (info.meaning && dhatu.arth_thai) {\n             const dMean = dhatu.arth_thai.replace(/[.,\\s]/g, '');\n             const vMean = info.meaning.replace(/[.,\\s]/g, '');",
        "detail": "scripts.update_tananunto_page_v3",
        "documentation": {}
    },
    {
        "label": "new_is_compatible",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v3",
        "description": "scripts.update_tananunto_page_v3",
        "peekOfCode": "new_is_compatible = \"\"\"    // Helper to check if a vocab entry is compatible with a root entry (resolving homonyms)\n    const isCompatible = (dhatu, vocab) => {\n        // If vocab has no specific root info, assume it's compatible (legacy behavior)\n        if (!vocab.root_info) return true;\n        const info = vocab.root_info;\n        // 1. Check Meaning Compatibility\n        if (info.meaning && dhatu.arth_thai) {\n             const dMean = dhatu.arth_thai.replace(/[.,\\s]/g, '');\n             const vMean = info.meaning.replace(/[.,\\s]/g, '');\n             // Check if either contains the other",
        "detail": "scripts.update_tananunto_page_v3",
        "documentation": {}
    },
    {
        "label": "start_marker",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v3",
        "description": "scripts.update_tananunto_page_v3",
        "peekOfCode": "start_marker = \"const isCompatible = (dhatu, vocab) => {\"\nend_marker = \"return true;\\n    };\"\nstart_idx = content.find(start_marker)\nif start_idx != -1:\n    # Find the closing brace of the function. \n    # Since we know the structure from previous read, we can target the end block.\n    # The previous read showed it ends with:\n    #        return true;\n    #    };\n    # We'll search for the next \"};\" after \"return true;\"",
        "detail": "scripts.update_tananunto_page_v3",
        "documentation": {}
    },
    {
        "label": "end_marker",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v3",
        "description": "scripts.update_tananunto_page_v3",
        "peekOfCode": "end_marker = \"return true;\\n    };\"\nstart_idx = content.find(start_marker)\nif start_idx != -1:\n    # Find the closing brace of the function. \n    # Since we know the structure from previous read, we can target the end block.\n    # The previous read showed it ends with:\n    #        return true;\n    #    };\n    # We'll search for the next \"};\" after \"return true;\"\n    end_idx = content.find(end_marker, start_idx)",
        "detail": "scripts.update_tananunto_page_v3",
        "documentation": {}
    },
    {
        "label": "start_idx",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v3",
        "description": "scripts.update_tananunto_page_v3",
        "peekOfCode": "start_idx = content.find(start_marker)\nif start_idx != -1:\n    # Find the closing brace of the function. \n    # Since we know the structure from previous read, we can target the end block.\n    # The previous read showed it ends with:\n    #        return true;\n    #    };\n    # We'll search for the next \"};\" after \"return true;\"\n    end_idx = content.find(end_marker, start_idx)\n    if end_idx != -1:",
        "detail": "scripts.update_tananunto_page_v3",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v4",
        "description": "scripts.update_tananunto_page_v4",
        "peekOfCode": "def main():\n    with open(TARGET_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # We need to replace the existing getDpdVocab function.\n    # It starts with \"const getDpdVocab = (thaiRoot) => {\"\n    # And ends before \"const isCompatible =\"\n    start_marker = \"const getDpdVocab = (thaiRoot) => {\"\n    end_marker = \"const isCompatible =\"\n    start_idx = content.find(start_marker)\n    end_idx = content.find(end_marker)",
        "detail": "scripts.update_tananunto_page_v4",
        "documentation": {}
    },
    {
        "label": "TARGET_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v4",
        "description": "scripts.update_tananunto_page_v4",
        "peekOfCode": "TARGET_PATH = r'd:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js'\nNEW_GET_DPD_VOCAB = r'''    // Helper to find DPD vocab for a Thai root\n    const getDpdVocab = (thaiRoot) => {\n        if (!thaiRoot) return [];\n        // 1. Transliterate to Roman\n        const roman = PaliScript.thaiToRoman(thaiRoot);\n        if (!roman) return [];\n        // 2. Try exact match (e.g. bhū, jī)\n        if (vocabRootsDpdDerivedEnriched[roman]) return vocabRootsDpdDerivedEnriched[roman];\n        // 3. Try removing final 'a' (common convention: kara -> kar)",
        "detail": "scripts.update_tananunto_page_v4",
        "documentation": {}
    },
    {
        "label": "NEW_GET_DPD_VOCAB",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v4",
        "description": "scripts.update_tananunto_page_v4",
        "peekOfCode": "NEW_GET_DPD_VOCAB = r'''    // Helper to find DPD vocab for a Thai root\n    const getDpdVocab = (thaiRoot) => {\n        if (!thaiRoot) return [];\n        // 1. Transliterate to Roman\n        const roman = PaliScript.thaiToRoman(thaiRoot);\n        if (!roman) return [];\n        // 2. Try exact match (e.g. bhū, jī)\n        if (vocabRootsDpdDerivedEnriched[roman]) return vocabRootsDpdDerivedEnriched[roman];\n        // 3. Try removing final 'a' (common convention: kara -> kar)\n        if (roman.endsWith('a')) {",
        "detail": "scripts.update_tananunto_page_v4",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v5",
        "description": "scripts.update_tananunto_page_v5",
        "peekOfCode": "def update_file():\n    if not os.path.exists(file_path):\n        print(f\"File not found: {file_path}\")\n        return\n    with open(file_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Locate the start of the function\n    start_marker = \"    // Helper to find DPD vocab for a Thai root\"\n    end_marker = \"    };\"\n    start_index = content.find(start_marker)",
        "detail": "scripts.update_tananunto_page_v5",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v5",
        "description": "scripts.update_tananunto_page_v5",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\nnew_function = r'''    // Helper to find DPD vocab for a Thai root\n    const getDpdVocab = (thaiRoot) => {\n        if (!thaiRoot) return [];\n        // 1. Transliterate to Roman\n        const roman = PaliScript.thaiToRoman(thaiRoot);\n        if (!roman) return [];\n        // 2. Try exact match (e.g. bhū, jī)\n        if (vocabRootsDpdDerivedEnriched[roman]) return vocabRootsDpdDerivedEnriched[roman];\n        // 3. Try removing final 'a' (common convention: kara -> kar)",
        "detail": "scripts.update_tananunto_page_v5",
        "documentation": {}
    },
    {
        "label": "new_function",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v5",
        "description": "scripts.update_tananunto_page_v5",
        "peekOfCode": "new_function = r'''    // Helper to find DPD vocab for a Thai root\n    const getDpdVocab = (thaiRoot) => {\n        if (!thaiRoot) return [];\n        // 1. Transliterate to Roman\n        const roman = PaliScript.thaiToRoman(thaiRoot);\n        if (!roman) return [];\n        // 2. Try exact match (e.g. bhū, jī)\n        if (vocabRootsDpdDerivedEnriched[roman]) return vocabRootsDpdDerivedEnriched[roman];\n        // 3. Try removing final 'a' (common convention: kara -> kar)\n        if (roman.endsWith('a')) {",
        "detail": "scripts.update_tananunto_page_v5",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v6",
        "description": "scripts.update_tananunto_page_v6",
        "peekOfCode": "def update_file():\n    if not os.path.exists(file_path):\n        print(f\"File not found: {file_path}\")\n        return\n    with open(file_path, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Find the existing isCompatible function (it might be incomplete)\n    # It starts with: const isCompatible = (dhatu, vocab) => {\n    # and ends... well, we need to be careful.\n    start_marker = \"    const isCompatible = (dhatu, vocab) => {\"",
        "detail": "scripts.update_tananunto_page_v6",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v6",
        "description": "scripts.update_tananunto_page_v6",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\n# We will replace the entire isCompatible function and add the VIKARANA_MAP logic.\nnew_is_compatible = r'''    // Helper to check if a vocab entry is compatible with a root entry (resolving homonyms)\n    const isCompatible = (dhatu, vocab) => {\n        // If vocab doesn't have ending info, show it (safe default)\n        if (!vocab.e) return true;\n        const ending = vocab.e.toLowerCase(); \n        const group = dhatu.mawat_dhatu; // e.g. \"ภู (อ)\", \"ทิว (ย)\"\n        // Extract group sign from parenthesis\n        // \"ภู (อ)\" -> \"อ\"",
        "detail": "scripts.update_tananunto_page_v6",
        "documentation": {}
    },
    {
        "label": "new_is_compatible",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v6",
        "description": "scripts.update_tananunto_page_v6",
        "peekOfCode": "new_is_compatible = r'''    // Helper to check if a vocab entry is compatible with a root entry (resolving homonyms)\n    const isCompatible = (dhatu, vocab) => {\n        // If vocab doesn't have ending info, show it (safe default)\n        if (!vocab.e) return true;\n        const ending = vocab.e.toLowerCase(); \n        const group = dhatu.mawat_dhatu; // e.g. \"ภู (อ)\", \"ทิว (ย)\"\n        // Extract group sign from parenthesis\n        // \"ภู (อ)\" -> \"อ\"\n        // \"รุธ (อ-นิคคหิต)\" -> \"อ\"\n        const match = group.match(/\\((.*?)\\)/);",
        "detail": "scripts.update_tananunto_page_v6",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v7",
        "description": "scripts.update_tananunto_page_v7",
        "peekOfCode": "file_path = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\nnew_content = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoVocabMap from '../data/tananunto-vocab-map';\nimport vocabRootsDpdDerivedEnriched from '../data/vocab-roots-dpd-derived-enriched';\n// PaliScript is still useful for other things, though less needed for DPD lookup now\nimport PaliScript from '../utils/paliScript';",
        "detail": "scripts.update_tananunto_page_v7",
        "documentation": {}
    },
    {
        "label": "new_content",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v7",
        "description": "scripts.update_tananunto_page_v7",
        "peekOfCode": "new_content = \"\"\"import React, { useState, useEffect, useMemo } from 'react';\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore';\nimport { db } from '../firebaseConfig';\nimport { Link } from 'react-router-dom';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport tananuntoVocabMap from '../data/tananunto-vocab-map';\nimport vocabRootsDpdDerivedEnriched from '../data/vocab-roots-dpd-derived-enriched';\n// PaliScript is still useful for other things, though less needed for DPD lookup now\nimport PaliScript from '../utils/paliScript';\nfunction TananuntoRootsPage() {",
        "detail": "scripts.update_tananunto_page_v7",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v8",
        "description": "scripts.update_tananunto_page_v8",
        "peekOfCode": "def main():\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    if OLD_CODE in content:\n        new_content = content.replace(OLD_CODE, NEW_CODE)\n        with open(FILE_PATH, 'w', encoding='utf-8') as f:\n            f.write(new_content)\n        print(\"Successfully updated TananuntoRootsPage.js\")\n    else:\n        print(\"Could not find code block to replace\")",
        "detail": "scripts.update_tananunto_page_v8",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v8",
        "description": "scripts.update_tananunto_page_v8",
        "peekOfCode": "FILE_PATH = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\nOLD_CODE = \"\"\"                                            {dpdList.map((v, idx) => (\n                                                <li key={idx} style={{ marginBottom: '5px', paddingBottom: '5px', borderBottom: '1px dashed #bdc3c7' }}>\n                                                    <strong style={{ color: '#c0392b' }}>{v.w}</strong>\n                                                    {v.e && <span style={{ fontSize: '0.8em', color: '#7f8c8d', marginLeft: '5px' }}>[{v.e}]</span>}\n                                                    <span style={{ color: '#34495e', marginLeft: '5px' }}>\n                                                        {v.d ? v.d.replace(/<[^>]*>/g, '') : ''}\n                                                    </span>\n                                                </li>\n                                            ))}\"\"\"",
        "detail": "scripts.update_tananunto_page_v8",
        "documentation": {}
    },
    {
        "label": "OLD_CODE",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v8",
        "description": "scripts.update_tananunto_page_v8",
        "peekOfCode": "OLD_CODE = \"\"\"                                            {dpdList.map((v, idx) => (\n                                                <li key={idx} style={{ marginBottom: '5px', paddingBottom: '5px', borderBottom: '1px dashed #bdc3c7' }}>\n                                                    <strong style={{ color: '#c0392b' }}>{v.w}</strong>\n                                                    {v.e && <span style={{ fontSize: '0.8em', color: '#7f8c8d', marginLeft: '5px' }}>[{v.e}]</span>}\n                                                    <span style={{ color: '#34495e', marginLeft: '5px' }}>\n                                                        {v.d ? v.d.replace(/<[^>]*>/g, '') : ''}\n                                                    </span>\n                                                </li>\n                                            ))}\"\"\"\nNEW_CODE = \"\"\"                                            {dpdList.map((v, idx) => (",
        "detail": "scripts.update_tananunto_page_v8",
        "documentation": {}
    },
    {
        "label": "NEW_CODE",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v8",
        "description": "scripts.update_tananunto_page_v8",
        "peekOfCode": "NEW_CODE = \"\"\"                                            {dpdList.map((v, idx) => (\n                                                <li key={idx} style={{ marginBottom: '5px', paddingBottom: '5px', borderBottom: '1px dashed #bdc3c7' }}>\n                                                    <div style={{ display: 'flex', alignItems: 'baseline', flexWrap: 'wrap' }}>\n                                                        <strong style={{ color: '#c0392b' }}>{v.w}</strong>\n                                                        {v.e && <span style={{ fontSize: '0.8em', color: '#7f8c8d', marginLeft: '5px' }}>[{v.e}]</span>}\n                                                        <a \n                                                            href={`https://www.dpdict.net/gd?search=${v.w}`} \n                                                            target=\"_blank\" \n                                                            rel=\"noopener noreferrer\"\n                                                            title=\"ดูใน dpdict.net\"",
        "detail": "scripts.update_tananunto_page_v8",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "scripts.update_tananunto_page_v9",
        "description": "scripts.update_tananunto_page_v9",
        "peekOfCode": "def main():\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    if OLD_CODE in content:\n        new_content = content.replace(OLD_CODE, NEW_CODE)\n        with open(FILE_PATH, 'w', encoding='utf-8') as f:\n            f.write(new_content)\n        print(\"Successfully updated TananuntoRootsPage.js\")\n    else:\n        print(\"Could not find code block to replace\")",
        "detail": "scripts.update_tananunto_page_v9",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v9",
        "description": "scripts.update_tananunto_page_v9",
        "peekOfCode": "FILE_PATH = r\"d:\\pali-dhatu-app\\src\\pages\\TananuntoRootsPage.js\"\nOLD_CODE = \"{v.def.replace(v.word, '').trim().replace(/^:\\s*/, '')}\"\nNEW_CODE = \"{v.def.replace(v.word, '').trim().replace(/^:\\s*/, '').replace(/สำเร็จรูปเป็น\\\\s*$/, '')}\"\ndef main():\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    if OLD_CODE in content:\n        new_content = content.replace(OLD_CODE, NEW_CODE)\n        with open(FILE_PATH, 'w', encoding='utf-8') as f:\n            f.write(new_content)",
        "detail": "scripts.update_tananunto_page_v9",
        "documentation": {}
    },
    {
        "label": "OLD_CODE",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v9",
        "description": "scripts.update_tananunto_page_v9",
        "peekOfCode": "OLD_CODE = \"{v.def.replace(v.word, '').trim().replace(/^:\\s*/, '')}\"\nNEW_CODE = \"{v.def.replace(v.word, '').trim().replace(/^:\\s*/, '').replace(/สำเร็จรูปเป็น\\\\s*$/, '')}\"\ndef main():\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    if OLD_CODE in content:\n        new_content = content.replace(OLD_CODE, NEW_CODE)\n        with open(FILE_PATH, 'w', encoding='utf-8') as f:\n            f.write(new_content)\n        print(\"Successfully updated TananuntoRootsPage.js\")",
        "detail": "scripts.update_tananunto_page_v9",
        "documentation": {}
    },
    {
        "label": "NEW_CODE",
        "kind": 5,
        "importPath": "scripts.update_tananunto_page_v9",
        "description": "scripts.update_tananunto_page_v9",
        "peekOfCode": "NEW_CODE = \"{v.def.replace(v.word, '').trim().replace(/^:\\s*/, '').replace(/สำเร็จรูปเป็น\\\\s*$/, '')}\"\ndef main():\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    if OLD_CODE in content:\n        new_content = content.replace(OLD_CODE, NEW_CODE)\n        with open(FILE_PATH, 'w', encoding='utf-8') as f:\n            f.write(new_content)\n        print(\"Successfully updated TananuntoRootsPage.js\")\n    else:",
        "detail": "scripts.update_tananunto_page_v9",
        "documentation": {}
    },
    {
        "label": "APP_CSS_PATH",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "APP_CSS_PATH = r\"D:\\pali-dhatu-app\\src\\App.css\"\nDHATU_DETAIL_PATH = r\"D:\\pali-dhatu-app\\src\\components\\DhatuDetail.js\"\nVERSE_DETAIL_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\VerseDetailPage.js\"\nKATHA_RENDERER_PATH = r\"D:\\pali-dhatu-app\\src\\components\\KathaRenderer.js\"\n# --- 1. Update App.css ---\nwith open(APP_CSS_PATH, \"r\", encoding=\"utf-8\") as f:\n    css_content = f.read()\n# Replace dhātu-card style for better mobile/modern look\nnew_dhatu_card_style = \"\"\"\n.dhātu-card {",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "DHATU_DETAIL_PATH",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "DHATU_DETAIL_PATH = r\"D:\\pali-dhatu-app\\src\\components\\DhatuDetail.js\"\nVERSE_DETAIL_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\VerseDetailPage.js\"\nKATHA_RENDERER_PATH = r\"D:\\pali-dhatu-app\\src\\components\\KathaRenderer.js\"\n# --- 1. Update App.css ---\nwith open(APP_CSS_PATH, \"r\", encoding=\"utf-8\") as f:\n    css_content = f.read()\n# Replace dhātu-card style for better mobile/modern look\nnew_dhatu_card_style = \"\"\"\n.dhātu-card {\n  width: 100%;",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "VERSE_DETAIL_PATH",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "VERSE_DETAIL_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\VerseDetailPage.js\"\nKATHA_RENDERER_PATH = r\"D:\\pali-dhatu-app\\src\\components\\KathaRenderer.js\"\n# --- 1. Update App.css ---\nwith open(APP_CSS_PATH, \"r\", encoding=\"utf-8\") as f:\n    css_content = f.read()\n# Replace dhātu-card style for better mobile/modern look\nnew_dhatu_card_style = \"\"\"\n.dhātu-card {\n  width: 100%;\n  max-width: 340px;",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "KATHA_RENDERER_PATH",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "KATHA_RENDERER_PATH = r\"D:\\pali-dhatu-app\\src\\components\\KathaRenderer.js\"\n# --- 1. Update App.css ---\nwith open(APP_CSS_PATH, \"r\", encoding=\"utf-8\") as f:\n    css_content = f.read()\n# Replace dhātu-card style for better mobile/modern look\nnew_dhatu_card_style = \"\"\"\n.dhātu-card {\n  width: 100%;\n  max-width: 340px;\n  background-color: var(--white);",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "new_dhatu_card_style",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "new_dhatu_card_style = \"\"\"\n.dhātu-card {\n  width: 100%;\n  max-width: 340px;\n  background-color: var(--white);\n  border: none;\n  border-radius: 20px; /* Modern rounded corners */\n  padding: 24px;\n  text-align: left;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06); /* Soft, modern shadow */",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "css_content",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "css_content = re.sub(r\"\\.dhātu-card\\s*\\{[^}]*\\}\", new_dhatu_card_style.strip(), css_content)\n# Add helper classes for \"No Wrap Title\" and Katha styling\nadditional_css = \"\"\"\n/* --- Modern UI Helpers --- */\n.nowrap-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  display: block;",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "additional_css",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "additional_css = \"\"\"\n/* --- Modern UI Helpers --- */\n.nowrap-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  display: block;\n  line-height: 1.4;\n}",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "detail_card_style",
        "kind": 5,
        "importPath": "scripts.update_ui_modern",
        "description": "scripts.update_ui_modern",
        "peekOfCode": "detail_card_style = \"\"\"\n.detail-card {\n    background-color: var(--white);\n    border-radius: 16px;\n    padding: 24px;\n    box-shadow: 0 8px 20px rgba(0,0,0,0.05);\n    margin-bottom: 0; /* Let grid handle gap */\n    transition: transform 0.2s;\n}\n.detail-card:hover {",
        "detail": "scripts.update_ui_modern",
        "documentation": {}
    },
    {
        "label": "app_css_path",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements",
        "description": "scripts.update_ui_refinements",
        "peekOfCode": "app_css_path = \"D:/pali-dhatu-app/src/App.css\"\nverse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\nheader_path = \"D:/pali-dhatu-app/src/components/Header.js\"\n# 1. Update App.css (Remove verse background)\ntry:\n    with open(app_css_path, 'r', encoding='utf-8') as f:\n        css_content = f.read()\n    # Find the rule and replace it\n    old_rule = \"background-color: #f8f9fa; /* Light bg for readability */\"\n    new_rule = \"background-color: transparent; /* Transparent as requested */\"",
        "detail": "scripts.update_ui_refinements",
        "documentation": {}
    },
    {
        "label": "verse_detail_path",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements",
        "description": "scripts.update_ui_refinements",
        "peekOfCode": "verse_detail_path = \"D:/pali-dhatu-app/src/pages/VerseDetailPage.js\"\nheader_path = \"D:/pali-dhatu-app/src/components/Header.js\"\n# 1. Update App.css (Remove verse background)\ntry:\n    with open(app_css_path, 'r', encoding='utf-8') as f:\n        css_content = f.read()\n    # Find the rule and replace it\n    old_rule = \"background-color: #f8f9fa; /* Light bg for readability */\"\n    new_rule = \"background-color: transparent; /* Transparent as requested */\"\n    if old_rule in css_content:",
        "detail": "scripts.update_ui_refinements",
        "documentation": {}
    },
    {
        "label": "header_path",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements",
        "description": "scripts.update_ui_refinements",
        "peekOfCode": "header_path = \"D:/pali-dhatu-app/src/components/Header.js\"\n# 1. Update App.css (Remove verse background)\ntry:\n    with open(app_css_path, 'r', encoding='utf-8') as f:\n        css_content = f.read()\n    # Find the rule and replace it\n    old_rule = \"background-color: #f8f9fa; /* Light bg for readability */\"\n    new_rule = \"background-color: transparent; /* Transparent as requested */\"\n    if old_rule in css_content:\n        css_content = css_content.replace(old_rule, new_rule)",
        "detail": "scripts.update_ui_refinements",
        "documentation": {}
    },
    {
        "label": "app_css_path",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements_v2",
        "description": "scripts.update_ui_refinements_v2",
        "peekOfCode": "app_css_path = 'D:/pali-dhatu-app/src/App.css'\ndhatu_detail_path = 'D:/pali-dhatu-app/src/components/DhatuDetail.js'\n# 1. Update App.css\nwith open(app_css_path, 'r', encoding='utf-8') as f:\n    css_content = f.read()\n# Update katha-grid-display\nif '.katha-grid-display {' in css_content:\n    css_content = css_content.replace(\n        '.katha-grid-display {',\n        '.katha-grid-display {\\n  max-width: 700px;\\n  margin: 1.5rem auto;\\n  padding: 0 1.5rem;'",
        "detail": "scripts.update_ui_refinements_v2",
        "documentation": {}
    },
    {
        "label": "dhatu_detail_path",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements_v2",
        "description": "scripts.update_ui_refinements_v2",
        "peekOfCode": "dhatu_detail_path = 'D:/pali-dhatu-app/src/components/DhatuDetail.js'\n# 1. Update App.css\nwith open(app_css_path, 'r', encoding='utf-8') as f:\n    css_content = f.read()\n# Update katha-grid-display\nif '.katha-grid-display {' in css_content:\n    css_content = css_content.replace(\n        '.katha-grid-display {',\n        '.katha-grid-display {\\n  max-width: 700px;\\n  margin: 1.5rem auto;\\n  padding: 0 1.5rem;'\n    )",
        "detail": "scripts.update_ui_refinements_v2",
        "documentation": {}
    },
    {
        "label": "js_content",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements_v2",
        "description": "scripts.update_ui_refinements_v2",
        "peekOfCode": "js_content = js_content.replace(\n    \"full = 'ธาตุปทีปิกา (รวบรวมโดย พระมหาโพธิวงศาจารย์)';\",\n    \"full = 'ธาตุปทีปิกา';\"\n)\njs_content = js_content.replace(\n    \"full = 'พจนานุกรมธาตุ (พระมหาโพธิวงศาจารย์)';\",\n    \"full = 'พจนานุกรมธาตุ';\"\n)\n# Add formatExample function\nformat_func = \"\"\"",
        "detail": "scripts.update_ui_refinements_v2",
        "documentation": {}
    },
    {
        "label": "js_content",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements_v2",
        "description": "scripts.update_ui_refinements_v2",
        "peekOfCode": "js_content = js_content.replace(\n    \"full = 'พจนานุกรมธาตุ (พระมหาโพธิวงศาจารย์)';\",\n    \"full = 'พจนานุกรมธาตุ';\"\n)\n# Add formatExample function\nformat_func = \"\"\"\n  const formatExample = (text) => {\n      if (!text) return text;\n      // Ensure space after . and ,\n      return text.replace(/([.,])(?!\\\\s)/g, '$1 ');",
        "detail": "scripts.update_ui_refinements_v2",
        "documentation": {}
    },
    {
        "label": "format_func",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements_v2",
        "description": "scripts.update_ui_refinements_v2",
        "peekOfCode": "format_func = \"\"\"\n  const formatExample = (text) => {\n      if (!text) return text;\n      // Ensure space after . and ,\n      return text.replace(/([.,])(?!\\\\s)/g, '$1 ');\n  };\n  const groupCode\"\"\"\nif \"const groupCode\" in js_content and \"const formatExample\" not in js_content:\n    js_content = js_content.replace(\"const groupCode\", format_func)\n# Apply formatExample to list items",
        "detail": "scripts.update_ui_refinements_v2",
        "documentation": {}
    },
    {
        "label": "js_content",
        "kind": 5,
        "importPath": "scripts.update_ui_refinements_v2",
        "description": "scripts.update_ui_refinements_v2",
        "peekOfCode": "js_content = js_content.replace(\n    \"<li key={index}>{item}</li>\",\n    \"<li key={index}>{formatExample(item)}</li>\"\n)\nwith open(dhatu_detail_path, 'w', encoding='utf-8') as f:\n    f.write(js_content)\nprint(f\"Updated {dhatu_detail_path}\")",
        "detail": "scripts.update_ui_refinements_v2",
        "documentation": {}
    },
    {
        "label": "file_path_search",
        "kind": 5,
        "importPath": "scripts.update_ui_text_size",
        "description": "scripts.update_ui_text_size",
        "peekOfCode": "file_path_search = r'd:\\pali-dhatu-app\\src\\pages\\SearchPage.js'\nwith open(file_path_search, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Modify title with inline style for responsive font size (using clamp or vw, but let's stick to user request \"reduce size\")\n# The user said \"overflows on phone\", so let's use a smaller base size or clamp.\n# Current: <h1>สืบค้นธาตุบาลีและคำศัพท์</h1>\n# New: <h1 style={{ fontSize: 'min(2rem, 8vw)' }}>สืบค้นธาตุบาลีและคำศัพท์</h1>\ncontent = content.replace(\n    '<h1>สืบค้นธาตุบาลีและคำศัพท์</h1>', \n    '<h1 style={{ fontSize: \"min(2rem, 7vw)\" }}>สืบค้นธาตุบาลีและคำศัพท์</h1>'",
        "detail": "scripts.update_ui_text_size",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_ui_text_size",
        "description": "scripts.update_ui_text_size",
        "peekOfCode": "content = content.replace(\n    '<h1>สืบค้นธาตุบาลีและคำศัพท์</h1>', \n    '<h1 style={{ fontSize: \"min(2rem, 7vw)\" }}>สืบค้นธาตุบาลีและคำศัพท์</h1>'\n)\n# Remove English text from Link\n# Old: 🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)\n# New: 🔍 ไปที่หน้าค้นหาศัพท์\ncontent = content.replace(\n    '🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)', \n    '🔍 ไปที่หน้าค้นหาศัพท์'",
        "detail": "scripts.update_ui_text_size",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_ui_text_size",
        "description": "scripts.update_ui_text_size",
        "peekOfCode": "content = content.replace(\n    '🔍 ไปที่หน้าค้นหาศัพท์ (Vocabulary Search)', \n    '🔍 ไปที่หน้าค้นหาศัพท์'\n)\nwith open(file_path_search, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"SearchPage.js updated.\")\n# 2. Update VocabSearchPage.js\nfile_path_vocab = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\nwith open(file_path_vocab, 'r', encoding='utf-8') as f:",
        "detail": "scripts.update_ui_text_size",
        "documentation": {}
    },
    {
        "label": "file_path_vocab",
        "kind": 5,
        "importPath": "scripts.update_ui_text_size",
        "description": "scripts.update_ui_text_size",
        "peekOfCode": "file_path_vocab = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\nwith open(file_path_vocab, 'r', encoding='utf-8') as f:\n    content = f.read()\n# Update Title (remove English)\n# Old: <h1>สืบค้นศัพท์บาลี (Vocabulary)</h1>\n# New: <h1>สืบค้นศัพท์บาลี</h1>\ncontent = content.replace(\n    '<h1>สืบค้นศัพท์บาลี (Vocabulary)</h1>', \n    '<h1>สืบค้นศัพท์บาลี</h1>'\n)",
        "detail": "scripts.update_ui_text_size",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_ui_text_size",
        "description": "scripts.update_ui_text_size",
        "peekOfCode": "content = content.replace(\n    '<h1>สืบค้นศัพท์บาลี (Vocabulary)</h1>', \n    '<h1>สืบค้นศัพท์บาลี</h1>'\n)\n# Update Back Link (remove English)\n# Old: ⬅ กลับไปค้นหาธาตุ (Root Search)\n# New: ⬅ กลับไปค้นหาธาตุ\ncontent = content.replace(\n    '⬅ กลับไปค้นหาธาตุ (Root Search)', \n    '⬅ กลับไปค้นหาธาตุ'",
        "detail": "scripts.update_ui_text_size",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "scripts.update_ui_text_size",
        "description": "scripts.update_ui_text_size",
        "peekOfCode": "content = content.replace(\n    '⬅ กลับไปค้นหาธาตุ (Root Search)', \n    '⬅ กลับไปค้นหาธาตุ'\n)\nwith open(file_path_vocab, 'w', encoding='utf-8') as f:\n    f.write(content)\nprint(\"VocabSearchPage.js updated.\")",
        "detail": "scripts.update_ui_text_size",
        "documentation": {}
    },
    {
        "label": "VERSE_DETAIL_PATH",
        "kind": 5,
        "importPath": "scripts.update_verse_page",
        "description": "scripts.update_verse_page",
        "peekOfCode": "VERSE_DETAIL_PATH = r\"D:\\pali-dhatu-app\\src\\pages\\VerseDetailPage.js\"\nwith open(VERSE_DETAIL_PATH, \"r\", encoding=\"utf-8\") as f:\n    content = f.read()\nold_str = '<h2>ธาตุในคาถาที่ {id}</h2>'\nnew_str = '<h2 className=\"nowrap-title\">ธาตุในคาถาที่ {id}</h2>'\nif old_str in content:\n    content = content.replace(old_str, new_str)\n    with open(VERSE_DETAIL_PATH, \"w\", encoding=\"utf-8\") as f:\n        f.write(content)\n    print(\"VerseDetailPage updated.\")",
        "detail": "scripts.update_verse_page",
        "documentation": {}
    },
    {
        "label": "old_str",
        "kind": 5,
        "importPath": "scripts.update_verse_page",
        "description": "scripts.update_verse_page",
        "peekOfCode": "old_str = '<h2>ธาตุในคาถาที่ {id}</h2>'\nnew_str = '<h2 className=\"nowrap-title\">ธาตุในคาถาที่ {id}</h2>'\nif old_str in content:\n    content = content.replace(old_str, new_str)\n    with open(VERSE_DETAIL_PATH, \"w\", encoding=\"utf-8\") as f:\n        f.write(content)\n    print(\"VerseDetailPage updated.\")\nelse:\n    print(\"Target string not found.\")",
        "detail": "scripts.update_verse_page",
        "documentation": {}
    },
    {
        "label": "new_str",
        "kind": 5,
        "importPath": "scripts.update_verse_page",
        "description": "scripts.update_verse_page",
        "peekOfCode": "new_str = '<h2 className=\"nowrap-title\">ธาตุในคาถาที่ {id}</h2>'\nif old_str in content:\n    content = content.replace(old_str, new_str)\n    with open(VERSE_DETAIL_PATH, \"w\", encoding=\"utf-8\") as f:\n        f.write(content)\n    print(\"VerseDetailPage updated.\")\nelse:\n    print(\"Target string not found.\")",
        "detail": "scripts.update_verse_page",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "scripts.update_vocab_search_page_v2",
        "description": "scripts.update_vocab_search_page_v2",
        "peekOfCode": "file_path = r\"D:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js\"\nwith open(file_path, \"r\", encoding=\"utf-8\") as f:\n    content = f.read()\n# 1. Add formatContent function\nformat_function = \"\"\"\nconst formatContent = (text) => {\n    if (!text) return null;\n    // Replace <br> tags with newlines\n    let cleanText = text.replace(/<br\\s*\\/?>/gi, '\\\\n');\n    // Split into lines",
        "detail": "scripts.update_vocab_search_page_v2",
        "documentation": {}
    },
    {
        "label": "format_function",
        "kind": 5,
        "importPath": "scripts.update_vocab_search_page_v2",
        "description": "scripts.update_vocab_search_page_v2",
        "peekOfCode": "format_function = \"\"\"\nconst formatContent = (text) => {\n    if (!text) return null;\n    // Replace <br> tags with newlines\n    let cleanText = text.replace(/<br\\s*\\/?>/gi, '\\\\n');\n    // Split into lines\n    const lines = cleanText.split('\\\\n');\n    return lines.map((line, index) => {\n        const trimmed = line.trim();\n        if (!trimmed) return <div key={index} style={{ height: '8px' }}></div>;",
        "detail": "scripts.update_vocab_search_page_v2",
        "documentation": {}
    },
    {
        "label": "old_render",
        "kind": 5,
        "importPath": "scripts.update_vocab_search_page_v2",
        "description": "scripts.update_vocab_search_page_v2",
        "peekOfCode": "old_render = '<div className=\"meaning-text\">{group.content}</div>'\nnew_render = '<div className=\"meaning-text\">{formatContent(group.content)}</div>'\nif old_render in content:\n    content = content.replace(old_render, new_render)\n    print(\"Updated render to use formatContent.\")\nelse:\n    print(\"Render target not found (or already updated).\")\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)\nprint(\"Done.\")",
        "detail": "scripts.update_vocab_search_page_v2",
        "documentation": {}
    },
    {
        "label": "new_render",
        "kind": 5,
        "importPath": "scripts.update_vocab_search_page_v2",
        "description": "scripts.update_vocab_search_page_v2",
        "peekOfCode": "new_render = '<div className=\"meaning-text\">{formatContent(group.content)}</div>'\nif old_render in content:\n    content = content.replace(old_render, new_render)\n    print(\"Updated render to use formatContent.\")\nelse:\n    print(\"Render target not found (or already updated).\")\nwith open(file_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(content)\nprint(\"Done.\")",
        "detail": "scripts.update_vocab_search_page_v2",
        "documentation": {}
    },
    {
        "label": "update_file",
        "kind": 2,
        "importPath": "scripts.update_vocab_search_remove_newgen",
        "description": "scripts.update_vocab_search_remove_newgen",
        "peekOfCode": "def update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Replacement 1: sourceMapping\n    old_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#d35400', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },\n    'Palidict': { label: 'Palidict.com', color: '#2980b9', icon: 'fas fa-globe' }",
        "detail": "scripts.update_vocab_search_remove_newgen",
        "documentation": {}
    },
    {
        "label": "FILE_PATH",
        "kind": 5,
        "importPath": "scripts.update_vocab_search_remove_newgen",
        "description": "scripts.update_vocab_search_remove_newgen",
        "peekOfCode": "FILE_PATH = r'd:\\pali-dhatu-app\\src\\pages\\VocabSearchPage.js'\ndef update_file():\n    print(f\"Reading {FILE_PATH}...\")\n    with open(FILE_PATH, 'r', encoding='utf-8') as f:\n        content = f.read()\n    # Replacement 1: sourceMapping\n    old_mapping = \"\"\"const sourceMapping = {\n    'Etipitaka': { label: 'พจนานุกรมพระไตรปิฎก', color: '#8e44ad', icon: 'fas fa-book' },\n    'Tananunto': { label: 'พจนานุกรมธรรมบทภาค ๑-๘', color: '#d35400', icon: 'fas fa-bookmark' },\n    'NewGen': { label: 'พจนานุกรมบาลี-ไทย (รุ่นใหม่)', color: '#27ae60', icon: 'fas fa-leaf' },",
        "detail": "scripts.update_vocab_search_remove_newgen",
        "documentation": {}
    },
    {
        "label": "roman_to_thai_robust",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping\n    cons = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',\n        'p': 'ป', 'ph': 'ผ', 'b': 'พ', 'bh': 'ภ', 'm': 'ม',\n        'y': 'ย', 'r': 'ร', 'l': 'ล', 'v': 'ว', 's': 'ส', 'h': 'ห', 'ḷ': 'ฬ',",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "normalize_dpd_root",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def normalize_dpd_root(root_str):\n    # 1. Strip √\n    s = root_str.replace(\"√\", \"\").strip()\n    # 2. Strip numbers and spaces (e.g., \"gam 1\" -> \"gam\")\n    s = re.sub(r'\\s+\\d+$', '', s)\n    s = s.strip()\n    # 3. Transliterate\n    thai = roman_to_thai_robust(s)\n    # 4. Strip final Pinthu if present\n    # But only if it's the very last character",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "map_sign",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def map_sign(dpd_sign):\n    m = {\n        \"a\": \"อ\",\n        \"ya\": \"ย\",\n        \"nu\": \"ณุ\",\n        \"nā\": \"นา\",\n        \"o\": \"โอ\",\n        \"e\": \"เณ\",\n        \"aya\": \"ณย\"\n    }",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "map_group",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def map_group(dpd_group):\n    # DPD: bhū, rudh, div, sw, kī, gah, tan, cur\n    m = {\n        \"bhū\": \"ภู\",\n        \"rudh\": \"รุธ\",\n        \"div\": \"ทิว\",\n        \"sv\": \"สุ\", # sw? check DPD\n        \"sw\": \"สุ\",\n        \"ki\": \"กี\", # kī\n        \"kī\": \"กี\",",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "load_vocab_roots",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def load_vocab_roots():\n    path = os.path.join(\"data\", \"vocab-roots.js\")\n    with open(path, \"r\", encoding=\"utf-8\") as f:\n        content = f.read()\n        # Strip \"const vocabRoots = \" and \";\"\n        json_str = content.replace(\"const vocabRoots = \", \"\").strip().rstrip(\";\")\n        return json.loads(json_str)\ndef save_vocab_roots(data):\n    path = os.path.join(\"data\", \"vocab-roots.js\")\n    with open(path, \"w\", encoding=\"utf-8\") as f:",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "save_vocab_roots",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def save_vocab_roots(data):\n    path = os.path.join(\"data\", \"vocab-roots.js\")\n    with open(path, \"w\", encoding=\"utf-8\") as f:\n        f.write(\"const vocabRoots = \" + json.dumps(data, ensure_ascii=False, indent=2) + \";\")\ndef main():\n    print(\"Loading vocab-roots.js...\")\n    vocab_roots = load_vocab_roots()\n    print(f\"Loaded {len(vocab_roots)} roots from vocab-roots.js\")\n    print(\"Connecting to DPD DB...\")\n    engine = create_engine(f\"sqlite:///{DB_PATH}\")",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "def main():\n    print(\"Loading vocab-roots.js...\")\n    vocab_roots = load_vocab_roots()\n    print(f\"Loaded {len(vocab_roots)} roots from vocab-roots.js\")\n    print(\"Connecting to DPD DB...\")\n    engine = create_engine(f\"sqlite:///{DB_PATH}\")\n    Session = sessionmaker(bind=engine)\n    session = Session()\n    try:\n        dpd_roots = session.query(DpdRoot).all()",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "repo_path",
        "kind": 5,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "repo_path = os.path.join(os.path.dirname(__file__), \"data\", \"dpd-db-repo\")\nsys.path.append(repo_path)\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\nfrom db.models import DpdRoot\n# DB Path\nDB_PATH = os.path.join(repo_path, \"dpd.db\")\ndef roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "DB_PATH",
        "kind": 5,
        "importPath": "enrich_roots_from_dpd",
        "description": "enrich_roots_from_dpd",
        "peekOfCode": "DB_PATH = os.path.join(repo_path, \"dpd.db\")\ndef roman_to_thai_robust(text):\n    text = text.replace(\"√\", \"\").strip()\n    # Mapping\n    cons = {\n        'k': 'ก', 'kh': 'ข', 'g': 'ค', 'gh': 'ฆ', 'ṅ': 'ง',\n        'c': 'จ', 'ch': 'ฉ', 'j': 'ช', 'jh': 'ฌ', 'ñ': 'ญ',\n        'ṭ': 'ฏ', 'ṭh': 'ฐ', 'ḍ': 'ฑ', 'ḍh': 'ฒ', 'ṇ': 'ณ',\n        't': 'ต', 'th': 'ถ', 'd': 'ท', 'dh': 'ธ', 'n': 'น',\n        'p': 'ป', 'ph': 'ผ', 'b': 'พ', 'bh': 'ภ', 'm': 'ม',",
        "detail": "enrich_roots_from_dpd",
        "documentation": {}
    },
    {
        "label": "db_path",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "db_path = \"dpd_data/dpd.db\"\noutput_path = \"data/vocab-dpd.js\"\nprint(f\"Connecting to {db_path}...\")\nconn = sqlite3.connect(db_path)\nconn.row_factory = sqlite3.Row\ncursor = conn.cursor()\nprint(\"Querying headwords...\")\ncursor.execute(\"SELECT lemma_1, pos, meaning_1, meaning_lit, construction FROM dpd_headwords\")\nrows = cursor.fetchall()\ndictionary = {}",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "output_path",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "output_path = \"data/vocab-dpd.js\"\nprint(f\"Connecting to {db_path}...\")\nconn = sqlite3.connect(db_path)\nconn.row_factory = sqlite3.Row\ncursor = conn.cursor()\nprint(\"Querying headwords...\")\ncursor.execute(\"SELECT lemma_1, pos, meaning_1, meaning_lit, construction FROM dpd_headwords\")\nrows = cursor.fetchall()\ndictionary = {}\ncount = 0",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "conn",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "conn = sqlite3.connect(db_path)\nconn.row_factory = sqlite3.Row\ncursor = conn.cursor()\nprint(\"Querying headwords...\")\ncursor.execute(\"SELECT lemma_1, pos, meaning_1, meaning_lit, construction FROM dpd_headwords\")\nrows = cursor.fetchall()\ndictionary = {}\ncount = 0\nfor row in rows:\n    lemma = row['lemma_1']",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "conn.row_factory",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "conn.row_factory = sqlite3.Row\ncursor = conn.cursor()\nprint(\"Querying headwords...\")\ncursor.execute(\"SELECT lemma_1, pos, meaning_1, meaning_lit, construction FROM dpd_headwords\")\nrows = cursor.fetchall()\ndictionary = {}\ncount = 0\nfor row in rows:\n    lemma = row['lemma_1']\n    # Clean lemma: remove digits and dots at the end (e.g., \"metta 1\", \"a 1.1\")",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "cursor",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "cursor = conn.cursor()\nprint(\"Querying headwords...\")\ncursor.execute(\"SELECT lemma_1, pos, meaning_1, meaning_lit, construction FROM dpd_headwords\")\nrows = cursor.fetchall()\ndictionary = {}\ncount = 0\nfor row in rows:\n    lemma = row['lemma_1']\n    # Clean lemma: remove digits and dots at the end (e.g., \"metta 1\", \"a 1.1\")\n    # Usually it is \"word digit\" or \"word digit.digit\"",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "rows",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "rows = cursor.fetchall()\ndictionary = {}\ncount = 0\nfor row in rows:\n    lemma = row['lemma_1']\n    # Clean lemma: remove digits and dots at the end (e.g., \"metta 1\", \"a 1.1\")\n    # Usually it is \"word digit\" or \"word digit.digit\"\n    # But sometimes the word itself might have numbers? Unlikely for Pali.\n    word = re.sub(r'\\s+\\d+(\\.\\d+)?$', '', lemma).strip()\n    meaning = row['meaning_1']",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "dictionary",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "dictionary = {}\ncount = 0\nfor row in rows:\n    lemma = row['lemma_1']\n    # Clean lemma: remove digits and dots at the end (e.g., \"metta 1\", \"a 1.1\")\n    # Usually it is \"word digit\" or \"word digit.digit\"\n    # But sometimes the word itself might have numbers? Unlikely for Pali.\n    word = re.sub(r'\\s+\\d+(\\.\\d+)?$', '', lemma).strip()\n    meaning = row['meaning_1']\n    if not meaning:",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "count",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "count = 0\nfor row in rows:\n    lemma = row['lemma_1']\n    # Clean lemma: remove digits and dots at the end (e.g., \"metta 1\", \"a 1.1\")\n    # Usually it is \"word digit\" or \"word digit.digit\"\n    # But sometimes the word itself might have numbers? Unlikely for Pali.\n    word = re.sub(r'\\s+\\d+(\\.\\d+)?$', '', lemma).strip()\n    meaning = row['meaning_1']\n    if not meaning:\n        continue",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "final_dict",
        "kind": 5,
        "importPath": "extract_dpd",
        "description": "extract_dpd",
        "peekOfCode": "final_dict = {}\nfor k, v in dictionary.items():\n    final_dict[k] = \"<br>\".join(v)\nprint(\"Writing to file...\")\nwith open(output_path, \"w\", encoding=\"utf-8\") as f:\n    f.write(\"const vocabDPD = \")\n    json.dump(final_dict, f, ensure_ascii=False)\n    f.write(\";\")\nprint(f\"Done. Saved to {output_path}\")",
        "detail": "extract_dpd",
        "documentation": {}
    },
    {
        "label": "file_path",
        "kind": 5,
        "importPath": "git_editor",
        "description": "git_editor",
        "peekOfCode": "file_path = sys.argv[1]\nwith open(file_path, 'r') as f:\n    content = f.read()\n# Replace 'pick' with 'edit' for the commit e557daa\ncontent = content.replace('pick e557daa', 'edit e557daa')\nwith open(file_path, 'w') as f:\n    f.write(content)",
        "detail": "git_editor",
        "documentation": {}
    },
    {
        "label": "content",
        "kind": 5,
        "importPath": "git_editor",
        "description": "git_editor",
        "peekOfCode": "content = content.replace('pick e557daa', 'edit e557daa')\nwith open(file_path, 'w') as f:\n    f.write(content)",
        "detail": "git_editor",
        "documentation": {}
    },
    {
        "label": "base_url",
        "kind": 5,
        "importPath": "list_assets",
        "description": "list_assets",
        "peekOfCode": "base_url = \"https://github.com/digitalpalidictionary/dpd-db/releases/download/v0.2.20251105\"\nfilenames = [\"dpd.db\", \"dpd.db.zip\", \"dpd-db.zip\", \"dpd-sqlite.zip\", \"dpd.zip\"]\nfor name in filenames:\n    url = f\"{base_url}/{name}\"\n    print(f\"Checking {url}...\")\n    try:\n        request = urllib.request.Request(url, method='HEAD')\n        with urllib.request.urlopen(request) as response:\n            print(f\"  [SUCCESS] {name} exists! (Status: {response.status})\")\n    except urllib.error.HTTPError as e:",
        "detail": "list_assets",
        "documentation": {}
    },
    {
        "label": "filenames",
        "kind": 5,
        "importPath": "list_assets",
        "description": "list_assets",
        "peekOfCode": "filenames = [\"dpd.db\", \"dpd.db.zip\", \"dpd-db.zip\", \"dpd-sqlite.zip\", \"dpd.zip\"]\nfor name in filenames:\n    url = f\"{base_url}/{name}\"\n    print(f\"Checking {url}...\")\n    try:\n        request = urllib.request.Request(url, method='HEAD')\n        with urllib.request.urlopen(request) as response:\n            print(f\"  [SUCCESS] {name} exists! (Status: {response.status})\")\n    except urllib.error.HTTPError as e:\n        print(f\"  [FAILED] {name}: {e.code} {e.reason}\")",
        "detail": "list_assets",
        "documentation": {}
    }
]