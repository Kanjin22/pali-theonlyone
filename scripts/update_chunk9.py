import json
import re

file_path = r'd:\pali-theonlyone\data\raw\vocab-insan-pr9-5-8.js'

with open(file_path, 'r', encoding='utf-8') as f:
    lines = f.readlines()

new_lines = []
skip_next = False

for i, line in enumerate(lines):
    if skip_next:
        skip_next = False
        continue

    # Handle insertions after อาฆาตาภาเวน
    if '"อาฆาตาภาเวน":' in line:
        new_lines.append(line)
        
        # Insert อาจริย ๑
        content_1 = "น.,ปุ. อาจารย์ แจกเหมือน ปุริส เช่น ป.เอก. อาจริโย อ. อาจารย์"
        new_lines.append(f'  "อาจริย ๑": "{content_1}",\n')
        
        # Insert อาจริย ๒
        content_2 = "ว. ผู้อันศิษย์พึงประพฤติโดยเอื้อเฟื้อ ปุ. แจกเหมือน ปุริส เช่น ป.เอก. อาจริโย (ปุคฺคโล) อ. บุคคล ผู้อันศิษย์พึงประพฤติโดย เอื้อเฟื้อ คำว่า อาจริย มาจาก อา = อาทร บทหน้า + จร ธาตุ ในความประพฤติ + ณฺย ปัจจัย ลบ ณฺ เหลือไว้แต่ ย ลง อิ อาคม ได้รูปเป็น อาจริย แปลว่า อัน...พึงประพฤติโดยเอื้อเฟื้อ เป็น กัมมรูป กัมมสาธนะ วิ.ว่า อาทเรน จริตพฺโพติ อาจริโย (ปุคฺคโล) [มังคลัตถทีปนี ภาค ๒ หน้า ๒๗๘ ข้อ ๓๖๖] บุคคลใด อันศิษย์ พึงประพฤติ โดยเอื้อเฟื้อ เหตุนั้น บุคคลนั้น ชื่อว่า อาจริโยๆ ผู้อันศิษย์พึงประพฤติโดยเอื้อเฟื้อ"
        new_lines.append(f'  "อาจริย ๒": "{content_2}",\n')
        continue

    # Remove garbage key "กัมมรูป กัมมสาธนะ" (merged into อาจริย ๒ above)
    if '"กัมมรูป กัมมสาธนะ":' in line:
        continue

    # 3. Update อาจริยฏฺาน (using ฏฺาน instead of ฏฺฐาน)
    if '"อาจริยฏฺฐาน":' in line:
        new_lines.append('  "อาจริยฏฺาน": "น.,นปุ. ฐานะ (ตำแหน่ง) แห่ง อาจารย์แจกเหมือน กุล เช่น ส.เอก. อาจริยฏฺ- าเน ในฐานะแห่งอาจารย์ เป็นฉัฏฐีตัปปุริส สมาส วิ.ว่า อาจริยสฺส านํ = อาจริยฏฺานํ [ซ้อน ฏฺ]",\n')
        continue

    # 4. Update อาจริยธน
    if '"อาจริยธน":' in line:
        new_lines.append('  "อาจริยธน": "น.,นปุ. ทรัพย์ของอาจารย์ แจกเหมือน กุล เช่น ส.เอก. อาจริยธนํ ซึ่งทรัพย์ของอาจารย์ เป็นฉัฏฐีตัปปุริสสมาส วิ.ว่า อาจริยสฺส ธนํ = อาจริยธนํ",\n')
        continue

    # 5. Update อาจริยวตฺต
    if '"อาจริยวตฺต":' in line:
        new_lines.append('  "อาจริยวตฺต": "น.,นปุ. วัตรเพื่ออาจารย์ ดู อาคนฺตุกทาน",\n')
        continue

    # 6. Update อาจริยุปชฺฌายอาคนฺตุกานํ and merge อสมาหารทวันทวสมาส
    if '"อาจริยุปชฺฌายอาคนฺตุกานํ":' in line:
        content = "น.,ปุ. เพื่ออาจารย์ และอุปัชฌาย์และภิกษุผู้จรมา ท. เป็น อสมาหารทวันทวสมาส วิ.ว่า อาจริโย จ อุปชฺฌาโย จ อาคนฺตุโก จ = อาจริยุปชฺฌาย- อาคนฺตุกา แจกเหมือน ปุริส เฉพาะฝ่ายพหุ."
        new_lines.append(f'  "อาจริยุปชฺฌายอาคนฺตุกานํ": "{content}",\n')
        if i + 1 < len(lines) and '"อสมาหารทวันทวสมาส":' in lines[i+1]:
            skip_next = True
        continue

    # 7. Update อาจริยุปชฺฌายา
    if '"อาจริยุปชฺฌายา":' in line:
        content = "น.,ปุ. อ. อาจารย์และอุปัชฌาย์ ท. แจกเหมือน ปุริส เฉพาะฝ่ายพหุวจนะ เป็น อสมาหารทวันทวสมาส วิ.ว่า อาจริโย จ อุปชฺฌาโย จ = อาจริยุปชฺฌายา"
        new_lines.append(f'  "อาจริยุปชฺฌายา": "{content}",\n')
        continue

    # 8. Update อาจามกุณฺฑํ and merge สมาหารทวันทวสมาส
    if '"อาจามกุณฺฑํ":' in line:
        content = "น.,นปุ. อ. ข้าวตังและรำ เป็น สมาหารทวันทวสมาส วิ.ว่า อาจาโม จ กุณฺโฑ จ = อาจามกุณฺฑํ แจกเหมือน กุล เฉพาะฝ่าย เอกวจนะ [อาจาม = ข้าวตัง ปุ., กุณฺฑ = รำ ปุ.]"
        new_lines.append(f'  "อาจามกุณฺฑํ": "{content}",\n')
        if i + 1 < len(lines) and '"สมาหารทวันทวสมาส":' in lines[i+1]:
            skip_next = True
        continue

    # 9. Update อาจารกุสล
    if '"อาจารกุสล":' in line:
        new_lines.append('  "อาจารกุสล": "ว. ผู้ฉลาดในอาจาระ ปุ. แจกเหมือน ปุริส เช่น ป.เอก. อาจารกุสโล (ปุคฺคโล) อ. บุคคล ผู้ฉลาดในอาจาระ เป็นฉัฏฐีตัปปุริสสมาส วิ.ว่า อาจารสฺส กุสโล = อาจารกุสโล (ปุคฺคโล) [ศัพท์ที่อยู่หน้า กุสล, โกสล, เฉก, พฺยตฺต, โกวิท แปลว่า ใน เวลาตั้งวิเคราะห์ ต้องประกอบเป็น ฉัฏฐีวิภัตติ แล้วเรียกชื่อสมาสตามวิภัตติที่ ปรากฏในรูปวิเคราะห์]",\n')
        continue

    # 10. Update อาจารโกสลฺล
    if '"อาจารโกสลฺล":' in line:
        new_lines.append('  "อาจารโกสลฺล": "น.,นปุ. ความที่แห่งตนเป็นผู้ฉลาด ในอาจาระ แจกเหมือน กุล เช่น ทุ.เอก. อาจาร โกสลฺลํ เฉพาะปัญจมีวิภัตติ ฝ่ายเอก. ลง โต ปัจจัย เป็น อาจารโกสลฺลโต บ้าง ลง ณฺย ปัจจัย ในภาวตัทธิต มีฉัฏฐีตัปปุริสสมาส เป็นภายใน มีวิเคราะห์ตามลำดับ ดังนี้ ฉ.ตัป.วิ. อาจารสฺส กุสโล = อาจารกุสโล (เถโร) ณฺย.ภาว.วิ. อาจาร- กุสลสฺส ภาโว = อาจารโกสลฺลํ คำว่า โกสลฺลํ มาจาก กุสล ศัพท์ + ณฺย ปัจจัย ด้วยอำนาจ ณฺย ปัจจัย พฤทธิ อุ ต้นศัพท์เป็น โอ ลบ ณฺ เหลือไว้ แต่ ย เป็น โกสล + ย แปลง ย กับ ล เป็น ลฺล ได้รูปเป็น โกสลฺล",\n')
        continue

    # 11. Update อาจารสมฺปนฺน
    if '"อาจารสมฺปนฺน":' in line:
        new_lines.append('  "อาจารสมฺปนฺน": "ว. ผู้ถึงพร้อมแล้วด้วยอาจาระ เป็นตติยาตัปปุริสสมาส ปุ. แจกเหมือน ปุริส เช่น ป.เอก. อาจารสมฺปนฺโน (เถโร) อ. พระเถระ ผู้ถึงพร้อมแล้วด้วยอาจาระ วิ.ว่า อาจาเรน สมฺปนฺโน = อาจารสมฺปนฺโน (เถโร) อิต. ลง อา เครื่องหมายอิตถีลิงค์ แจกเหมือน กญฺา เช่น ป.เอก. อาจารสมฺปนฺนา (เถรี)",\n')
        continue

    # 12. Update อาจิกฺข
    if '"อาจิกฺข":' in line:
        new_lines.append('  "อาจิกฺข": "ก. (ตฺวํ อ. ท่าน) จงบอก อา บทหน้า + จิกฺข ธาตุ ในความบอก + อ ปัจจัย ในกัตตุวาจก + หิ ปัญจมีวิภัตติ ลบ หิ สำเร็จรูปเป็น อาจิกฺข",\n')
        continue

    # 13. Update อาจิกฺขติ
    if '"อาจิกฺขติ":' in line:
        new_lines.append('  "อาจิกฺขติ": "ก. (เช่น ชโน อ. ชน) ย่อมบอก อา บทหน้า + จิกฺข ธาตุ ในความบอก + อ ปัจจัย ในกัตตุวาจก + ติ วัตตมานาวิภัตติ สำเร็จรูปเป็น อาจิกฺขติ",\n')
        continue

    # 14. Update อาจิกฺขเต
    if '"อาจิกฺขเต":' in line:
        new_lines.append('  "อาจิกฺขเต": "ก. (เช่น ชโน อ. ชน) ย่อมเรียก อา บทหน้า + จิกฺข ธาตุ ในความบอก + อ ปัจจัย ในกัตตุวาจก + เต วัตตมานาวิภัตติ สำเร็จรูปเป็น อาจิกฺขเต",\n')
        continue

    new_lines.append(line)

with open(file_path, 'w', encoding='utf-8') as f:
    f.writelines(new_lines)

print("Updates applied successfully.")
